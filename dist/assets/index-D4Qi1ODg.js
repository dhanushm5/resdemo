var js=Object.defineProperty;var es=e=>{throw TypeError(e)};var Ls=(e,i,s)=>i in e?js(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s;var Ln=(e,i,s)=>Ls(e,typeof i!="symbol"?i+"":i,s),yr=(e,i,s)=>i.has(e)||es("Cannot "+s);var j=(e,i,s)=>(yr(e,i,"read from private field"),s?s.call(e):i.get(e)),qt=(e,i,s)=>i.has(e)?es("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,s),Yt=(e,i,s,a)=>(yr(e,i,"write to private field"),a?a.call(e,s):i.set(e,s),s),Nt=(e,i,s)=>(yr(e,i,"access private method"),s);var Jn=(e,i,s,a)=>({set _(o){Yt(e,i,o,s)},get _(){return j(e,i,a)}});function _mergeNamespaces(e,i){for(var s=0;s<i.length;s++){const a=i[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in e)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(e,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var s=function a(){return this instanceof a?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,i,s){this.props=e,this.context=i,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,i,s){this.props=e,this.context=i,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,i,s){var a,o={},c=null,d=null;if(i!=null)for(a in i.ref!==void 0&&(d=i.ref),i.key!==void 0&&(c=""+i.key),i)J.call(i,a)&&!L$1.hasOwnProperty(a)&&(o[a]=i[a]);var g=arguments.length-2;if(g===1)o.children=s;else if(1<g){for(var h=Array(g),b=0;b<g;b++)h[b]=arguments[b+2];o.children=h}if(e&&e.defaultProps)for(a in g=e.defaultProps,g)o[a]===void 0&&(o[a]=g[a]);return{$$typeof:l$1,type:e,key:c,ref:d,props:o,_owner:K$1.current}}function N$1(e,i){return{$$typeof:l$1,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return i[s]})}var P$1=/\/+/g;function Q$1(e,i){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):i.toString(36)}function R$1(e,i,s,a,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,o=o(d),e=a===""?"."+Q$1(d,0):a,I$1(o)?(s="",e!=null&&(s=e.replace(P$1,"$&/")+"/"),R$1(o,i,s,"",function(b){return b})):o!=null&&(O$1(o)&&(o=N$1(o,s+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+e)),i.push(o)),1;if(d=0,a=a===""?".":a+":",I$1(e))for(var g=0;g<e.length;g++){c=e[g];var h=a+Q$1(c,g);d+=R$1(c,i,s,h,o)}else if(h=A$1(e),typeof h=="function")for(e=h.call(e),g=0;!(c=e.next()).done;)c=c.value,h=a+Q$1(c,g++),d+=R$1(c,i,s,h,o);else if(c==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,i,s){if(e==null)return e;var a=[],o=0;return R$1(e,a,"","",function(c){return i.call(s,c,o++)}),a}function T$1(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,i,s){S$1(e,function(){i.apply(this,arguments)},s)},count:function(e){var i=0;return S$1(e,function(){i++}),i},toArray:function(e){return S$1(e,function(i){return i})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(e,i,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),o=e.key,c=e.ref,d=e._owner;if(i!=null){if(i.ref!==void 0&&(c=i.ref,d=K$1.current),i.key!==void 0&&(o=""+i.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(h in i)J.call(i,h)&&!L$1.hasOwnProperty(h)&&(a[h]=i[h]===void 0&&g!==void 0?g[h]:i[h])}var h=arguments.length-2;if(h===1)a.children=s;else if(1<h){g=Array(h);for(var b=0;b<h;b++)g[b]=arguments[b+2];a.children=g}return{$$typeof:l$1,type:e.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var i=M$1.bind(null,e);return i.type=e,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,i){return{$$typeof:x,type:e,compare:i===void 0?null:i}};react_production_min.startTransition=function(e){var i=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=i}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(e,i){return U$1.current.useCallback(e,i)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,i){return U$1.current.useEffect(e,i)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,i,s){return U$1.current.useImperativeHandle(e,i,s)};react_production_min.useInsertionEffect=function(e,i){return U$1.current.useInsertionEffect(e,i)};react_production_min.useLayoutEffect=function(e,i){return U$1.current.useLayoutEffect(e,i)};react_production_min.useMemo=function(e,i){return U$1.current.useMemo(e,i)};react_production_min.useReducer=function(e,i,s){return U$1.current.useReducer(e,i,s)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,i,s){return U$1.current.useSyncExternalStore(e,i,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,i,s){var a,o={},c=null,d=null;s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),i.ref!==void 0&&(d=i.ref);for(a in i)m$1.call(i,a)&&!p$1.hasOwnProperty(a)&&(o[a]=i[a]);if(e&&e.defaultProps)for(a in i=e.defaultProps,i)o[a]===void 0&&(o[a]=i[a]);return{$$typeof:k,type:e,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(Mt,vt){var Rt=Mt.length;Mt.push(vt);e:for(;0<Rt;){var $t=Rt-1>>>1,_t=Mt[$t];if(0<o(_t,vt))Mt[$t]=vt,Mt[Rt]=_t,Rt=$t;else break e}}function s(Mt){return Mt.length===0?null:Mt[0]}function a(Mt){if(Mt.length===0)return null;var vt=Mt[0],Rt=Mt.pop();if(Rt!==vt){Mt[0]=Rt;e:for(var $t=0,_t=Mt.length,rt=_t>>>1;$t<rt;){var at=2*($t+1)-1,gt=Mt[at],wt=at+1,St=Mt[wt];if(0>o(gt,Rt))wt<_t&&0>o(St,gt)?(Mt[$t]=St,Mt[wt]=Rt,$t=wt):(Mt[$t]=gt,Mt[at]=Rt,$t=at);else if(wt<_t&&0>o(St,Rt))Mt[$t]=St,Mt[wt]=Rt,$t=wt;else break e}}return vt}function o(Mt,vt){var Rt=Mt.sortIndex-vt.sortIndex;return Rt!==0?Rt:Mt.id-vt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var h=[],b=[],_=1,et=null,nt=3,st=!1,ot=!1,ht=!1,dt=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ct(Mt){for(var vt=s(b);vt!==null;){if(vt.callback===null)a(b);else if(vt.startTime<=Mt)a(b),vt.sortIndex=vt.expirationTime,i(h,vt);else break;vt=s(b)}}function pt(Mt){if(ht=!1,ct(Mt),!ot)if(s(h)!==null)ot=!0,Bt(tt);else{var vt=s(b);vt!==null&&Ft(pt,vt.startTime-Mt)}}function tt(Mt,vt){ot=!1,ht&&(ht=!1,$(lt),lt=-1),st=!0;var Rt=nt;try{for(ct(vt),et=s(h);et!==null&&(!(et.expirationTime>vt)||Mt&&!ft());){var $t=et.callback;if(typeof $t=="function"){et.callback=null,nt=et.priorityLevel;var _t=$t(et.expirationTime<=vt);vt=e.unstable_now(),typeof _t=="function"?et.callback=_t:et===s(h)&&a(h),ct(vt)}else a(h);et=s(h)}if(et!==null)var rt=!0;else{var at=s(b);at!==null&&Ft(pt,at.startTime-vt),rt=!1}return rt}finally{et=null,nt=Rt,st=!1}}var ut=!1,it=null,lt=-1,mt=5,Et=-1;function ft(){return!(e.unstable_now()-Et<mt)}function xt(){if(it!==null){var Mt=e.unstable_now();Et=Mt;var vt=!0;try{vt=it(!0,Mt)}finally{vt?kt():(ut=!1,it=null)}}else ut=!1}var kt;if(typeof _e=="function")kt=function(){_e(xt)};else if(typeof MessageChannel<"u"){var Dt=new MessageChannel,Ot=Dt.port2;Dt.port1.onmessage=xt,kt=function(){Ot.postMessage(null)}}else kt=function(){dt(xt,0)};function Bt(Mt){it=Mt,ut||(ut=!0,kt())}function Ft(Mt,vt){lt=dt(function(){Mt(e.unstable_now())},vt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Mt){Mt.callback=null},e.unstable_continueExecution=function(){ot||st||(ot=!0,Bt(tt))},e.unstable_forceFrameRate=function(Mt){0>Mt||125<Mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):mt=0<Mt?Math.floor(1e3/Mt):5},e.unstable_getCurrentPriorityLevel=function(){return nt},e.unstable_getFirstCallbackNode=function(){return s(h)},e.unstable_next=function(Mt){switch(nt){case 1:case 2:case 3:var vt=3;break;default:vt=nt}var Rt=nt;nt=vt;try{return Mt()}finally{nt=Rt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Mt,vt){switch(Mt){case 1:case 2:case 3:case 4:case 5:break;default:Mt=3}var Rt=nt;nt=Mt;try{return vt()}finally{nt=Rt}},e.unstable_scheduleCallback=function(Mt,vt,Rt){var $t=e.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?$t+Rt:$t):Rt=$t,Mt){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=Rt+_t,Mt={id:_++,callback:vt,priorityLevel:Mt,startTime:Rt,expirationTime:_t,sortIndex:-1},Rt>$t?(Mt.sortIndex=Rt,i(b,Mt),s(h)===null&&Mt===s(b)&&(ht?($(lt),lt=-1):ht=!0,Ft(pt,Rt-$t))):(Mt.sortIndex=_t,i(h,Mt),ot||st||(ot=!0,Bt(tt))),Mt},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(Mt){var vt=nt;return function(){var Rt=nt;nt=vt;try{return Mt.apply(this,arguments)}finally{nt=Rt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,i){ha(e,i),ha(e+"Capture",i)}function ha(e,i){for(ea[e]=i,e=0;e<i.length;e++)da.add(i[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,i,s,a){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,i,s,a){if(i===null||typeof i>"u"||pa(e,i,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v(e,i,s,a,o,c,d){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=e,this.type=i,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];z[i]=new v(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(ra,sa);z[i]=new v(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,i,s,a){var o=z.hasOwnProperty(i)?z[i]:null;(o!==null?o.type!==0:a||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa(i,s,o,a)&&(s=null),a||o===null?oa(i)&&(s===null?e.removeAttribute(i):e.setAttribute(i,""+s)):o.mustUseProperty?e[o.propertyName]=s===null?o.type===3?!1:"":s:(i=o.attributeName,a=o.attributeNamespace,s===null?e.removeAttribute(i):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,a?e.setAttributeNS(a,i,s):e.setAttribute(i,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);La=i&&i[1]||""}return`
`+La+e}var Na=!1;function Oa(e,i){if(!e||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(b){var a=b}Reflect.construct(e,[],i)}else{try{i.call()}catch(b){a=b}e.call(i.prototype)}else{try{throw Error()}catch(b){a=b}e()}}catch(b){if(b&&a&&typeof b.stack=="string"){for(var o=b.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,g=c.length-1;1<=d&&0<=g&&o[d]!==c[g];)g--;for(;1<=d&&0<=g;d--,g--)if(o[d]!==c[g]){if(d!==1||g!==1)do if(d--,g--,0>g||o[d]!==c[g]){var h=`
`+o[d].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=d&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return i=e.displayName||null,i!==null?i:Qa(e.type)||"Memo";case Ha:i=e._payload,e=e._init;try{return Qa(e(i))}catch{}}return null}function Ra(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(i);case 8:return i===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua(e){var i=Ta(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),a=""+e[i];if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,c=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==s?(i.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,i){var s=i.checked;return A({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Za(e,i){var s=i.defaultValue==null?"":i.defaultValue,a=i.checked!=null?i.checked:i.defaultChecked;s=Sa(i.value!=null?i.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab(e,i){i=i.checked,i!=null&&ta(e,"checked",i,!1)}function bb(e,i){ab(e,i);var s=Sa(i.value),a=i.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?cb(e,i.type,s):i.hasOwnProperty("defaultValue")&&cb(e,i.type,Sa(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function db(e,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var a=i.type;if(!(a!=="submit"&&a!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,s||i===e.value||(e.value=i),e.defaultValue=i}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function cb(e,i,s){(i!=="number"||Xa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var eb=Array.isArray;function fb(e,i,s,a){if(e=e.options,i){i={};for(var o=0;o<s.length;o++)i["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=i.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Sa(s),i=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}i!==null||e[o].disabled||(i=e[o])}i!==null&&(i.selected=!0)}}function gb(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}i=s}i==null&&(i=""),s=i}e._wrapperState={initialValue:Sa(s)}}function ib(e,i){var s=Sa(i.value),a=Sa(i.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),i.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function jb(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,a,o){MSApp.execUnsafeLocalFunction(function(){return e(i,s,a,o)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function ob(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),pb[i]=pb[e]})});function rb(e,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||pb.hasOwnProperty(e)&&pb[e]?(""+i).trim():i+"px"}function sb(e,i){e=e.style;for(var s in i)if(i.hasOwnProperty(s)){var a=s.indexOf("--")===0,o=rb(s,i[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,o):e[s]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,i){if(i){if(tb[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p(62))}}function vb(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var i=e.stateNode;i&&(i=Db(i),yb(e.stateNode,e.type,i))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,i=Ab;if(Ab=zb=null,Bb(e),i)for(e=0;e<i.length;e++)Bb(i[e])}}function Gb(e,i){return e(i)}function Hb(){}var Ib=!1;function Jb(e,i,s){if(Ib)return e(i,s);Ib=!0;try{return Gb(e,i,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,i){var s=e.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(p(231,i,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,i,s,a,o,c,d,g,h){var b=Array.prototype.slice.call(arguments,3);try{i.apply(s,b)}catch(_){this.onError(_)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,i,s,a,o,c,d,g,h){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,i,s,a,o,c,d,g,h){if(Tb.apply(this,arguments),Ob){if(Ob){var b=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=b)}}function Vb(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function Wb(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var i=e.alternate;if(!i){if(i=Vb(e),i===null)throw Error(p(188));return i!==e?null:e}for(var s=e,a=i;;){var o=s.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){s=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===s)return Xb(o),e;if(c===a)return Xb(o),i;c=c.sibling}throw Error(p(188))}if(s.return!==a.return)s=o,a=c;else{for(var d=!1,g=o.child;g;){if(g===s){d=!0,s=o,a=c;break}if(g===a){d=!0,a=o,s=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===s){d=!0,s=c,a=o;break}if(g===a){d=!0,a=c,s=o;break}g=g.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?e:i}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=$b(e);if(i!==null)return i;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,i){var s=e.pendingLanes;if(s===0)return 0;var a=0,o=e.suspendedLanes,c=e.pingedLanes,d=s&268435455;if(d!==0){var g=d&~o;g!==0?a=tc(g):(c&=d,c!==0&&(a=tc(c)))}else d=s&~o,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(i!==0&&i!==a&&!(i&o)&&(o=a&-a,c=i&-i,o>=c||o===16&&(c&4194240)!==0))return i;if(a&4&&(a|=s&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=a;0<i;)s=31-oc(i),o=1<<s,a|=e[s],i&=~o;return a}function vc(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,i){for(var s=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),g=1<<d,h=o[d];h===-1?(!(g&s)||g&a)&&(o[d]=vc(g,i)):h<=i&&(e.expiredLanes|=g),c&=~g}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function Ac(e,i,s){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-oc(i),e[i]=s}function Bc(e,i){var s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var o=31-oc(s),c=1<<o;i[o]=0,a[o]=-1,e[o]=-1,s&=~c}}function Cc(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var a=31-oc(s),o=1<<a;o&i|e[a]&i&&(e[a]|=i),s&=~o}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,i){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(i.pointerId)}}function Tc(e,i,s,a,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:i,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},i!==null&&(i=Cb(i),i!==null&&Fc(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,o!==null&&i.indexOf(o)===-1&&i.push(o),e)}function Uc(e,i,s,a,o){switch(i){case"focusin":return Lc=Tc(Lc,e,i,s,a,o),!0;case"dragenter":return Mc=Tc(Mc,e,i,s,a,o),!0;case"mouseover":return Nc=Tc(Nc,e,i,s,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,i,s,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,i,s,a,o)),!0}return!1}function Vc(e){var i=Wc(e.target);if(i!==null){var s=Vb(i);if(s!==null){if(i=s.tag,i===13){if(i=Wb(s),i!==null){e.blockedOn=i,Ic(e.priority,function(){Gc(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Yc(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return i=Cb(s),i!==null&&Fc(i),e.blockedOn=s,!1;i.shift()}return!0}function Zc(e,i,s){Xc(e)&&s.delete(i)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,i){e.blockedOn===i&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function i(o){return ad(o,e)}if(0<Kc.length){ad(Kc[0],e);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(i),Pc.forEach(i),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,i,s,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,i,s,a)}finally{C=o,cd.transition=c}}function gd(e,i,s,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,i,s,a)}finally{C=o,cd.transition=c}}function fd(e,i,s,a){if(dd){var o=Yc(e,i,s,a);if(o===null)hd(e,i,a,id,s),Sc(e,a);else if(Uc(o,e,i,s,a))a.stopPropagation();else if(Sc(e,a),i&4&&-1<Rc.indexOf(e)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(e,i,s,a),c===null&&hd(e,i,a,id,s),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(e,i,a,null,s)}}var id=null;function Yc(e,i,s,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(i=Vb(e),i===null)e=null;else if(s=i.tag,s===13){if(e=Wb(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,i=ld,s=i.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(e=0;e<s&&i[e]===o[e];e++);var d=s-e;for(a=1;a<=d&&i[s-a]===o[c-a];a++);return md=o.slice(e,1<a?1-a:void 0)}function od(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function i(s,a,o,c,d){this._reactName=s,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(s=e[g],this[g]=s?s(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),i}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Od[e])?!!i[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var i=Md[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,i){switch(e){case"keyup":return $d.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,i){switch(e){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(fe=!0,ee);case"textInput":return e=i.data,e===ee&&fe?null:e;default:return null}}function ke(e,i){if(ie)return e==="compositionend"||!ae&&ge(e,i)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!le[e.type]:i==="textarea"}function ne(e,i,s,a){Eb(a),i=oe(i,"onChange"),0<i.length&&(s=new td("onChange","change",null,s,a),e.push({event:s,listeners:i}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var i=ue(e);if(Wa(i))return e}function ve(e,i){if(e==="change")return i}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var i=[];ne(i,qe,e,xb(e)),Jb(re,i)}}function Ce(e,i,s){e==="focusin"?(Ae(),pe=i,qe=s,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,i){if(e==="click")return te(i)}function Fe(e,i){if(e==="input"||e==="change")return te(i)}function Ge(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,i){if(He(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),a=Object.keys(i);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var o=s[a];if(!ja.call(i,o)||!He(e[o],i[o]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,i){var s=Je(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=i&&a>=i)return{node:s,offset:i-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Le(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Me(){for(var e=window,i=Xa();i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=Xa(e.document)}return i}function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Oe(e){var i=Me(),s=e.focusedElem,a=e.selectionRange;if(i!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(i=a.start,e=a.end,e===void 0&&(e=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(e,s.value.length);else if(e=(i=s.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var o=s.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!e.extend&&c>a&&(o=a,a=c,c=o),o=Ke(s,c);var d=Ke(s,a);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(i=i.createRange(),i.setStart(o.node,o.offset),e.removeAllRanges(),c>a?(e.addRange(i),e.extend(d.node,d.offset)):(i.setEnd(d.node,d.offset),e.addRange(i)))}}for(i=[],e=s;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)e=i[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,i,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(i=new td("onSelect","select",null,i,s),e.push({event:i,listeners:a}),i.target=Qe)))}function Ve(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var i=We[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ye)return Xe[e]=i[s];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,i){df.set(e,i),fa(i,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,i,s){var a=e.type||"unknown-event";e.currentTarget=s,Ub(a,i,void 0,e),e.currentTarget=null}function se(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],o=a.event;a=a.listeners;e:{var c=void 0;if(i)for(var d=a.length-1;0<=d;d--){var g=a[d],h=g.instance,b=g.currentTarget;if(g=g.listener,h!==c&&o.isPropagationStopped())break e;nf(o,g,b),c=h}else for(d=0;d<a.length;d++){if(g=a[d],h=g.instance,b=g.currentTarget,g=g.listener,h!==c&&o.isPropagationStopped())break e;nf(o,g,b),c=h}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,i){var s=i[of];s===void 0&&(s=i[of]=new Set);var a=e+"__bubble";s.has(a)||(pf(i,e,2,!1),s.add(a))}function qf(e,i,s){var a=0;i&&(a|=4),pf(s,e,a,i)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,e),qf(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rf]||(i[rf]=!0,qf("selectionchange",!1,i))}}function pf(e,i,s,a){switch(jd(i)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}s=o.bind(null,i,s,e),o=void 0,!Lb||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(i,s,{capture:!0,passive:o}):e.addEventListener(i,s,!0):o!==void 0?e.addEventListener(i,s,{passive:o}):e.addEventListener(i,s,!1)}function hd(e,i,s,a,o){var c=a;if(!(i&1)&&!(i&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var g=a.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var h=d.tag;if((h===3||h===4)&&(h=d.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;d=d.return}for(;g!==null;){if(d=Wc(g),d===null)return;if(h=d.tag,h===5||h===6){a=c=d;continue e}g=g.parentNode}}a=a.return}Jb(function(){var b=c,_=xb(s),et=[];e:{var nt=df.get(e);if(nt!==void 0){var st=td,ot=e;switch(e){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":st=Rd;break;case"focusin":ot="focus",st=Fd;break;case"focusout":ot="blur",st=Fd;break;case"beforeblur":case"afterblur":st=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Vd;break;case $e:case af:case bf:st=Hd;break;case cf:st=Xd;break;case"scroll":st=vd;break;case"wheel":st=Zd;break;case"copy":case"cut":case"paste":st=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Td}var ht=(i&4)!==0,dt=!ht&&e==="scroll",$=ht?nt!==null?nt+"Capture":null:nt;ht=[];for(var _e=b,ct;_e!==null;){ct=_e;var pt=ct.stateNode;if(ct.tag===5&&pt!==null&&(ct=pt,$!==null&&(pt=Kb(_e,$),pt!=null&&ht.push(tf(_e,pt,ct)))),dt)break;_e=_e.return}0<ht.length&&(nt=new st(nt,ot,null,s,_),et.push({event:nt,listeners:ht}))}}if(!(i&7)){e:{if(nt=e==="mouseover"||e==="pointerover",st=e==="mouseout"||e==="pointerout",nt&&s!==wb&&(ot=s.relatedTarget||s.fromElement)&&(Wc(ot)||ot[uf]))break e;if((st||nt)&&(nt=_.window===_?_:(nt=_.ownerDocument)?nt.defaultView||nt.parentWindow:window,st?(ot=s.relatedTarget||s.toElement,st=b,ot=ot?Wc(ot):null,ot!==null&&(dt=Vb(ot),ot!==dt||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(st=null,ot=b),st!==ot)){if(ht=Bd,pt="onMouseLeave",$="onMouseEnter",_e="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Td,pt="onPointerLeave",$="onPointerEnter",_e="pointer"),dt=st==null?nt:ue(st),ct=ot==null?nt:ue(ot),nt=new ht(pt,_e+"leave",st,s,_),nt.target=dt,nt.relatedTarget=ct,pt=null,Wc(_)===b&&(ht=new ht($,_e+"enter",ot,s,_),ht.target=ct,ht.relatedTarget=dt,pt=ht),dt=pt,st&&ot)t:{for(ht=st,$=ot,_e=0,ct=ht;ct;ct=vf(ct))_e++;for(ct=0,pt=$;pt;pt=vf(pt))ct++;for(;0<_e-ct;)ht=vf(ht),_e--;for(;0<ct-_e;)$=vf($),ct--;for(;_e--;){if(ht===$||$!==null&&ht===$.alternate)break t;ht=vf(ht),$=vf($)}ht=null}else ht=null;st!==null&&wf(et,nt,st,ht,!1),ot!==null&&dt!==null&&wf(et,dt,ot,ht,!0)}}e:{if(nt=b?ue(b):window,st=nt.nodeName&&nt.nodeName.toLowerCase(),st==="select"||st==="input"&&nt.type==="file")var tt=ve;else if(me(nt))if(we)tt=Fe;else{tt=De;var ut=Ce}else(st=nt.nodeName)&&st.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(tt=Ee);if(tt&&(tt=tt(e,b))){ne(et,tt,s,_);break e}ut&&ut(e,nt,b),e==="focusout"&&(ut=nt._wrapperState)&&ut.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(ut=b?ue(b):window,e){case"focusin":(me(ut)||ut.contentEditable==="true")&&(Qe=ut,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(et,s,_);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(et,s,_)}var it;if(ae)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ie?ge(e,s)&&(lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(lt="onCompositionStart");lt&&(de&&s.locale!=="ko"&&(ie||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ie&&(it=nd()):(kd=_,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ut=oe(b,lt),0<ut.length&&(lt=new Ld(lt,e,null,s,_),et.push({event:lt,listeners:ut}),it?lt.data=it:(it=he(s),it!==null&&(lt.data=it)))),(it=ce?je(e,s):ke(e,s))&&(b=oe(b,"onBeforeInput"),0<b.length&&(_=new Ld("onBeforeInput","beforeinput",null,s,_),et.push({event:_,listeners:b}),_.data=it))}se(et,i)})}function tf(e,i,s){return{instance:e,listener:i,currentTarget:s}}function oe(e,i){for(var s=i+"Capture",a=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(e,s),c!=null&&a.unshift(tf(e,c,o)),c=Kb(e,i),c!=null&&a.push(tf(e,c,o))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,i,s,a,o){for(var c=i._reactName,d=[];s!==null&&s!==a;){var g=s,h=g.alternate,b=g.stateNode;if(h!==null&&h===a)break;g.tag===5&&b!==null&&(g=b,o?(h=Kb(s,c),h!=null&&d.unshift(tf(s,h,g))):o||(h=Kb(s,c),h!=null&&d.push(tf(s,h,g)))),s=s.return}d.length!==0&&e.push({event:i,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,i,s){if(i=zf(i),zf(e)!==i&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,i){var s=i,a=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(a===0){e.removeChild(o),bd(i);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=o}while(s);bd(i)}function Lf(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return e;i--}else s==="/$"&&i++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var i=e[Of];if(i)return i;for(var s=e.parentNode;s;){if(i=s[uf]||s[Of]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=Mf(e);e!==null;){if(s=e[Of])return s;e=Mf(e)}return i}e=s,s=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,i){Tf++,Sf[Tf]=e.current,e.current=i}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,i){var s=e.type.contextTypes;if(!s)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===i)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in s)o[c]=i[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,i,s){if(H.current!==Vf)throw Error(p(168));G(H,i),G(Wf,s)}function bg(e,i,s){var a=e.stateNode;if(i=i.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var o in a)if(!(o in i))throw Error(p(108,Ra(e)||"Unknown",o));return A({},s,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,i,s){var a=e.stateNode;if(!a)throw Error(p(169));s?(e=bg(e,i,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,i=C;try{var s=eg;for(C=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),o}finally{C=i,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,i){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=i}function ug(e,i,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var o=32-oc(a)-1;a&=~(1<<o),s+=1;var c=32-oc(i)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg=1<<32-oc(i)+o|s<<o|a,sg=c+e}else rg=1<<c|s<<o|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,i){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=e,i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)}function Cg(e,i){switch(e.tag){case 5:var s=e.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,xg=e,yg=Lf(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,xg=e,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=i,s.return=e,e.child=s,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var i=yg;if(i){var s=i;if(!Cg(e,i)){if(Dg(e))throw Error(p(418));i=Lf(s.nextSibling);var a=xg;i&&Cg(e,i)?Ag(a,s):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Ef(e.type,e.memoizedProps)),i&&(i=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;i;)Ag(e,i),i=Lf(i.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(i===0){yg=Lf(e.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,i,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,e));var o=a,c=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===c?i.ref:(i=function(d){var g=o.refs;d===null?delete g[c]:g[c]=d},i._stringRef=c,i)}if(typeof e!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,e))}return e}function Mg(e,i){throw e=Object.prototype.toString.call(i),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function Ng(e){var i=e._init;return i(e._payload)}function Og(e){function i($,_e){if(e){var ct=$.deletions;ct===null?($.deletions=[_e],$.flags|=16):ct.push(_e)}}function s($,_e){if(!e)return null;for(;_e!==null;)i($,_e),_e=_e.sibling;return null}function a($,_e){for($=new Map;_e!==null;)_e.key!==null?$.set(_e.key,_e):$.set(_e.index,_e),_e=_e.sibling;return $}function o($,_e){return $=Pg($,_e),$.index=0,$.sibling=null,$}function c($,_e,ct){return $.index=ct,e?(ct=$.alternate,ct!==null?(ct=ct.index,ct<_e?($.flags|=2,_e):ct):($.flags|=2,_e)):($.flags|=1048576,_e)}function d($){return e&&$.alternate===null&&($.flags|=2),$}function g($,_e,ct,pt){return _e===null||_e.tag!==6?(_e=Qg(ct,$.mode,pt),_e.return=$,_e):(_e=o(_e,ct),_e.return=$,_e)}function h($,_e,ct,pt){var tt=ct.type;return tt===ya?_($,_e,ct.props.children,pt,ct.key):_e!==null&&(_e.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===Ha&&Ng(tt)===_e.type)?(pt=o(_e,ct.props),pt.ref=Lg($,_e,ct),pt.return=$,pt):(pt=Rg(ct.type,ct.key,ct.props,null,$.mode,pt),pt.ref=Lg($,_e,ct),pt.return=$,pt)}function b($,_e,ct,pt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==ct.containerInfo||_e.stateNode.implementation!==ct.implementation?(_e=Sg(ct,$.mode,pt),_e.return=$,_e):(_e=o(_e,ct.children||[]),_e.return=$,_e)}function _($,_e,ct,pt,tt){return _e===null||_e.tag!==7?(_e=Tg(ct,$.mode,pt,tt),_e.return=$,_e):(_e=o(_e,ct),_e.return=$,_e)}function et($,_e,ct){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Qg(""+_e,$.mode,ct),_e.return=$,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case va:return ct=Rg(_e.type,_e.key,_e.props,null,$.mode,ct),ct.ref=Lg($,null,_e),ct.return=$,ct;case wa:return _e=Sg(_e,$.mode,ct),_e.return=$,_e;case Ha:var pt=_e._init;return et($,pt(_e._payload),ct)}if(eb(_e)||Ka(_e))return _e=Tg(_e,$.mode,ct,null),_e.return=$,_e;Mg($,_e)}return null}function nt($,_e,ct,pt){var tt=_e!==null?_e.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return tt!==null?null:g($,_e,""+ct,pt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case va:return ct.key===tt?h($,_e,ct,pt):null;case wa:return ct.key===tt?b($,_e,ct,pt):null;case Ha:return tt=ct._init,nt($,_e,tt(ct._payload),pt)}if(eb(ct)||Ka(ct))return tt!==null?null:_($,_e,ct,pt,null);Mg($,ct)}return null}function st($,_e,ct,pt,tt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return $=$.get(ct)||null,g(_e,$,""+pt,tt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return $=$.get(pt.key===null?ct:pt.key)||null,h(_e,$,pt,tt);case wa:return $=$.get(pt.key===null?ct:pt.key)||null,b(_e,$,pt,tt);case Ha:var ut=pt._init;return st($,_e,ct,ut(pt._payload),tt)}if(eb(pt)||Ka(pt))return $=$.get(ct)||null,_(_e,$,pt,tt,null);Mg(_e,pt)}return null}function ot($,_e,ct,pt){for(var tt=null,ut=null,it=_e,lt=_e=0,mt=null;it!==null&&lt<ct.length;lt++){it.index>lt?(mt=it,it=null):mt=it.sibling;var Et=nt($,it,ct[lt],pt);if(Et===null){it===null&&(it=mt);break}e&&it&&Et.alternate===null&&i($,it),_e=c(Et,_e,lt),ut===null?tt=Et:ut.sibling=Et,ut=Et,it=mt}if(lt===ct.length)return s($,it),I&&tg($,lt),tt;if(it===null){for(;lt<ct.length;lt++)it=et($,ct[lt],pt),it!==null&&(_e=c(it,_e,lt),ut===null?tt=it:ut.sibling=it,ut=it);return I&&tg($,lt),tt}for(it=a($,it);lt<ct.length;lt++)mt=st(it,$,lt,ct[lt],pt),mt!==null&&(e&&mt.alternate!==null&&it.delete(mt.key===null?lt:mt.key),_e=c(mt,_e,lt),ut===null?tt=mt:ut.sibling=mt,ut=mt);return e&&it.forEach(function(ft){return i($,ft)}),I&&tg($,lt),tt}function ht($,_e,ct,pt){var tt=Ka(ct);if(typeof tt!="function")throw Error(p(150));if(ct=tt.call(ct),ct==null)throw Error(p(151));for(var ut=tt=null,it=_e,lt=_e=0,mt=null,Et=ct.next();it!==null&&!Et.done;lt++,Et=ct.next()){it.index>lt?(mt=it,it=null):mt=it.sibling;var ft=nt($,it,Et.value,pt);if(ft===null){it===null&&(it=mt);break}e&&it&&ft.alternate===null&&i($,it),_e=c(ft,_e,lt),ut===null?tt=ft:ut.sibling=ft,ut=ft,it=mt}if(Et.done)return s($,it),I&&tg($,lt),tt;if(it===null){for(;!Et.done;lt++,Et=ct.next())Et=et($,Et.value,pt),Et!==null&&(_e=c(Et,_e,lt),ut===null?tt=Et:ut.sibling=Et,ut=Et);return I&&tg($,lt),tt}for(it=a($,it);!Et.done;lt++,Et=ct.next())Et=st(it,$,lt,Et.value,pt),Et!==null&&(e&&Et.alternate!==null&&it.delete(Et.key===null?lt:Et.key),_e=c(Et,_e,lt),ut===null?tt=Et:ut.sibling=Et,ut=Et);return e&&it.forEach(function(xt){return i($,xt)}),I&&tg($,lt),tt}function dt($,_e,ct,pt){if(typeof ct=="object"&&ct!==null&&ct.type===ya&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case va:e:{for(var tt=ct.key,ut=_e;ut!==null;){if(ut.key===tt){if(tt=ct.type,tt===ya){if(ut.tag===7){s($,ut.sibling),_e=o(ut,ct.props.children),_e.return=$,$=_e;break e}}else if(ut.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===Ha&&Ng(tt)===ut.type){s($,ut.sibling),_e=o(ut,ct.props),_e.ref=Lg($,ut,ct),_e.return=$,$=_e;break e}s($,ut);break}else i($,ut);ut=ut.sibling}ct.type===ya?(_e=Tg(ct.props.children,$.mode,pt,ct.key),_e.return=$,$=_e):(pt=Rg(ct.type,ct.key,ct.props,null,$.mode,pt),pt.ref=Lg($,_e,ct),pt.return=$,$=pt)}return d($);case wa:e:{for(ut=ct.key;_e!==null;){if(_e.key===ut)if(_e.tag===4&&_e.stateNode.containerInfo===ct.containerInfo&&_e.stateNode.implementation===ct.implementation){s($,_e.sibling),_e=o(_e,ct.children||[]),_e.return=$,$=_e;break e}else{s($,_e);break}else i($,_e);_e=_e.sibling}_e=Sg(ct,$.mode,pt),_e.return=$,$=_e}return d($);case Ha:return ut=ct._init,dt($,_e,ut(ct._payload),pt)}if(eb(ct))return ot($,_e,ct,pt);if(Ka(ct))return ht($,_e,ct,pt);Mg($,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,_e!==null&&_e.tag===6?(s($,_e.sibling),_e=o(_e,ct),_e.return=$,$=_e):(s($,_e),_e=Qg(ct,$.mode,pt),_e.return=$,$=_e),d($)):s($,_e)}return dt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var i=Wg.current;E(Wg),e._currentValue=i}function bh(e,i,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===s)break;e=e.return}}function ch(e,i){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(dh=!0),e.firstContext=null)}function eh(e){var i=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:i,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return i}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,i,s,a){var o=i.interleaved;return o===null?(s.next=s,gh(i)):(s.next=o.next,o.next=s),i.interleaved=s,ih(e,a)}function ih(e,i){e.lanes|=i;var s=e.alternate;for(s!==null&&(s.lanes|=i),s=e,e=e.return;e!==null;)e.childLanes|=i,s=e.alternate,s!==null&&(s.childLanes|=i),s=e,e=e.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function nh(e,i,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?i.next=i:(i.next=o.next,o.next=i),a.pending=i,ih(e,s)}return o=a.interleaved,o===null?(i.next=i,gh(a)):(i.next=o.next,o.next=i),a.interleaved=i,ih(e,s)}function oh(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc(e,s)}}function ph(e,i){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var o=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?o=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?o=c=i:c=c.next=i}else o=c=i;s={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}function qh(e,i,s,a){var o=e.updateQueue;jh=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var h=g,b=h.next;h.next=null,d===null?c=b:d.next=b,d=h;var _=e.alternate;_!==null&&(_=_.updateQueue,g=_.lastBaseUpdate,g!==d&&(g===null?_.firstBaseUpdate=b:g.next=b,_.lastBaseUpdate=h))}if(c!==null){var et=o.baseState;d=0,_=b=h=null,g=c;do{var nt=g.lane,st=g.eventTime;if((a&nt)===nt){_!==null&&(_=_.next={eventTime:st,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var ot=e,ht=g;switch(nt=i,st=s,ht.tag){case 1:if(ot=ht.payload,typeof ot=="function"){et=ot.call(st,et,nt);break e}et=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=ht.payload,nt=typeof ot=="function"?ot.call(st,et,nt):ot,nt==null)break e;et=A({},et,nt);break e;case 2:jh=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,nt=o.effects,nt===null?o.effects=[g]:nt.push(g))}else st={eventTime:st,lane:nt,tag:g.tag,payload:g.payload,callback:g.callback,next:null},_===null?(b=_=st,h=et):_=_.next=st,d|=nt;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;nt=g,g=nt.next,nt.next=null,o.lastBaseUpdate=nt,o.shared.pending=null}}while(!0);if(_===null&&(h=et),o.baseState=h,o.firstBaseUpdate=b,o.lastBaseUpdate=_,i=o.shared.interleaved,i!==null){o=i;do d|=o.lane,o=o.next;while(o!==i)}else c===null&&(o.shared.lanes=0);rh|=d,e.lanes=d,e.memoizedState=et}}function sh(e,i,s){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var a=e[i],o=a.callback;if(o!==null){if(a.callback=null,a=s,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,i){switch(G(wh,i),G(vh,e),G(uh,th),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=lb(i,e)}E(uh),G(uh,i)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var i=xh(uh.current),s=lb(i,e.type);i!==s&&(G(vh,e),G(uh,s))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!He(e[s],i[s]))return!1;return!0}function Nh(e,i,s,a,o,c){if(Hh=c,M=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=s(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,i.updateQueue=null,Fh.current=Qh,e=s(a,o)}while(Jh)}if(Fh.current=Rh,i=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,i)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var i=O===null?M.memoizedState:O.next;if(i!==null)O=i,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,i){return typeof i=="function"?i(e):i}function Wh(e){var i=Uh(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=N,o=a.baseQueue,c=s.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,s.pending=null}if(o!==null){c=o.next,a=a.baseState;var g=d=null,h=null,b=c;do{var _=b.lane;if((Hh&_)===_)h!==null&&(h=h.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),a=b.hasEagerState?b.eagerState:e(a,b.action);else{var et={lane:_,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};h===null?(g=h=et,d=a):h=h.next=et,M.lanes|=_,rh|=_}b=b.next}while(b!==null&&b!==c);h===null?d=a:h.next=g,He(a,i.memoizedState)||(dh=!0),i.memoizedState=a,i.baseState=d,i.baseQueue=h,s.lastRenderedState=a}if(e=s.interleaved,e!==null){o=e;do c=o.lane,M.lanes|=c,rh|=c,o=o.next;while(o!==e)}else o===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function Xh(e){var i=Uh(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=s.dispatch,o=s.pending,c=i.memoizedState;if(o!==null){s.pending=null;var d=o=o.next;do c=e(c,d.action),d=d.next;while(d!==o);He(c,i.memoizedState)||(dh=!0),i.memoizedState=c,i.baseQueue===null&&(i.baseState=c),s.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(e,i){var s=M,a=Uh(),o=i(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,s,a,e),[e]),a.getSnapshot!==i||c||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,o,i),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,i,o)}return o}function di(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=M.updateQueue,i===null?(i={lastEffect:null,stores:null},M.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function ci(e,i,s,a){i.value=s,i.getSnapshot=a,ei(i)&&fi(e)}function ai(e,i,s){return s(function(){ei(i)&&fi(e)})}function ei(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!He(e,s)}catch{return!0}}function fi(e){var i=ih(e,1);i!==null&&gi(i,e,1,-1)}function hi(e){var i=Th();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},i.queue=e,e=e.dispatch=ii.bind(null,M,e),[i.memoizedState,e]}function bi(e,i,s,a){return e={tag:e,create:i,destroy:s,deps:a,next:null},i=M.updateQueue,i===null?(i={lastEffect:null,stores:null},M.updateQueue=i,i.lastEffect=e.next=e):(s=i.lastEffect,s===null?i.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,i.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,i,s,a){var o=Th();M.flags|=e,o.memoizedState=bi(1|i,s,void 0,a===void 0?null:a)}function li(e,i,s,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,a!==null&&Mh(a,d.deps)){o.memoizedState=bi(i,s,c,a);return}}M.flags|=e,o.memoizedState=bi(1|i,s,c,a)}function mi(e,i){return ki(8390656,8,e,i)}function $h(e,i){return li(2048,8,e,i)}function ni(e,i){return li(4,2,e,i)}function oi(e,i){return li(4,4,e,i)}function pi(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function qi(e,i,s){return s=s!=null?s.concat([e]):null,li(4,4,pi.bind(null,i,e),s)}function ri(){}function si(e,i){var s=Uh();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Mh(i,a[1])?a[0]:(s.memoizedState=[e,i],e)}function ti(e,i){var s=Uh();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Mh(i,a[1])?a[0]:(e=e(),s.memoizedState=[e,i],e)}function ui(e,i,s){return Hh&21?(He(s,i)||(s=yc(),M.lanes|=s,rh|=s,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=s)}function vi(e,i){var s=C;C=s!==0&&4>s?s:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),i()}finally{C=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,i,s){var a=yi(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(i,s);else if(s=hh(e,i,s,a),s!==null){var o=R();gi(s,e,a,o),Bi(s,i,a)}}function ii(e,i,s){var a=yi(e),o={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(i,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=i.lastRenderedReducer,c!==null))try{var d=i.lastRenderedState,g=c(d,s);if(o.hasEagerState=!0,o.eagerState=g,He(g,d)){var h=i.interleaved;h===null?(o.next=o,gh(i)):(o.next=h.next,h.next=o),i.interleaved=o;return}}catch{}finally{}s=hh(e,i,o,a),s!==null&&(o=R(),gi(s,e,a,o),Bi(s,i,a))}}function zi(e){var i=e.alternate;return e===M||i!==null&&i===M}function Ai(e,i){Jh=Ih=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function Bi(e,i,s){if(s&4194240){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc(e,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,i){return Th().memoizedState=[e,i===void 0?null:i],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,i,s){return s=s!=null?s.concat([e]):null,ki(4194308,4,pi.bind(null,i,e),s)},useLayoutEffect:function(e,i){return ki(4194308,4,e,i)},useInsertionEffect:function(e,i){return ki(4,2,e,i)},useMemo:function(e,i){var s=Th();return i=i===void 0?null:i,e=e(),s.memoizedState=[e,i],e},useReducer:function(e,i,s){var a=Th();return i=s!==void 0?s(i):i,a.memoizedState=a.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=xi.bind(null,M,e),[a.memoizedState,e]},useRef:function(e){var i=Th();return e={current:e},i.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),i=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,s){var a=M,o=Th();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=i(),Q===null)throw Error(p(349));Hh&30||di(a,i,s)}o.memoizedState=s;var c={value:s,getSnapshot:i};return o.queue=c,mi(ai.bind(null,a,c,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,c,s,i),void 0,null),s},useId:function(){var e=Th(),i=Q.identifierPrefix;if(I){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,i=":"+i+"R"+s,s=Kh++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Lh++,i=":"+i+"r"+s.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return ui(i,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return N===null?i.memoizedState=e:ui(i,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,i){if(e&&e.defaultProps){i=A({},i),e=e.defaultProps;for(var s in e)i[s]===void 0&&(i[s]=e[s]);return i}return i}function Di(e,i,s,a){i=e.memoizedState,s=s(a,i),s=s==null?i:A({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,i,s){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.payload=i,s!=null&&(c.callback=s),i=nh(e,c,o),i!==null&&(gi(i,e,o,a),oh(i,e,o))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.tag=1,c.payload=i,s!=null&&(c.callback=s),i=nh(e,c,o),i!==null&&(gi(i,e,o,a),oh(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=R(),a=yi(e),o=mh(s,a);o.tag=2,i!=null&&(o.callback=i),i=nh(e,o,a),i!==null&&(gi(i,e,a,s),oh(i,e,a))}};function Fi(e,i,s,a,o,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,d):i.prototype&&i.prototype.isPureReactComponent?!Ie(s,a)||!Ie(o,c):!0}function Gi(e,i,s){var a=!1,o=Vf,c=i.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(i)?Xf:H.current,a=i.contextTypes,c=(a=a!=null)?Yf(e,o):Vf),i=new i(s,c),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ei,e.stateNode=i,i._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),i}function Hi(e,i,s,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,a),i.state!==e&&Ei.enqueueReplaceState(i,i.state,null)}function Ii(e,i,s,a){var o=e.stateNode;o.props=s,o.state=e.memoizedState,o.refs={},kh(e);var c=i.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(i)?Xf:H.current,o.context=Yf(e,c)),o.state=e.memoizedState,c=i.getDerivedStateFromProps,typeof c=="function"&&(Di(e,i,c,s),o.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(e,s,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,i){try{var s="",a=i;do s+=Pa(a),a=a.return;while(a);var o=s}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:i,stack:o,digest:null}}function Ki(e,i,s){return{value:e,source:null,stack:s??null,digest:i??null}}function Li(e,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,i,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=i.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,i)},s}function Qi(e,i,s){s=mh(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=i.value;s.payload=function(){return a(o)},s.callback=function(){Li(e,i)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Li(e,i),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=i.stack;this.componentDidCatch(i.value,{componentStack:d!==null?d:""})}),s}function Si(e,i,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var o=new Set;a.set(i,o)}else o=a.get(i),o===void 0&&(o=new Set,a.set(i,o));o.has(s)||(o.add(s),e=Ti.bind(null,e,i,s),i.then(e,e))}function Ui(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Vi(e,i,s,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===i?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=mh(-1,1),i.tag=2,nh(s,i,1))),s.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,i,s,a){i.child=e===null?Vg(i,null,s,a):Ug(i,e.child,s,a)}function Yi(e,i,s,a,o){s=s.render;var c=i.ref;return ch(i,o),a=Nh(e,i,s,a,c,o),s=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o,Zi(e,i,o)):(I&&s&&vg(i),i.flags|=1,Xi(e,i,a,o),i.child)}function $i(e,i,s,a,o){if(e===null){var c=s.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=c,bj(e,i,c,a,o)):(e=Rg(s.type,null,a,i,i.mode,o),e.ref=i.ref,e.return=i,i.child=e)}if(c=e.child,!(e.lanes&o)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,a)&&e.ref===i.ref)return Zi(e,i,o)}return i.flags|=1,e=Pg(c,a),e.ref=i.ref,e.return=i,i.child=e}function bj(e,i,s,a,o){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===i.ref)if(dh=!1,i.pendingProps=a=c,(e.lanes&o)!==0)e.flags&131072&&(dh=!0);else return i.lanes=e.lanes,Zi(e,i,o)}return cj(e,i,s,a,o)}function dj(e,i,s){var a=i.pendingProps,o=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return e=c!==null?c.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,G(ej,fj),fj|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|s,i.memoizedState=null):a=s,G(ej,fj),fj|=a;return Xi(e,i,o,s),i.child}function gj(e,i){var s=i.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function cj(e,i,s,a,o){var c=Zf(s)?Xf:H.current;return c=Yf(i,c),ch(i,o),s=Nh(e,i,s,a,c,o),a=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o,Zi(e,i,o)):(I&&a&&vg(i),i.flags|=1,Xi(e,i,s,o),i.child)}function hj(e,i,s,a,o){if(Zf(s)){var c=!0;cg(i)}else c=!1;if(ch(i,o),i.stateNode===null)ij(e,i),Gi(i,s,a),Ii(i,s,a,o),a=!0;else if(e===null){var d=i.stateNode,g=i.memoizedProps;d.props=g;var h=d.context,b=s.contextType;typeof b=="object"&&b!==null?b=eh(b):(b=Zf(s)?Xf:H.current,b=Yf(i,b));var _=s.getDerivedStateFromProps,et=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==a||h!==b)&&Hi(i,d,a,b),jh=!1;var nt=i.memoizedState;d.state=nt,qh(i,a,d,o),h=i.memoizedState,g!==a||nt!==h||Wf.current||jh?(typeof _=="function"&&(Di(i,s,_,a),h=i.memoizedState),(g=jh||Fi(i,s,g,a,nt,h,b))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=h),d.props=a,d.state=h,d.context=b,a=g):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{d=i.stateNode,lh(e,i),g=i.memoizedProps,b=i.type===i.elementType?g:Ci(i.type,g),d.props=b,et=i.pendingProps,nt=d.context,h=s.contextType,typeof h=="object"&&h!==null?h=eh(h):(h=Zf(s)?Xf:H.current,h=Yf(i,h));var st=s.getDerivedStateFromProps;(_=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==et||nt!==h)&&Hi(i,d,a,h),jh=!1,nt=i.memoizedState,d.state=nt,qh(i,a,d,o);var ot=i.memoizedState;g!==et||nt!==ot||Wf.current||jh?(typeof st=="function"&&(Di(i,s,st,a),ot=i.memoizedState),(b=jh||Fi(i,s,b,a,nt,ot,h)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,ot,h),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,ot,h)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=ot),d.props=a,d.state=ot,d.context=h,a=b):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(i.flags|=1024),a=!1)}return jj(e,i,s,a,c,o)}function jj(e,i,s,a,o,c){gj(e,i);var d=(i.flags&128)!==0;if(!a&&!d)return o&&dg(i,s,!1),Zi(e,i,c);a=i.stateNode,Wi.current=i;var g=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return i.flags|=1,e!==null&&d?(i.child=Ug(i,e.child,null,c),i.child=Ug(i,null,g,c)):Xi(e,i,g,c),i.memoizedState=a.state,o&&dg(i,s,!0),i.child}function kj(e){var i=e.stateNode;i.pendingContext?ag(e,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(e,i.context,!1),yh(e,i.containerInfo)}function lj(e,i,s,a,o){return Ig(),Jg(o),i.flags|=256,Xi(e,i,s,a),i.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,i,s){var a=i.pendingProps,o=L.current,c=!1,d=(i.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(o&2)!==0),g?(c=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),G(L,o&1),e===null)return Eg(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(d=a.children,e=a.fallback,c?(a=i.mode,c=i.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,a,0,null),e=Tg(e,a,s,null),c.return=i,e.return=i,c.sibling=e,i.child=c,i.child.memoizedState=nj(s),i.memoizedState=mj,e):qj(i,d));if(o=e.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return rj(e,i,d,a,g,o,s);if(c){c=a.fallback,d=i.mode,o=e.child,g=o.sibling;var h={mode:"hidden",children:a.children};return!(d&1)&&i.child!==o?(a=i.child,a.childLanes=0,a.pendingProps=h,i.deletions=null):(a=Pg(o,h),a.subtreeFlags=o.subtreeFlags&14680064),g!==null?c=Pg(g,c):(c=Tg(c,d,s,null),c.flags|=2),c.return=i,a.return=i,a.sibling=c,i.child=a,a=c,c=i.child,d=e.child.memoizedState,d=d===null?nj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~s,i.memoizedState=mj,a}return c=e.child,e=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(i.mode&1)&&(a.lanes=s),a.return=i,a.sibling=null,e!==null&&(s=i.deletions,s===null?(i.deletions=[e],i.flags|=16):s.push(e)),i.child=a,i.memoizedState=null,a}function qj(e,i){return i=pj({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function sj(e,i,s,a){return a!==null&&Jg(a),Ug(i,e.child,null,s),e=qj(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function rj(e,i,s,a,o,c,d){if(s)return i.flags&256?(i.flags&=-257,a=Ki(Error(p(422))),sj(e,i,d,a)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(c=a.fallback,o=i.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,d,null),c.flags|=2,a.return=i,c.return=i,a.sibling=c,i.child=a,i.mode&1&&Ug(i,e.child,null,d),i.child.memoizedState=nj(d),i.memoizedState=mj,c);if(!(i.mode&1))return sj(e,i,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var g=a.dgst;return a=g,c=Error(p(419)),a=Ki(c,a,void 0),sj(e,i,d,a)}if(g=(d&e.childLanes)!==0,dh||g){if(a=Q,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(e,o),gi(a,e,o,-1))}return tj(),a=Ki(Error(p(421))),sj(e,i,d,a)}return o.data==="$?"?(i.flags|=128,i.child=e.child,i=uj.bind(null,e),o._reactRetry=i,null):(e=c.treeContext,yg=Lf(o.nextSibling),xg=i,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=i),i=qj(i,a.children),i.flags|=4096,i)}function vj(e,i,s){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),bh(e.return,i,s)}function wj(e,i,s,a,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:o}:(c.isBackwards=i,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=o)}function xj(e,i,s){var a=i.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(e,i,a.children,s),a=L.current,a&2)a=a&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,s,i);else if(e.tag===19)vj(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(L,a),!(i.mode&1))i.memoizedState=null;else switch(o){case"forwards":for(s=i.child,o=null;s!==null;)e=s.alternate,e!==null&&Ch(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=i.child,i.child=null):(o=s.sibling,s.sibling=null),wj(i,!1,o,s,c);break;case"backwards":for(s=null,o=i.child,i.child=null;o!==null;){if(e=o.alternate,e!==null&&Ch(e)===null){i.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}wj(i,!0,s,null,c);break;case"together":wj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ij(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function Zi(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),rh|=i.lanes,!(s&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(p(153));if(i.child!==null){for(e=i.child,s=Pg(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Pg(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function yj(e,i,s){switch(i.tag){case 3:kj(i),Ig();break;case 5:Ah(i);break;case 1:Zf(i.type)&&cg(i);break;case 4:yh(i,i.stateNode.containerInfo);break;case 10:var a=i.type._context,o=i.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=i.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),i.flags|=128,null):s&i.child.childLanes?oj(e,i,s):(G(L,L.current&1),e=Zi(e,i,s),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(a=(s&i.childLanes)!==0,e.flags&128){if(a)return xj(e,i,s);i.flags|=128}if(o=i.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return i.lanes=0,dj(e,i,s)}return Zi(e,i,s)}var zj,Aj,Bj,Cj;zj=function(e,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(e,i,s,a){var o=e.memoizedProps;if(o!==a){e=i.stateNode,xh(uh.current);var c=null;switch(s){case"input":o=Ya(e,o),a=Ya(e,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(e,o),a=gb(e,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(s,a);var d;s=null;for(b in o)if(!a.hasOwnProperty(b)&&o.hasOwnProperty(b)&&o[b]!=null)if(b==="style"){var g=o[b];for(d in g)g.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in a){var h=a[b];if(g=o!=null?o[b]:void 0,a.hasOwnProperty(b)&&h!==g&&(h!=null||g!=null))if(b==="style")if(g){for(d in g)!g.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in h)h.hasOwnProperty(d)&&g[d]!==h[d]&&(s||(s={}),s[d]=h[d])}else s||(c||(c=[]),c.push(b,s)),s=h;else b==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,g=g?g.__html:void 0,h!=null&&g!==h&&(c=c||[]).push(b,h)):b==="children"?typeof h!="string"&&typeof h!="number"||(c=c||[]).push(b,""+h):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea.hasOwnProperty(b)?(h!=null&&b==="onScroll"&&D("scroll",e),c||g===h||(c=[])):(c=c||[]).push(b,h))}s&&(c=c||[]).push("style",s);var b=c;(i.updateQueue=b)&&(i.flags|=4)}};Cj=function(e,i,s,a){s!==a&&(i.flags|=4)};function Dj(e,i){if(!I)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(i)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=s,i}function Ej(e,i,s){var a=i.pendingProps;switch(wg(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf(i.type)&&$f(),S(i),null;case 3:return a=i.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,i),S(i),null;case 5:Bh(i);var o=xh(wh.current);if(s=i.type,e!==null&&i.stateNode!=null)Bj(e,i,s,a,o),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!a){if(i.stateNode===null)throw Error(p(166));return S(i),null}if(e=xh(uh.current),Gg(i)){a=i.stateNode,s=i.type;var c=i.memoizedProps;switch(a[Of]=i,a[Pf]=c,e=(i.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(s,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var g=c[d];d==="children"?typeof g=="string"?a.textContent!==g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,e),o=["children",g]):typeof g=="number"&&a.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,e),o=["children",""+g]):ea.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,i.updateQueue=a,a!==null&&(i.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(s,{is:a.is}):(e=d.createElement(s),s==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,s),e[Of]=i,e[Pf]=a,zj(e,i,!1,!1),i.stateNode=e;e:{switch(d=vb(s,a),s){case"dialog":D("cancel",e),D("close",e),o=a;break;case"iframe":case"object":case"embed":D("load",e),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],e);o=a;break;case"source":D("error",e),o=a;break;case"img":case"image":case"link":D("error",e),D("load",e),o=a;break;case"details":D("toggle",e),o=a;break;case"input":Za(e,a),o=Ya(e,a),D("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),o=gb(e,a),D("invalid",e);break;default:o=a}ub(s,o),g=o;for(c in g)if(g.hasOwnProperty(c)){var h=g[c];c==="style"?sb(e,h):c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&nb(e,h)):c==="children"?typeof h=="string"?(s!=="textarea"||h!=="")&&ob(e,h):typeof h=="number"&&ob(e,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?h!=null&&c==="onScroll"&&D("scroll",e):h!=null&&ta(e,c,h,d))}switch(s){case"input":Va(e),db(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(e&&i.stateNode!=null)Cj(e,i,e.memoizedProps,a);else{if(typeof a!="string"&&i.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(i)){if(a=i.stateNode,s=i.memoizedProps,a[Of]=i,(c=a.nodeValue!==s)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(e.mode&1)!==0)}c&&(i.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=i,i.stateNode=a}return S(i),null;case 13:if(E(L),a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,c=!1;else if(c=Gg(i),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=i.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(i.child.flags|=8192,i.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return zh(),Aj(e,i),e===null&&sf(i.stateNode.containerInfo),S(i),null;case 10:return ah(i.type._context),S(i),null;case 17:return Zf(i.type)&&$f(),S(i),null;case 19:if(E(L),c=i.memoizedState,c===null)return S(i),null;if(a=(i.flags&128)!==0,d=c.rendering,d===null)if(a)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(d=Ch(e),d!==null){for(i.flags|=128,Dj(c,!1),a=d.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),i.subtreeFlags=0,a=s,s=i.child;s!==null;)c=s,e=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return G(L,L.current&1|2),i.child}e=e.sibling}c.tail!==null&&B()>Gj&&(i.flags|=128,a=!0,Dj(c,!1),i.lanes=4194304)}else{if(!a)if(e=Ch(d),e!==null){if(i.flags|=128,a=!0,s=e.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(i),null}else 2*B()-c.renderingStartTime>Gj&&s!==1073741824&&(i.flags|=128,a=!0,Dj(c,!1),i.lanes=4194304);c.isBackwards?(d.sibling=i.child,i.child=d):(s=c.last,s!==null?s.sibling=d:i.child=d,c.last=d)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=B(),i.sibling=null,s=L.current,G(L,a?s&1|2:s&1),i):(S(i),null);case 22:case 23:return Hj(),a=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(i.flags|=8192),a&&i.mode&1?fj&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p(156,i.tag))}function Ij(e,i){switch(wg(i),i.tag){case 1:return Zf(i.type)&&$f(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return zh(),E(Wf),E(H),Eh(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Bh(i),null;case 13:if(E(L),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(p(340));Ig()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(i.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,i){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(e,i,a)}else s.current=null}function Mj(e,i,s){try{s()}catch(a){W(e,i,a)}}var Nj=!1;function Oj(e,i){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,g=-1,h=-1,b=0,_=0,et=e,nt=null;t:for(;;){for(var st;et!==s||o!==0&&et.nodeType!==3||(g=d+o),et!==c||a!==0&&et.nodeType!==3||(h=d+a),et.nodeType===3&&(d+=et.nodeValue.length),(st=et.firstChild)!==null;)nt=et,et=st;for(;;){if(et===e)break t;if(nt===s&&++b===o&&(g=d),nt===c&&++_===a&&(h=d),(st=et.nextSibling)!==null)break;et=nt,nt=et.parentNode}et=st}s=g===-1||h===-1?null:{start:g,end:h}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:e,selectionRange:s},dd=!1,V=i;V!==null;)if(i=V,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,V=e;else for(;V!==null;){i=V;try{var ot=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var ht=ot.memoizedProps,dt=ot.memoizedState,$=i.stateNode,_e=$.getSnapshotBeforeUpdate(i.elementType===i.type?ht:Ci(i.type,ht),dt);$.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var ct=i.stateNode.containerInfo;ct.nodeType===1?ct.textContent="":ct.nodeType===9&&ct.documentElement&&ct.removeChild(ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(pt){W(i,i.return,pt)}if(e=i.sibling,e!==null){e.return=i.return,V=e;break}V=i.return}return ot=Nj,Nj=!1,ot}function Pj(e,i,s){var a=i.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(i,s,c)}o=o.next}while(o!==a)}}function Qj(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==i)}}function Rj(e){var i=e.ref;if(i!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof i=="function"?i(e):i.current=e}}function Sj(e){var i=e.alternate;i!==null&&(e.alternate=null,Sj(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Of],delete i[Pf],delete i[of],delete i[Qf],delete i[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(e,i):s.insertBefore(e,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(e,s)):(i=s,i.appendChild(e)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,i,s),e=e.sibling;e!==null;)Vj(e,i,s),e=e.sibling}function Wj(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,i,s),e=e.sibling;e!==null;)Wj(e,i,s),e=e.sibling}var X$1=null,Xj=!1;function Yj(e,i,s){for(s=s.child;s!==null;)Zj(e,i,s),s=s.sibling}function Zj(e,i,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,i);case 6:var a=X$1,o=Xj;X$1=null,Yj(e,i,s),X$1=a,Xj=o,X$1!==null&&(Xj?(e=X$1,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Xj?(e=X$1,s=s.stateNode,e.nodeType===8?Kf(e.parentNode,s):e.nodeType===1&&Kf(e,s),bd(e)):Kf(X$1,s.stateNode));break;case 4:a=X$1,o=Xj,X$1=s.stateNode.containerInfo,Xj=!0,Yj(e,i,s),X$1=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(s,i,d),o=o.next}while(o!==a)}Yj(e,i,s);break;case 1:if(!U&&(Lj(s,i),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(g){W(s,i,g)}Yj(e,i,s);break;case 21:Yj(e,i,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Yj(e,i,s),U=a):Yj(e,i,s);break;default:Yj(e,i,s)}}function ak(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Kj),i.forEach(function(a){var o=bk.bind(null,e,a);s.has(a)||(s.add(a),a.then(o,o))})}}function ck(e,i){var s=i.deletions;if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];try{var c=e,d=i,g=d;e:for(;g!==null;){switch(g.tag){case 5:X$1=g.stateNode,Xj=!1;break e;case 3:X$1=g.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=g.stateNode.containerInfo,Xj=!0;break e}g=g.return}if(X$1===null)throw Error(p(160));Zj(c,d,o),X$1=null,Xj=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(b){W(o,i,b)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dk(i,e),i=i.sibling}function dk(e,i){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(i,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(ht){W(e,e.return,ht)}try{Pj(5,e,e.return)}catch(ht){W(e,e.return,ht)}}break;case 1:ck(i,e),ek(e),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(i,e),ek(e),a&512&&s!==null&&Lj(s,s.return),e.flags&32){var o=e.stateNode;try{ob(o,"")}catch(ht){W(e,e.return,ht)}}if(a&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,d=s!==null?s.memoizedProps:c,g=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(g,d);var b=vb(g,c);for(d=0;d<h.length;d+=2){var _=h[d],et=h[d+1];_==="style"?sb(o,et):_==="dangerouslySetInnerHTML"?nb(o,et):_==="children"?ob(o,et):ta(o,_,et,b)}switch(g){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var nt=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var st=c.value;st!=null?fb(o,!!c.multiple,st,!1):nt!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(ht){W(e,e.return,ht)}}break;case 6:if(ck(i,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(ht){W(e,e.return,ht)}}break;case 3:if(ck(i,e),ek(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(i.containerInfo)}catch(ht){W(e,e.return,ht)}break;case 4:ck(i,e),ek(e);break;case 13:ck(i,e),ek(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),a&4&&ak(e);break;case 22:if(_=s!==null&&s.memoizedState!==null,e.mode&1?(U=(b=U)||_,ck(i,e),U=b):ck(i,e),ek(e),a&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!_&&e.mode&1)for(V=e,_=e.child;_!==null;){for(et=V=_;V!==null;){switch(nt=V,st=nt.child,nt.tag){case 0:case 11:case 14:case 15:Pj(4,nt,nt.return);break;case 1:Lj(nt,nt.return);var ot=nt.stateNode;if(typeof ot.componentWillUnmount=="function"){a=nt,s=nt.return;try{i=a,ot.props=i.memoizedProps,ot.state=i.memoizedState,ot.componentWillUnmount()}catch(ht){W(a,s,ht)}}break;case 5:Lj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){gk(et);continue}}st!==null?(st.return=nt,V=st):gk(et)}_=_.sibling}e:for(_=null,et=e;;){if(et.tag===5){if(_===null){_=et;try{o=et.stateNode,b?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=et.stateNode,h=et.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null,g.style.display=rb("display",d))}catch(ht){W(e,e.return,ht)}}}else if(et.tag===6){if(_===null)try{et.stateNode.nodeValue=b?"":et.memoizedProps}catch(ht){W(e,e.return,ht)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===e)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===e)break e;for(;et.sibling===null;){if(et.return===null||et.return===e)break e;_===et&&(_=null),et=et.return}_===et&&(_=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:ck(i,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(i,e),ek(e)}}function ek(e){var i=e.flags;if(i&2){try{e:{for(var s=e.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(e);Wj(e,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,g=Uj(e);Vj(e,g,d);break;default:throw Error(p(161))}}catch(h){W(e,e.return,h)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function hk(e,i,s){V=e,ik(e)}function ik(e,i,s){for(var a=(e.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Jj;if(!d){var g=o.alternate,h=g!==null&&g.memoizedState!==null||U;g=Jj;var b=U;if(Jj=d,(U=h)&&!b)for(V=o;V!==null;)d=V,h=d.child,d.tag===22&&d.memoizedState!==null?jk(o):h!==null?(h.return=d,V=h):jk(o);for(;c!==null;)V=c,ik(c),c=c.sibling;V=o,Jj=g,U=b}kk(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):kk(e)}}function kk(e){for(;V!==null;){var i=V;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U||Qj(5,i);break;case 1:var a=i.stateNode;if(i.flags&4&&!U)if(s===null)a.componentDidMount();else{var o=i.elementType===i.type?s.memoizedProps:Ci(i.type,s.memoizedProps);a.componentDidUpdate(o,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=i.updateQueue;c!==null&&sh(i,c,a);break;case 3:var d=i.updateQueue;if(d!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}sh(i,d,s)}break;case 5:var g=i.stateNode;if(s===null&&i.flags&4){s=g;var h=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&s.focus();break;case"img":h.src&&(s.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var b=i.alternate;if(b!==null){var _=b.memoizedState;if(_!==null){var et=_.dehydrated;et!==null&&bd(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||i.flags&512&&Rj(i)}catch(nt){W(i,i.return,nt)}}if(i===e){V=null;break}if(s=i.sibling,s!==null){s.return=i.return,V=s;break}V=i.return}}function gk(e){for(;V!==null;){var i=V;if(i===e){V=null;break}var s=i.sibling;if(s!==null){s.return=i.return,V=s;break}V=i.return}}function jk(e){for(;V!==null;){var i=V;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Qj(4,i)}catch(h){W(i,s,h)}break;case 1:var a=i.stateNode;if(typeof a.componentDidMount=="function"){var o=i.return;try{a.componentDidMount()}catch(h){W(i,o,h)}}var c=i.return;try{Rj(i)}catch(h){W(i,c,h)}break;case 5:var d=i.return;try{Rj(i)}catch(h){W(i,d,h)}}}catch(h){W(i,i.return,h)}if(i===e){V=null;break}var g=i.sibling;if(g!==null){g.return=i.return,V=g;break}V=i.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,i,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,s,a),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(e,Z)),Dk(e,a),s===1&&K===0&&!(i.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,i){var s=e.callbackNode;wc(e,i);var a=uc(e,e===Q?Z:0);if(a===0)s!==null&&bc(s),e.callbackNode=null,e.callbackPriority=0;else if(i=a&-a,e.callbackPriority!==i){if(s!=null&&bc(s),i===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,e))}e.callbackPriority=i,e.callbackNode=s}}function Gk(e,i){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=e.callbackNode;if(Hk()&&e.callbackNode!==s)return null;var a=uc(e,e===Q?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||i)i=Ik(e,a);else{i=a;var o=K;K|=2;var c=Jk();(Q!==e||Z!==i)&&(uk=null,Gj=B()+500,Kk(e,i));do try{Lk();break}catch(g){Mk(e,g)}while(!0);$g(),mk.current=c,K=o,Y!==null?i=0:(Q=null,Z=0,i=T)}if(i!==0){if(i===2&&(o=xc(e),o!==0&&(a=o,i=Nk(e,o))),i===1)throw s=pk,Kk(e,0),Ck(e,a),Dk(e,B()),s;if(i===6)Ck(e,a);else{if(o=e.current.alternate,!(a&30)&&!Ok(o)&&(i=Ik(e,a),i===2&&(c=xc(e),c!==0&&(a=c,i=Nk(e,c))),i===1))throw s=pk,Kk(e,0),Ck(e,a),Dk(e,B()),s;switch(e.finishedWork=o,e.finishedLanes=a,i){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(i=fk+500-B(),10<i)){if(uc(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){R(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),i);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(i=e.eventTimes,o=-1;0<a;){var d=31-oc(a);c=1<<d,d=i[d],d>o&&(o=d),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===s?Gk.bind(null,e):null}function Nk(e,i){var s=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,i).flags|=256),e=Ik(e,i),e!==2&&(i=tk,tk=s,i!==null&&Fj(i)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var i=e;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var o=s[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ck(e,i){for(i&=~rk,i&=~qk,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var s=31-oc(i),a=1<<s;e[s]=-1,i&=~a}}function Ek(e){if(K&6)throw Error(p(327));Hk();var i=uc(e,0);if(!(i&1))return Dk(e,B()),null;var s=Ik(e,i);if(e.tag!==0&&s===2){var a=xc(e);a!==0&&(i=a,s=Nk(e,a))}if(s===1)throw s=pk,Kk(e,0),Ck(e,i),Dk(e,B()),s;if(s===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,i){var s=K;K|=1;try{return e(i)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var i=K;K|=1;var s=ok.transition,a=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=a,ok.transition=s,K=i,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,i){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=i,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(i=0;i<fh.length;i++)if(s=fh[i],a=s.interleaved,a!==null){s.interleaved=null;var o=a.next,c=s.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}s.pending=a}fh=null}return e}function Mk(e,i){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=i,Y=null;break}e:{var c=e,d=s.return,g=s,h=i;if(i=Z,g.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var b=h,_=g,et=_.tag;if(!(_.mode&1)&&(et===0||et===11||et===15)){var nt=_.alternate;nt?(_.updateQueue=nt.updateQueue,_.memoizedState=nt.memoizedState,_.lanes=nt.lanes):(_.updateQueue=null,_.memoizedState=null)}var st=Ui(d);if(st!==null){st.flags&=-257,Vi(st,d,g,c,i),st.mode&1&&Si(c,b,i),i=st,h=b;var ot=i.updateQueue;if(ot===null){var ht=new Set;ht.add(h),i.updateQueue=ht}else ot.add(h);break e}else{if(!(i&1)){Si(c,b,i),tj();break e}h=Error(p(426))}}else if(I&&g.mode&1){var dt=Ui(d);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),Vi(dt,d,g,c,i),Jg(Ji(h,g));break e}}c=h=Ji(h,g),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,i&=-i,c.lanes|=i;var $=Ni(c,h,i);ph(c,$);break e;case 1:g=h;var _e=c.type,ct=c.stateNode;if(!(c.flags&128)&&(typeof _e.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&(Ri===null||!Ri.has(ct)))){c.flags|=65536,i&=-i,c.lanes|=i;var pt=Qi(c,g,i);ph(c,pt);break e}}c=c.return}while(c!==null)}Sk(s)}catch(tt){i=tt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,i){var s=K;K|=2;var a=Jk();(Q!==e||Z!==i)&&(uk=null,Kk(e,i));do try{Tk();break}catch(o){Mk(e,o)}while(!0);if($g(),K=s,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var i=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,i===null?Sk(e):Y=i,nk.current=null}function Sk(e){var i=e;do{var s=i.alternate;if(e=i.return,i.flags&32768){if(s=Ij(s,i),s!==null){s.flags&=32767,Y=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,i,fj),s!==null){Y=s;return}if(i=i.sibling,i!==null){Y=i;return}Y=i=e}while(i!==null);T===0&&(T=5)}function Pk(e,i,s){var a=C,o=ok.transition;try{ok.transition=null,C=1,Wk(e,i,s,a)}finally{ok.transition=o,C=a}return null}function Wk(e,i,s,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=e.finishedWork;var o=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var g=K;K|=4,nk.current=null,Oj(e,s),dk(s,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=s,hk(s),dc(),K=g,C=d,ok.transition=c}else e.current=s;if(vk&&(vk=!1,wk=e,xk=o),c=e.pendingLanes,c===0&&(Ri=null),mc(s.stateNode),Dk(e,B()),i!==null)for(a=e.onRecoverableError,s=0;s<i.length;s++)o=i[s],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),i=ok.transition,s=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var g=c.deletions;if(g!==null){for(var h=0;h<g.length;h++){var b=g[h];for(V=b;V!==null;){var _=V;switch(_.tag){case 0:case 11:case 15:Pj(8,_,c)}var et=_.child;if(et!==null)et.return=_,V=et;else for(;V!==null;){_=V;var nt=_.sibling,st=_.return;if(Sj(_),_===b){V=null;break}if(nt!==null){nt.return=st,V=nt;break}V=st}}}var ot=c.alternate;if(ot!==null){var ht=ot.child;if(ht!==null){ot.child=null;do{var dt=ht.sibling;ht.sibling=null,ht=dt}while(ht!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var $=c.sibling;if($!==null){$.return=c.return,V=$;break e}V=c.return}}var _e=e.current;for(V=_e;V!==null;){d=V;var ct=d.child;if(d.subtreeFlags&2064&&ct!==null)ct.return=d,V=ct;else e:for(d=_e;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(tt){W(g,g.return,tt)}if(g===d){V=null;break e}var pt=g.sibling;if(pt!==null){pt.return=g.return,V=pt;break e}V=g.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=s,ok.transition=i}}return!1}function Xk(e,i,s){i=Ji(s,i),i=Ni(e,i,1),e=nh(e,i,1),i=R(),e!==null&&(Ac(e,1,i),Dk(e,i))}function W(e,i,s){if(e.tag===3)Xk(e,e,s);else for(;i!==null;){if(i.tag===3){Xk(i,e,s);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(s,e),e=Qi(i,e,1),i=nh(i,e,1),e=R(),i!==null&&(Ac(i,1,e),Dk(i,e));break}}i=i.return}}function Ti(e,i,s){var a=e.pingCache;a!==null&&a.delete(i),i=R(),e.pingedLanes|=e.suspendedLanes&s,Q===e&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=s),Dk(e,i)}function Yk(e,i){i===0&&(e.mode&1?(i=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):i=1);var s=R();e=ih(e,i),e!==null&&(Ac(e,i,s),Dk(e,s))}function uj(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),Yk(e,s)}function bk(e,i){var s=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(i),Yk(e,s)}var Vk;Vk=function(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&s)&&!(i.flags&128))return dh=!1,yj(e,i,s);dh=!!(e.flags&131072)}else dh=!1,I&&i.flags&1048576&&ug(i,ng,i.index);switch(i.lanes=0,i.tag){case 2:var a=i.type;ij(e,i),e=i.pendingProps;var o=Yf(i,H.current);ch(i,s),o=Nh(null,i,a,e,o,s);var c=Sh();return i.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf(a)?(c=!0,cg(i)):c=!1,i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(i),o.updater=Ei,i.stateNode=o,o._reactInternals=i,Ii(i,a,e,s),i=jj(null,i,a,!0,c,s)):(i.tag=0,I&&c&&vg(i),Xi(null,i,o,s),i=i.child),i;case 16:a=i.elementType;e:{switch(ij(e,i),e=i.pendingProps,o=a._init,a=o(a._payload),i.type=a,o=i.tag=Zk(a),e=Ci(a,e),o){case 0:i=cj(null,i,a,e,s);break e;case 1:i=hj(null,i,a,e,s);break e;case 11:i=Yi(null,i,a,e,s);break e;case 14:i=$i(null,i,a,Ci(a.type,e),s);break e}throw Error(p(306,a,""))}return i;case 0:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Ci(a,o),cj(e,i,a,o,s);case 1:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Ci(a,o),hj(e,i,a,o,s);case 3:e:{if(kj(i),e===null)throw Error(p(387));a=i.pendingProps,c=i.memoizedState,o=c.element,lh(e,i),qh(i,a,null,s);var d=i.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},i.updateQueue.baseState=c,i.memoizedState=c,i.flags&256){o=Ji(Error(p(423)),i),i=lj(e,i,a,s,o);break e}else if(a!==o){o=Ji(Error(p(424)),i),i=lj(e,i,a,s,o);break e}else for(yg=Lf(i.stateNode.containerInfo.firstChild),xg=i,I=!0,zg=null,s=Vg(i,null,a,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===o){i=Zi(e,i,s);break e}Xi(e,i,a,s)}i=i.child}return i;case 5:return Ah(i),e===null&&Eg(i),a=i.type,o=i.pendingProps,c=e!==null?e.memoizedProps:null,d=o.children,Ef(a,o)?d=null:c!==null&&Ef(a,c)&&(i.flags|=32),gj(e,i),Xi(e,i,d,s),i.child;case 6:return e===null&&Eg(i),null;case 13:return oj(e,i,s);case 4:return yh(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Ug(i,null,a,s):Xi(e,i,a,s),i.child;case 11:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Ci(a,o),Yi(e,i,a,o,s);case 7:return Xi(e,i,i.pendingProps,s),i.child;case 8:return Xi(e,i,i.pendingProps.children,s),i.child;case 12:return Xi(e,i,i.pendingProps.children,s),i.child;case 10:e:{if(a=i.type._context,o=i.pendingProps,c=i.memoizedProps,d=o.value,G(Wg,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf.current){i=Zi(e,i,s);break e}}else for(c=i.child,c!==null&&(c.return=i);c!==null;){var g=c.dependencies;if(g!==null){d=c.child;for(var h=g.firstContext;h!==null;){if(h.context===a){if(c.tag===1){h=mh(-1,s&-s),h.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var _=b.pending;_===null?h.next=h:(h.next=_.next,_.next=h),b.pending=h}}c.lanes|=s,h=c.alternate,h!==null&&(h.lanes|=s),bh(c.return,s,i),g.lanes|=s;break}h=h.next}}else if(c.tag===10)d=c.type===i.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,g=d.alternate,g!==null&&(g.lanes|=s),bh(d,s,i),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===i){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(e,i,o.children,s),i=i.child}return i;case 9:return o=i.type,a=i.pendingProps.children,ch(i,s),o=eh(o),a=a(o),i.flags|=1,Xi(e,i,a,s),i.child;case 14:return a=i.type,o=Ci(a,i.pendingProps),o=Ci(a.type,o),$i(e,i,a,o,s);case 15:return bj(e,i,i.type,i.pendingProps,s);case 17:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Ci(a,o),ij(e,i),i.tag=1,Zf(a)?(e=!0,cg(i)):e=!1,ch(i,s),Gi(i,a,o),Ii(i,a,o,s),jj(null,i,a,!0,e,s);case 19:return xj(e,i,s);case 22:return dj(e,i,s)}throw Error(p(156,i.tag))};function Fk(e,i){return ac(e,i)}function $k(e,i,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,i,s,a){return new $k(e,i,s,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,i){var s=e.alternate;return s===null?(s=Bg(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Rg(e,i,s,a,o,c){var d=2;if(a=e,typeof e=="function")aj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Tg(s.children,o,c,i);case za:d=8,o|=8;break;case Aa:return e=Bg(12,s,i,o|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,s,i,o),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,s,i,o),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(s,o,c,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return i=Bg(d,s,i,o),i.elementType=e,i.type=a,i.lanes=c,i}function Tg(e,i,s,a){return e=Bg(7,e,a,i),e.lanes=s,e}function pj(e,i,s,a){return e=Bg(22,e,a,i),e.elementType=Ia,e.lanes=s,e.stateNode={isHidden:!1},e}function Qg(e,i,s){return e=Bg(6,e,null,i),e.lanes=s,e}function Sg(e,i,s){return i=Bg(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function al(e,i,s,a,o){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(e,i,s,a,o,c,d,g,h){return e=new al(e,i,s,g,h),i===1?(i=1,c===!0&&(i|=8)):i=0,c=Bg(3,null,null,i),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,i,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:i,implementation:s}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p(171))}if(e.tag===1){var s=e.type;if(Zf(s))return bg(e,s,i)}return i}function el(e,i,s,a,o,c,d,g,h){return e=bl(s,a,!0,e,o,c,d,g,h),e.context=dl(null),s=e.current,a=R(),o=yi(s),c=mh(a,o),c.callback=i??null,nh(s,c,o),e.current.lanes=o,Ac(e,o,a),Dk(e,a),e}function fl(e,i,s,a){var o=i.current,c=R(),d=yi(o);return s=dl(s),i.context===null?i.context=s:i.pendingContext=s,i=mh(c,d),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=nh(o,i,d),e!==null&&(gi(e,o,d,c),oh(e,o,d)),d}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function il(e,i){hl(e,i),(e=e.alternate)&&hl(e,i)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(p(409));fl(e,i,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Rk(function(){fl(null,e,null,null)}),i[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hc();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Qc.length&&i!==0&&i<Qc[s].priority;s++);Qc.splice(s,0,e),s===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,i,s,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var b=gl(d);c.call(b)}}var d=el(i,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Rk(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var g=a;a=function(){var b=gl(h);g.call(b)}}var h=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(i,h,s,a)}),h}function rl(e,i,s,a,o){var c=s._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var g=o;o=function(){var h=gl(d);g.call(h)}}fl(i,d,e,o)}else d=ql(s,i,e,o,a);return gl(d)}Ec=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var s=tc(i.pendingLanes);s!==0&&(Cc(i,s|1),Dk(i,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var o=R();gi(a,e,1,o)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var i=ih(e,134217728);if(i!==null){var s=R();gi(i,e,134217728,s)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var i=yi(e),s=ih(e,i);if(s!==null){var a=R();gi(s,e,i,a)}il(e,i)}};Hc=function(){return C};Ic=function(e,i){var s=C;try{return C=e,i()}finally{C=s}};yb=function(e,i,s){switch(i){case"input":if(bb(e,s),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var a=s[i];if(a!==e&&a.form===e.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(e,s);break;case"select":i=s.value,i!=null&&fb(e,!!s.multiple,i,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(i))throw Error(p(200));return cl(e,i,null,s)};reactDom_production_min.createRoot=function(e,i){if(!nl(e))throw Error(p(299));var s=!1,a="",o=kl;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),i=bl(e,1,!1,null,null,s,!1,a,o),e[uf]=i.current,sf(e.nodeType===8?e.parentNode:e),new ll(i)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(i),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,i,s){if(!ol(i))throw Error(p(200));return rl(null,e,i,!0,s)};reactDom_production_min.hydrateRoot=function(e,i,s){if(!nl(e))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,o=!1,c="",d=kl;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),i=el(i,null,e,1,s??null,o,!1,c,d),e[uf]=i.current,sf(e),a)for(e=0;e<a.length;e++)s=a[e],o=s._getVersion,o=o(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,o]:i.mutableSourceEagerHydrationData.push(s,o);return new ml(i)};reactDom_production_min.render=function(e,i,s){if(!ol(i))throw Error(p(200));return rl(null,e,i,!1,s)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,i,s,a){if(!ol(s))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,i,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$1.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function i(a,o){let{pathname:c,search:d,hash:g}=a.location;return createLocation("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(i,s,null,e)}function invariant(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function warning$2(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,i){return{usr:e.state,key:e.key,idx:i}}function createLocation(e,i,s,a){return s===void 0&&(s=null),_extends$1({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:s,key:i&&i.key||a||createKey()})}function createPath(e){let{pathname:i="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(i+=a.charAt(0)==="#"?a:"#"+a),i}function parsePath(e){let i={};if(e){let s=e.indexOf("#");s>=0&&(i.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(i.search=e.substr(a),e=e.substr(0,a)),e&&(i.pathname=e)}return i}function getUrlBasedHistory(e,i,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,g=Action.Pop,h=null,b=_();b==null&&(b=0,d.replaceState(_extends$1({},d.state,{idx:b}),""));function _(){return(d.state||{idx:null}).idx}function et(){g=Action.Pop;let dt=_(),$=dt==null?null:dt-b;b=dt,h&&h({action:g,location:ht.location,delta:$})}function nt(dt,$){g=Action.Push;let _e=createLocation(ht.location,dt,$);b=_()+1;let ct=getHistoryState(_e,b),pt=ht.createHref(_e);try{d.pushState(ct,"",pt)}catch(tt){if(tt instanceof DOMException&&tt.name==="DataCloneError")throw tt;o.location.assign(pt)}c&&h&&h({action:g,location:ht.location,delta:1})}function st(dt,$){g=Action.Replace;let _e=createLocation(ht.location,dt,$);b=_();let ct=getHistoryState(_e,b),pt=ht.createHref(_e);d.replaceState(ct,"",pt),c&&h&&h({action:g,location:ht.location,delta:0})}function ot(dt){let $=o.location.origin!=="null"?o.location.origin:o.location.href,_e=typeof dt=="string"?dt:createPath(dt);return _e=_e.replace(/ $/,"%20"),invariant($,"No window.location.(origin|href) available to create URL for href: "+_e),new URL(_e,$)}let ht={get action(){return g},get location(){return e(o,d)},listen(dt){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,et),h=dt,()=>{o.removeEventListener(PopStateEventType,et),h=null}},createHref(dt){return i(o,dt)},createURL:ot,encodeLocation(dt){let $=ot(dt);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:nt,replace:st,go(dt){return d.go(dt)}};return ht}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,i,s){return s===void 0&&(s="/"),matchRoutesImpl(e,i,s,!1)}function matchRoutesImpl(e,i,s,a){let o=typeof i=="string"?parsePath(i):i,c=stripBasename(o.pathname||"/",s);if(c==null)return null;let d=flattenRoutes(e);rankRouteBranches(d);let g=null;for(let h=0;g==null&&h<d.length;++h){let b=decodePath(c);g=matchRouteBranch(d[h],b,a)}return g}function flattenRoutes(e,i,s,a){i===void 0&&(i=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(c,d,g)=>{let h={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let b=joinPaths([a,h.relativePath]),_=s.concat(h);c.children&&c.children.length>0&&(invariant(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),flattenRoutes(c.children,i,_,b)),!(c.path==null&&!c.index)&&i.push({path:b,score:computeScore(b,c.index),routesMeta:_})};return e.forEach((c,d)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))o(c,d);else for(let h of explodeOptionalSegments(c.path))o(c,d,h)}),i}function explodeOptionalSegments(e){let i=e.split("/");if(i.length===0)return[];let[s,...a]=i,o=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=explodeOptionalSegments(a.join("/")),g=[];return g.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&g.push(...d),g.map(h=>e.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(e){e.sort((i,s)=>i.score!==s.score?s.score-i.score:compareIndexes(i.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,i){let s=e.split("/"),a=s.length;return s.some(isSplat)&&(a+=splatPenalty),i&&(a+=indexRouteValue),s.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,i){return e.length===i.length&&e.slice(0,-1).every((a,o)=>a===i[o])?e[e.length-1]-i[i.length-1]:0}function matchRouteBranch(e,i,s){let{routesMeta:a}=e,o={},c="/",d=[];for(let g=0;g<a.length;++g){let h=a[g],b=g===a.length-1,_=c==="/"?i:i.slice(c.length)||"/",et=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:b},_),nt=h.route;if(!et&&b&&s&&!a[a.length-1].route.index&&(et=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},_)),!et)return null;Object.assign(o,et.params),d.push({params:o,pathname:joinPaths([c,et.pathname]),pathnameBase:normalizePathname(joinPaths([c,et.pathnameBase])),route:nt}),et.pathnameBase!=="/"&&(c=joinPaths([c,et.pathnameBase]))}return d}function matchPath(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=compilePath(e.path,e.caseSensitive,e.end),o=i.match(s);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((b,_,et)=>{let{paramName:nt,isOptional:st}=_;if(nt==="*"){let ht=g[et]||"";d=c.slice(0,c.length-ht.length).replace(/(.)\/+$/,"$1")}const ot=g[et];return st&&!ot?b[nt]=void 0:b[nt]=(ot||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:d,pattern:e}}function compilePath(e,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),warning$2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,h)=>(a.push({paramName:g,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,i?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning$2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function stripBasename(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function resolvePath(e,i){i===void 0&&(i="/");let{pathname:s,search:a="",hash:o=""}=typeof e=="string"?parsePath(e):e;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,i):i,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(e,i){let s=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(e,i,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(e,i){let s=getPathContributingMatches(e);return i?s.map((a,o)=>o===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function resolveTo(e,i,s,a){a===void 0&&(a=!1);let o;typeof e=="string"?o=parsePath(e):(o=_extends$1({},e),invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=s;else{let et=i.length-1;if(!a&&d.startsWith("..")){let nt=d.split("/");for(;nt[0]==="..";)nt.shift(),et-=1;o.pathname=nt.join("/")}g=et>=0?i[et]:"/"}let h=resolvePath(o,g),b=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(b||_)&&(h.pathname+="/"),h}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let e=reactExports.useContext(DataRouterContext),{basename:i,future:s,navigator:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(o,s.v7_relativeSplatPath)),g=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{g.current=!0}),reactExports.useCallback(function(b,_){if(_===void 0&&(_={}),!g.current)return;if(typeof b=="number"){a.go(b);return}let et=resolveTo(b,JSON.parse(d),c,_.relative==="path");e==null&&i!=="/"&&(et.pathname=et.pathname==="/"?i:joinPaths([i,et.pathname])),(_.replace?a.replace:a.push)(et,_.state,_)},[i,a,d,c,e])}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),i=e[e.length-1];return i?i.params:{}}function useRoutes(e,i){return useRoutesImpl(e,i)}function useRoutesImpl(e,i,s,a){useInRouterContext()||invariant(!1);let{navigator:o,static:c}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),g=d[d.length-1],h=g?g.params:{};g&&g.pathname;let b=g?g.pathnameBase:"/";g&&g.route;let _=useLocation(),et;if(i){var nt;let $=typeof i=="string"?parsePath(i):i;b==="/"||(nt=$.pathname)!=null&&nt.startsWith(b)||invariant(!1),et=$}else et=_;let st=et.pathname||"/",ot=st;if(b!=="/"){let $=b.replace(/^\//,"").split("/");ot="/"+st.replace(/^\//,"").split("/").slice($.length).join("/")}let ht=!c&&s&&s.matches&&s.matches.length>0?s.matches:matchRoutes(e,{pathname:ot}),dt=_renderMatches(ht&&ht.map($=>Object.assign({},$,{params:Object.assign({},h,$.params),pathname:joinPaths([b,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:joinPaths([b,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),d,s,a);return i&&dt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},et),navigationType:Action.Pop}},dt):dt}function DefaultErrorComponent(){let e=useRouteError(),i=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),s?reactExports.createElement("pre",{style:o},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:i,match:s,children:a}=e,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:i},a)}function _renderMatches(e,i,s,a){var o;if(i===void 0&&(i=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var c;if(!s)return null;if(s.errors)e=s.matches;else if((c=a)!=null&&c.v7_partialHydration&&i.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let d=e,g=(o=s)==null?void 0:o.errors;if(g!=null){let _=d.findIndex(et=>et.route.id&&(g==null?void 0:g[et.route.id])!==void 0);_>=0||invariant(!1),d=d.slice(0,Math.min(d.length,_+1))}let h=!1,b=-1;if(s&&a&&a.v7_partialHydration)for(let _=0;_<d.length;_++){let et=d[_];if((et.route.HydrateFallback||et.route.hydrateFallbackElement)&&(b=_),et.route.id){let{loaderData:nt,errors:st}=s,ot=et.route.loader&&nt[et.route.id]===void 0&&(!st||st[et.route.id]===void 0);if(et.route.lazy||ot){h=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}return d.reduceRight((_,et,nt)=>{let st,ot=!1,ht=null,dt=null;s&&(st=g&&et.route.id?g[et.route.id]:void 0,ht=et.route.errorElement||defaultErrorElement,h&&(b<0&&nt===0?(ot=!0,dt=null):b===nt&&(ot=!0,dt=et.route.hydrateFallbackElement||null)));let $=i.concat(d.slice(0,nt+1)),_e=()=>{let ct;return st?ct=ht:ot?ct=dt:et.route.Component?ct=reactExports.createElement(et.route.Component,null):et.route.element?ct=et.route.element:ct=_,reactExports.createElement(RenderedRoute,{match:et,routeContext:{outlet:_,matches:$,isDataRoute:s!=null},children:ct})};return s&&(et.route.ErrorBoundary||et.route.errorElement||nt===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:ht,error:st,children:_e(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):_e()},null)}var DataRouterHook$1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterContext(e){let i=reactExports.useContext(DataRouterContext);return i||invariant(!1),i}function useDataRouterState(e){let i=reactExports.useContext(DataRouterStateContext);return i||invariant(!1),i}function useRouteContext(e){let i=reactExports.useContext(RouteContext);return i||invariant(!1),i}function useCurrentRouteId(e){let i=useRouteContext(),s=i.matches[i.matches.length-1];return s.route.id||invariant(!1),s.route.id}function useRouteError(){var e;let i=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i!==void 0?i:(e=s.errors)==null?void 0:e[a]}function useNavigateStable(){let{router:e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),i=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{s.current=!0}),reactExports.useCallback(function(o,c){c===void 0&&(c={}),s.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,_extends({fromRouteId:i},c)))},[e,i])}function logV6DeprecationWarnings(e,i){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Navigate(e){let{to:i,replace:s,state:a,relative:o}=e;useInRouterContext()||invariant(!1);let{future:c,static:d}=reactExports.useContext(NavigationContext),{matches:g}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),b=useNavigate(),_=resolveTo(i,getResolveToMatches(g,c.v7_relativeSplatPath),h,o==="path"),et=JSON.stringify(_);return reactExports.useEffect(()=>b(JSON.parse(et),{replace:s,state:a,relative:o}),[b,et,o,s,a]),null}function Route(e){invariant(!1)}function Router(e){let{basename:i="/",children:s=null,location:a,navigationType:o=Action.Pop,navigator:c,static:d=!1,future:g}=e;useInRouterContext()&&invariant(!1);let h=i.replace(/^\/*/,"/"),b=reactExports.useMemo(()=>({basename:h,navigator:c,static:d,future:_extends({v7_relativeSplatPath:!1},g)}),[h,g,c,d]);typeof a=="string"&&(a=parsePath(a));let{pathname:_="/",search:et="",hash:nt="",state:st=null,key:ot="default"}=a,ht=reactExports.useMemo(()=>{let dt=stripBasename(_,h);return dt==null?null:{location:{pathname:dt,search:et,hash:nt,state:st,key:ot},navigationType:o}},[h,_,et,nt,st,ot,o]);return ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:b},reactExports.createElement(LocationContext.Provider,{children:s,value:ht}))}function Routes(e){let{children:i,location:s}=e;return useRoutes(createRoutesFromChildren(i),s)}new Promise(()=>{});function createRoutesFromChildren(e,i){i===void 0&&(i=[]);let s=[];return reactExports.Children.forEach(e,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...i,o];if(a.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(a.props.children,c));return}a.type!==Route&&invariant(!1),!a.props.index||!a.props.children||invariant(!1);let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=createRoutesFromChildren(a.props.children,c)),s.push(d)}),s}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(e){let{basename:i,children:s,future:a,window:o}=e,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:o,v5Compat:!0}));let d=c.current,[g,h]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:b}=a||{},_=reactExports.useCallback(et=>{b&&startTransitionImpl?startTransitionImpl(()=>h(et)):h(et)},[h,b]);return reactExports.useLayoutEffect(()=>d.listen(_),[d,_]),reactExports.useEffect(()=>logV6DeprecationWarnings(a),[a]),reactExports.createElement(Router,{basename:i,children:s,location:g.location,navigationType:g.action,navigator:d,future:a})}var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,i)=>{const s=reactExports.forwardRef(({color:a="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:g="",children:h,...b},_)=>reactExports.createElement("svg",{ref:_,...defaultAttributes,width:o,height:o,stroke:a,strokeWidth:d?Number(c)*24/Number(o):c,className:["lucide",`lucide-${toKebabCase(e)}`,g].join(" "),...b},[...i.map(([et,nt])=>reactExports.createElement(et,nt)),...Array.isArray(h)?h:[h]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lightbulb=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Link=createLucideIcon("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageSquare=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(i,s,a){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(s.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const b=h.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const et=document.createElement("link");if(et.rel=b?"stylesheet":scriptRel,b||(et.as="script"),et.crossOrigin="",et.href=h,g&&et.setAttribute("nonce",g),document.head.appendChild(et),b)return new Promise((nt,st)=>{et.addEventListener("load",nt),et.addEventListener("error",()=>st(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&c(g.reason);return i().catch(c)})},resolveFetch$3=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...s)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...s)):i=fetch,(...s)=>i(...s)};class FunctionsError extends Error{constructor(i,s="FunctionsError",a){super(i),this.name=s,this.context=a}}class FunctionsFetchError extends FunctionsError{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class FunctionsRelayError extends FunctionsError{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class FunctionsHttpError extends FunctionsError{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var FunctionRegion;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$8=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};class FunctionsClient{constructor(i,{headers:s={},customFetch:a,region:o=FunctionRegion.Any}={}){this.url=i,this.headers=s,this.region=o,this.fetch=resolveFetch$3(a)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i,s={}){var a;return __awaiter$8(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=s;let g={},{region:h}=s;h||(h=this.region),h&&h!=="any"&&(g["x-region"]=h);let b;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",b=d):typeof d=="string"?(g["Content-Type"]="text/plain",b=d):typeof FormData<"u"&&d instanceof FormData?b=d:(g["Content-Type"]="application/json",b=JSON.stringify(d)));const _=yield this.fetch(`${this.url}/${i}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:b}).catch(ot=>{throw new FunctionsFetchError(ot)}),et=_.headers.get("x-relay-error");if(et&&et==="true")throw new FunctionsRelayError(_);if(!_.ok)throw new FunctionsHttpError(_);let nt=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),st;return nt==="application/json"?st=yield _.json():nt==="application/octet-stream"?st=yield _.blob():nt==="text/event-stream"?st=_:nt==="multipart/form-data"?st=yield _.formData():st=yield _.text(),{data:st,error:null}}catch(o){return{data:null,error:o}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=Object.assign({},this.headers),this.headers[i]=s,this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,g,h;let b=null,_=null,et=null,nt=c.status,st=c.statusText;if(c.ok){if(this.method!=="HEAD"){const $=await c.text();$===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=$:_=JSON.parse($))}const ht=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),dt=(g=c.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");ht&&dt&&dt.length>1&&(et=parseInt(dt[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,et=null,nt=406,st="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const ht=await c.text();try{b=JSON.parse(ht),Array.isArray(b)&&c.status===404&&(_=[],b=null,nt=200,st="OK")}catch{c.status===404&&ht===""?(nt=204,st="No Content"):b={message:ht}}if(b&&this.isMaybeSingle&&(!((h=b==null?void 0:b.details)===null||h===void 0)&&h.includes("0 rows"))&&(b=null,nt=200,st="OK"),b&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(b)}return{error:b,data:_,count:et,status:nt,statusText:st}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,g,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",g=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${g?`${g},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var g;const h=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${b}"; options=${h};`,d==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const a=Array.from(new Set(s)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:a,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(i,s,a){return this.url.searchParams.append(i,`not.${s}.${a}`),this}or(i,{foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,s,a){return this.url.searchParams.append(i,`${s}.${a}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=s,this.schema=a,this.fetch=o}select(i,{head:s=!1,count:a}={}){const o=s?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",d),a&&(this.headers.Prefer=`count=${a}`),new PostgrestFilterBuilder_1$2.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:a=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const d=i.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",g.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){const d="POST",g=[`resolution=${a?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&g.push(this.headers.Prefer),o&&g.push(`count=${o}`),c||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(i)){const h=i.reduce((b,_)=>b.concat(Object.keys(_)),[]);if(h.length>0){const b=[...new Set(h)].map(_=>`"${_}"`);this.url.searchParams.set("columns",b.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),this.headers.Prefer=o.join(","),new PostgrestFilterBuilder_1$2.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",a=[];return i&&a.push(`count=${i}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new PostgrestFilterBuilder_1$2.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var constants={},version$4={};Object.defineProperty(version$4,"__esModule",{value:!0});version$4.version=void 0;version$4.version="0.0.0-automated";Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_HEADERS=void 0;const version_1=version$4;constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${version_1.version}`};var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2),constants_1=constants;let PostgrestClient$1=class ts{constructor(i,{headers:s={},schema:a,fetch:o}={}){this.url=i,this.headers=Object.assign(Object.assign({},constants_1.DEFAULT_HEADERS),s),this.schemaName=a,this.fetch=o}from(i){const s=new URL(`${this.url}/${i}`);return new PostgrestQueryBuilder_1$1.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new ts(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:a=!1,get:o=!1,count:c}={}){let d;const g=new URL(`${this.url}/rpc/${i}`);let h;a||o?(d=a?"HEAD":"GET",Object.entries(s).filter(([_,et])=>et!==void 0).map(([_,et])=>[_,Array.isArray(et)?`{${et.join(",")}}`:`${et}`]).forEach(([_,et])=>{g.searchParams.append(_,et)})):(d="POST",h=s);const b=Object.assign({},this.headers);return c&&(b.Prefer=`count=${c}`),new PostgrestFilterBuilder_1$1.default({method:d,url:g,headers:b,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default$1=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default$1,version$3="2.11.2",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$3}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(e){e.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(i,s){return i.constructor===ArrayBuffer?s(this._binaryDecode(i)):s(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){const s=new DataView(i),a=new TextDecoder;return this._decodeBroadcast(i,s,a)}_decodeBroadcast(i,s,a){const o=s.getUint8(1),c=s.getUint8(2);let d=this.HEADER_LENGTH+2;const g=a.decode(i.slice(d,d+o));d=d+o;const h=a.decode(i.slice(d,d+c));d=d+c;const b=JSON.parse(a.decode(i.slice(d,i.byteLength)));return{ref:null,topic:g,event:h,payload:b}}}class Timer{constructor(i,s){this.callback=i,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,i,s={})=>{var a;const o=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(i).reduce((c,d)=>(c[d]=convertColumn(d,e,i,o),c),{})},convertColumn=(e,i,s,a)=>{const o=i.find(g=>g.name===e),c=o==null?void 0:o.type,d=s[e];return c&&!a.includes(c)?convertCell(c,d):noop$2(d)},convertCell=(e,i)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return toArray(i,s)}switch(e){case PostgresTypes.bool:return toBoolean(i);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(i);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(i);case PostgresTypes.timestamp:return toTimestampString(i);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$2(i);default:return noop$2(i)}},noop$2=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=e=>{if(typeof e=="string"){const i=parseFloat(e);if(!Number.isNaN(i))return i}return e},toJson=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(i){return console.log(`JSON parse error: ${i}`),e}return e},toArray=(e,i)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let c;const d=e.slice(1,s);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(g=>convertCell(i,g))}return e},toTimestampString=e=>typeof e=="string"?e.replace(" ","T"):e,httpEndpointURL=e=>{let i=e;return i=i.replace(/^ws/i,"http"),i=i.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),i.replace(/\/+$/,"")};class Push{constructor(i,s,a={},o=DEFAULT_TIMEOUT){this.channel=i,this.event=s,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,s){var a;return this._hasReceived(i)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:i,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:s}){this.recHooks.filter(a=>a.status===i).forEach(a=>a.callback(s))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(i,s){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:d,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,o,c,d),this.pendingDiffs.forEach(h=>{this.state=RealtimePresence.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],g()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=RealtimePresence.syncDiff(this.state,o,c,d),g())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,s,a,o){const c=this.cloneDeep(i),d=this.transformState(s),g={},h={};return this.map(c,(b,_)=>{d[b]||(h[b]=_)}),this.map(d,(b,_)=>{const et=c[b];if(et){const nt=_.map(dt=>dt.presence_ref),st=et.map(dt=>dt.presence_ref),ot=_.filter(dt=>st.indexOf(dt.presence_ref)<0),ht=et.filter(dt=>nt.indexOf(dt.presence_ref)<0);ot.length>0&&(g[b]=ot),ht.length>0&&(h[b]=ht)}else g[b]=_}),this.syncDiff(c,{joins:g,leaves:h},a,o)}static syncDiff(i,s,a,o){const{joins:c,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(g,h)=>{var b;const _=(b=i[g])!==null&&b!==void 0?b:[];if(i[g]=this.cloneDeep(h),_.length>0){const et=i[g].map(st=>st.presence_ref),nt=_.filter(st=>et.indexOf(st.presence_ref)<0);i[g].unshift(...nt)}a(g,_,h)}),this.map(d,(g,h)=>{let b=i[g];if(!b)return;const _=h.map(et=>et.presence_ref);b=b.filter(et=>_.indexOf(et.presence_ref)<0),i[g]=b,o(g,b,h),b.length===0&&delete i[g]}),i}static map(i,s){return Object.getOwnPropertyNames(i).map(a=>s(a,i[a]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((s,a)=>{const o=i[a];return"metas"in o?s[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=o,s},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(i,s={config:{}},a){this.topic=i,this.params=s,this.socket=a,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(i,s=this.timeout){var a,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:d,private:g}}=this.params;this._onError(_=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,_)),this._onClose(()=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CLOSED));const h={},b={broadcast:c,presence:d,postgres_changes:(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(_=>_.filter))!==null&&o!==void 0?o:[],private:g};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:b},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var et;if(this.socket.setAuth(),_===void 0){i==null||i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const nt=this.bindings.postgres_changes,st=(et=nt==null?void 0:nt.length)!==null&&et!==void 0?et:0,ot=[];for(let ht=0;ht<st;ht++){const dt=nt[ht],{filter:{event:$,schema:_e,table:ct,filter:pt}}=dt,tt=_&&_[ht];if(tt&&tt.event===$&&tt.schema===_e&&tt.table===ct&&tt.filter===pt)ot.push(Object.assign(Object.assign({},dt),{id:tt.id}));else{this.unsubscribe(),i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ot,i&&i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",_=>{i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{i==null||i(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,s={}){return await this.send({type:"presence",event:"track",payload:i},s.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,s,a){return this._on(i,s,a)}async send(i,s={}){var a,o;if(!this._canPush()&&i.type==="broadcast"){const{event:c,payload:d}=i,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=b.body)===null||o===void 0?void 0:o.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,g,h;const b=this._push(i.type,i,s.timeout||this.timeout);i.type==="broadcast"&&!(!((h=(g=(d=this.params)===null||d===void 0?void 0:d.config)===null||g===void 0?void 0:g.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=CHANNEL_STATES.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(a=>{const o=new Push(this,CHANNEL_EVENTS.leave,{},i);o.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(i,s,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),d=await this.socket.fetch(i,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(c),d}_push(i,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Push(this,i,s,a);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(i,s,a){return s}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,s,a){var o,c;const d=i.toLocaleLowerCase(),{close:g,error:h,leave:b,join:_}=CHANNEL_EVENTS;if(a&&[g,h,b,_].indexOf(d)>=0&&a!==this._joinRef())return;let nt=this._onMessage(d,s,a);if(s&&!nt)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(st=>{var ot,ht,dt;return((ot=st.filter)===null||ot===void 0?void 0:ot.event)==="*"||((dt=(ht=st.filter)===null||ht===void 0?void 0:ht.event)===null||dt===void 0?void 0:dt.toLocaleLowerCase())===d}).map(st=>st.callback(nt,a)):(c=this.bindings[d])===null||c===void 0||c.filter(st=>{var ot,ht,dt,$,_e,ct;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in st){const pt=st.id,tt=(ot=st.filter)===null||ot===void 0?void 0:ot.event;return pt&&((ht=s.ids)===null||ht===void 0?void 0:ht.includes(pt))&&(tt==="*"||(tt==null?void 0:tt.toLocaleLowerCase())===((dt=s.data)===null||dt===void 0?void 0:dt.type.toLocaleLowerCase()))}else{const pt=(_e=($=st==null?void 0:st.filter)===null||$===void 0?void 0:$.event)===null||_e===void 0?void 0:_e.toLocaleLowerCase();return pt==="*"||pt===((ct=s==null?void 0:s.event)===null||ct===void 0?void 0:ct.toLocaleLowerCase())}else return st.type.toLocaleLowerCase()===d}).map(st=>{if(typeof nt=="object"&&"ids"in nt){const ot=nt.data,{schema:ht,table:dt,commit_timestamp:$,type:_e,errors:ct}=ot;nt=Object.assign(Object.assign({},{schema:ht,table:dt,commit_timestamp:$,eventType:_e,new:{},old:{},errors:ct}),this._getPayloadRecords(ot))}st.callback(nt,a)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,s,a){const o=i.toLocaleLowerCase(),c={type:o,filter:s,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(i,s){const a=i.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&RealtimeChannel.isEqual(o.filter,s))}),this}static isEqual(i,s){if(Object.keys(i).length!==Object.keys(s).length)return!1;for(const a in i)if(i[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(CHANNEL_EVENTS.close,{},i)}_onError(i){this._on(CHANNEL_EVENTS.error,{},s=>i(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const s={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(s.new=convertChangeData(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(s.old=convertChangeData(i.columns,i.old_record)),s}}const noop$1=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u",WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(i,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...g)=>__vitePreload(async()=>{const{default:h}=await Promise.resolve().then(()=>browser);return{default:h}},void 0).then(({default:h})=>h(...g)):d=fetch,(...g)=>d(...g)},this.endPoint=`${i}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(i),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const o=(a=s==null?void 0:s.params)===null||a===void 0?void 0:a.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(c,d)=>d(JSON.stringify(c)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(async()=>{const{default:i}=await import("./browser-nYkvyoba.js").then(s=>s.b);return{default:i}},[]).then(({default:i})=>{this.conn=new i(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(i,s){this.conn&&(this.conn.onclose=function(){},i?this.conn.close(i,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(i){const s=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const i=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),i}log(i,s,a){this.logger(i,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(i,s={config:{}}){const a=new RealtimeChannel(`realtime:${i}`,s,this);return this.channels.push(a),a}push(i){const{topic:s,event:a,payload:o,ref:c}=i,d=()=>{this.encode(i,g=>{var h;(h=this.conn)===null||h===void 0||h.send(g)})};this.log("push",`${s} ${a} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(i=null){let s=i||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let a=null;try{a=JSON.parse(atob(s.split(".")[1]))}catch{}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=s,this.channels.forEach(o=>{s&&o.updateJoinPayload({access_token:s}),o.joinedOnce&&o._isJoined()&&o._push(CHANNEL_EVENTS.access_token,{access_token:s})})}}async sendHeartbeat(){var i;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(i=this.conn)===null||i===void 0||i.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let s=this.channels.find(a=>a.topic===i&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${i}"`),s.unsubscribe())}_remove(i){this.channels=this.channels.filter(s=>s._joinRef()!==i._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_onConnMessage(i){this.decode(i.data,s=>{let{topic:a,event:o,payload:c,ref:d}=s;d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${a} ${o} ${d&&"("+d+")"||""}`,c),this.channels.filter(g=>g._isMember(a)).forEach(g=>g._trigger(o,c,d)),this.stateChangeCallbacks.message.forEach(g=>g(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(i=>i())}_onConnClose(i){this.log("transport","close",i),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(i))}_onConnError(i){this.log("transport",i.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(i))}_triggerChanError(){this.channels.forEach(i=>i._trigger(CHANNEL_EVENTS.error))}_appendParams(i,s){if(Object.keys(s).length===0)return i;const a=i.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${i}${a}${o}`}_workerObjectUrl(i){let s;if(i)s=i;else{const a=new Blob([WORKER_SCRIPT],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class WSWebSocketDummy{constructor(i,s,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=i,this.close=a.close}}class StorageError extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class StorageApiError extends StorageError{constructor(i,s){super(i),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(i,s){super(i),this.name="StorageUnknownError",this.originalError=s}}var __awaiter$7=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};const resolveFetch$2=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...s)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...s)):i=fetch,(...s)=>i(...s)},resolveResponse=()=>__awaiter$7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=e=>{if(Array.isArray(e))return e.map(s=>recursiveToCamel(s));if(typeof e=="function"||e!==Object(e))return e;const i={};return Object.entries(e).forEach(([s,a])=>{const o=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));i[o]=recursiveToCamel(a)}),i};var __awaiter$6=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};const _getErrorMessage$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$1=(e,i,s)=>__awaiter$6(void 0,void 0,void 0,function*(){const a=yield resolveResponse();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(o=>{i(new StorageApiError(_getErrorMessage$1(o),e.status||500))}).catch(o=>{i(new StorageUnknownError(_getErrorMessage$1(o),o))}):i(new StorageUnknownError(_getErrorMessage$1(e),e))}),_getRequestParams$1=(e,i,s,a)=>{const o={method:e,headers:(i==null?void 0:i.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},i==null?void 0:i.headers),a&&(o.body=JSON.stringify(a)),Object.assign(Object.assign({},o),s))};function _handleRequest$1(e,i,s,a,o,c){return __awaiter$6(this,void 0,void 0,function*(){return new Promise((d,g)=>{e(s,_getRequestParams$1(i,a,o,c)).then(h=>{if(!h.ok)throw h;return a!=null&&a.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>handleError$1(h,g,a))})})}function get(e,i,s,a){return __awaiter$6(this,void 0,void 0,function*(){return _handleRequest$1(e,"GET",i,s,a)})}function post(e,i,s,a,o){return __awaiter$6(this,void 0,void 0,function*(){return _handleRequest$1(e,"POST",i,a,o,s)})}function put(e,i,s,a,o){return __awaiter$6(this,void 0,void 0,function*(){return _handleRequest$1(e,"PUT",i,a,o,s)})}function head(e,i,s,a){return __awaiter$6(this,void 0,void 0,function*(){return _handleRequest$1(e,"HEAD",i,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function remove(e,i,s,a,o){return __awaiter$6(this,void 0,void 0,function*(){return _handleRequest$1(e,"DELETE",i,a,o,s)})}var __awaiter$5=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(i,s={},a,o){this.url=i,this.headers=s,this.bucketId=a,this.fetch=resolveFetch$2(o)}uploadOrUpdate(i,s,a,o){return __awaiter$5(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),o);let g=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(g=Object.assign(Object.assign({},g),o.headers));const b=this._removeEmptyFolders(s),_=this._getFinalPath(b),et=yield this.fetch(`${this.url}/object/${_}`,Object.assign({method:i,body:c,headers:g},d!=null&&d.duplex?{duplex:d.duplex}:{})),nt=yield et.json();return et.ok?{data:{path:b,id:nt.Id,fullPath:nt.Key},error:null}:{data:null,error:nt}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}upload(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,s,a)})}uploadToSignedUrl(i,s,a,o){return __awaiter$5(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(i),d=this._getFinalPath(c),g=new URL(this.url+`/object/upload/sign/${d}`);g.searchParams.set("token",s);try{let h;const b=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},o),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",b.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",b.cacheControl)):(h=a,_["cache-control"]=`max-age=${b.cacheControl}`,_["content-type"]=b.contentType);const et=yield this.fetch(g.toString(),{method:"PUT",body:h,headers:_}),nt=yield et.json();return et.ok?{data:{path:c,fullPath:nt.Key},error:null}:{data:null,error:nt}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(i,s){return __awaiter$5(this,void 0,void 0,function*(){try{let a=this._getFinalPath(i);const o=Object.assign({},this.headers);s!=null&&s.upsert&&(o["x-upsert"]="true");const c=yield post(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:o}),d=new URL(this.url+c.url),g=d.searchParams.get("token");if(!g)throw new StorageError("No token returned by API");return{data:{signedUrl:d.toString(),path:i,token:g},error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}update(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,s,a)})}move(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}copy(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}createSignedUrl(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){try{let o=this._getFinalPath(i),c=yield post(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}createSignedUrls(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){try{const o=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:i},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}download(i,s){return __awaiter$5(this,void 0,void 0,function*(){const o=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),d=c?`?${c}`:"";try{const g=this._getFinalPath(i);return{data:yield(yield get(this.fetch,`${this.url}/${o}/${g}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(isStorageError(g))return{data:null,error:g};throw g}})}info(i){return __awaiter$5(this,void 0,void 0,function*(){const s=this._getFinalPath(i);try{const a=yield get(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:recursiveToCamel(a),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}exists(i){return __awaiter$5(this,void 0,void 0,function*(){const s=this._getFinalPath(i);try{return yield head(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(isStorageError(a)&&a instanceof StorageUnknownError){const o=a.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:a}}throw a}})}getPublicUrl(i,s){const a=this._getFinalPath(i),o=[],c=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&o.push(c);const g=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});h!==""&&o.push(h);let b=o.join("&");return b!==""&&(b=`?${b}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${a}${b}`)}}}remove(i){return __awaiter$5(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}list(i,s,a){return __awaiter$5(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),s),{prefix:i||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const s=[];return i.width&&s.push(`width=${i.width}`),i.height&&s.push(`height=${i.height}`),i.resize&&s.push(`resize=${i.resize}`),i.format&&s.push(`format=${i.format}`),i.quality&&s.push(`quality=${i.quality}`),s.join("&")}}const version$2="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$4=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};class StorageBucketApi{constructor(i,s={},a){this.url=i,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),s),this.fetch=resolveFetch$2(a)}listBuckets(){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}getBucket(i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}createBucket(i,s={public:!1}){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:i,name:i,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}updateBucket(i,s){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}emptyBucket(i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}deleteBucket(i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}}class StorageClient extends StorageBucketApi{constructor(i,s={},a){super(i,s,a)}from(i){return new StorageFileApi(this.url,this.headers,i,this.fetch)}}const version$1="2.48.1";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$3=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};const resolveFetch$1=e=>{let i;return e?i=e:typeof fetch>"u"?i=nodeFetch:i=fetch,(...s)=>i(...s)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(e,i,s)=>{const a=resolveFetch$1(s),o=resolveHeadersConstructor();return(c,d)=>__awaiter$3(void 0,void 0,void 0,function*(){var g;const h=(g=yield i())!==null&&g!==void 0?g:e;let b=new o(d==null?void 0:d.headers);return b.has("apikey")||b.set("apikey",e),b.has("Authorization")||b.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},d),{headers:b}))})};var __awaiter$2=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};function stripTrailingSlash(e){return e.replace(/\/$/,"")}function applySettingDefaults(e,i){const{db:s,auth:a,realtime:o,global:c}=e,{db:d,auth:g,realtime:h,global:b}=i,_={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},g),a),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign({},b),c),accessToken:()=>__awaiter$2(this,void 0,void 0,function*(){return""})};return e.accessToken?_.accessToken=e.accessToken:delete _.accessToken,_}const version="2.67.3",GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},EXPIRY_MARGIN=10,API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function expiresAt(e){return Math.round(Date.now()/1e3)+e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const i=Math.random()*16|0;return(e=="x"?i:i&3|8).toString(16)})}const isBrowser$1=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser$1())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(e){const i={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,c)=>{i[c]=o})}catch{}return s.searchParams.forEach((a,o)=>{i[o]=a}),i}const resolveFetch=e=>{let i;return e?i=e:typeof fetch>"u"?i=(...s)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...s)):i=fetch,(...s)=>i(...s)},looksLikeFetchResponse=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",setItemAsync=async(e,i,s)=>{await e.setItem(i,JSON.stringify(s))},getItemAsync=async(e,i)=>{const s=await e.getItem(i);if(!s)return null;try{return JSON.parse(s)}catch{return s}},removeItemAsync=async(e,i)=>{await e.removeItem(i)};function decodeBase64URL(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",a,o,c,d,g,h,b,_=0;for(e=e.replace("-","+").replace("_","/");_<e.length;)d=i.indexOf(e.charAt(_++)),g=i.indexOf(e.charAt(_++)),h=i.indexOf(e.charAt(_++)),b=i.indexOf(e.charAt(_++)),a=d<<2|g>>4,o=(g&15)<<4|h>>2,c=(h&3)<<6|b,s=s+String.fromCharCode(a),h!=64&&o!=0&&(s=s+String.fromCharCode(o)),b!=64&&c!=0&&(s=s+String.fromCharCode(c));return s}class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((i,s)=>{this.resolve=i,this.reject=s})}}Deferred.promiseConstructor=Promise;function decodeJWTPayload(e){const i=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!i.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const a=s[1];return JSON.parse(decodeBase64URL(a))}async function sleep(e){return await new Promise(i=>{setTimeout(()=>i(null),e)})}function retryable(e,i){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!i(c,null,d)){a(d);return}}catch(d){if(!i(c,d)){o(d);return}}})()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const i=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let o="";for(let c=0;c<56;c++)o+=s.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(i),Array.from(i,dec2hex).join("")}async function sha256(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}function base64urlencode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function generatePKCEChallenge(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await sha256(e);return base64urlencode(s)}async function getCodeChallengeAndMethod(e,i,s=!1){const a=generatePKCEVerifier();let o=a;s&&(o+="/PASSWORD_RECOVERY"),await setItemAsync(e,`${i}-code-verifier`,o);const c=await generatePKCEChallenge(a);return[c,a===c?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){const i=e.headers.get(API_VERSION_HEADER_NAME);if(!i||!i.match(API_VERSION_REGEX))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}class AuthError extends Error{constructor(i,s,a){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function isAuthError(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AuthApiError extends AuthError{constructor(i,s,a){super(i,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function isAuthApiError(e){return isAuthError(e)&&e.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(i,s){super(i),this.name="AuthUnknownError",this.originalError=s}}class CustomAuthError extends AuthError{constructor(i,s,a,o){super(i,a,o),this.name=s,this.status=a}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(e){return isAuthError(e)&&e.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(i,s=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&e.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(i,s=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(i,s){super(i,"AuthRetryableFetchError",s,void 0)}}function isAuthRetryableFetchError(e){return isAuthError(e)&&e.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(i,s,a){super(i,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}var __rest$1=function(e,i){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(s[a[o]]=e[a[o]]);return s};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NETWORK_ERROR_CODES=[502,503,504];async function handleError(e){var i;if(!looksLikeFetchResponse(e))throw new AuthRetryableFetchError(_getErrorMessage(e),0);if(NETWORK_ERROR_CODES.includes(e.status))throw new AuthRetryableFetchError(_getErrorMessage(e),e.status);let s;try{s=await e.json()}catch(c){throw new AuthUnknownError(_getErrorMessage(c),c)}let a;const o=parseResponseAPIVersion(e);if(o&&o.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(s),e.status,((i=s.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(a==="session_not_found")throw new AuthSessionMissingError}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(s),e.status,s.weak_password.reasons);throw new AuthApiError(_getErrorMessage(s),e.status||500,a)}const _getRequestParams=(e,i,s,a)=>{const o={method:e,headers:(i==null?void 0:i.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i==null?void 0:i.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),s))};async function _request(e,i,s,a){var o;const c=Object.assign({},a==null?void 0:a.headers);c[API_VERSION_HEADER_NAME]||(c[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(o=a==null?void 0:a.query)!==null&&o!==void 0?o:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const g=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await _handleRequest(e,i,s+g,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(h):{data:Object.assign({},h),error:null}}async function _handleRequest(e,i,s,a,o,c){const d=_getRequestParams(i,a,o,c);let g;try{g=await e(s,Object.assign({},d))}catch(h){throw console.error(h),new AuthRetryableFetchError(_getErrorMessage(h),0)}if(g.ok||await handleError(g),a!=null&&a.noResolveJson)return g;try{return await g.json()}catch(h){await handleError(h)}}function _sessionResponse(e){var i;let s=null;hasSession(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=expiresAt(e.expires_in)));const a=(i=e.user)!==null&&i!==void 0?i:e;return{data:{session:s,user:a},error:null}}function _sessionResponsePassword(e){const i=_sessionResponse(e);return!i.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(i.data.weak_password=e.weak_password),i}function _userResponse(e){var i;return{data:{user:(i=e.user)!==null&&i!==void 0?i:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){const{action_link:i,email_otp:s,hashed_token:a,redirect_to:o,verification_type:c}=e,d=__rest$1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:i,email_otp:s,hashed_token:a,redirect_to:o,verification_type:c},h=Object.assign({},d);return{data:{properties:g,user:h},error:null}}function _noResolveJsonResponse(e){return e}function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in}var __rest=function(e,i){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(s[a[o]]=e[a[o]]);return s};class GoTrueAdminApi{constructor({url:i="",headers:s={},fetch:a}){this.url=i,this.headers=s,this.fetch=resolveFetch(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(i,s="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}async inviteUserByEmail(i,s={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async generateLink(i){try{const{options:s}=i,a=__rest(i,["options"]),o=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(o.new_email=a==null?void 0:a.newEmail,delete o.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_generateLinkResponse,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(isAuthError(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(i){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:_userResponse})}catch(s){if(isAuthError(s))return{data:{user:null},error:s};throw s}}async listUsers(i){var s,a,o,c,d,g,h;try{const b={nextPage:null,lastPage:0,total:0},_=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=i==null?void 0:i.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=i==null?void 0:i.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(_.error)throw _.error;const et=await _.json(),nt=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,st=(h=(g=_.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&h!==void 0?h:[];return st.length>0&&(st.forEach(ot=>{const ht=parseInt(ot.split(";")[0].split("=")[1].substring(0,1)),dt=JSON.parse(ot.split(";")[1].split("=")[1]);b[`${dt}Page`]=ht}),b.total=parseInt(nt)),{data:Object.assign(Object.assign({},et),b),error:null}}catch(b){if(isAuthError(b))return{data:{users:[]},error:b};throw b}}async getUserById(i){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:_userResponse})}catch(s){if(isAuthError(s))return{data:{user:null},error:s};throw s}}async updateUserById(i,s){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:s,headers:this.headers,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async deleteUser(i,s=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:s},xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async _listFactors(i){try{const{data:s,error:a}=await _request(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:a}}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}async _deleteFactor(i){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}}const localStorageAdapter={getItem:e=>supportsLocalStorage()?globalThis.localStorage.getItem(e):null,setItem:(e,i)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(e,i)},removeItem:e=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(e)}};function memoryLocalStorageAdapter(e={}){return{getItem:i=>e[i]||null,setItem:(i,s)=>{e[i]=s},removeItem:i=>{delete e[i]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(e,i,s){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,i);const a=new globalThis.AbortController;return i>0&&setTimeout(()=>{a.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await s()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(i===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(internals.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},AUTO_REFRESH_TICK_DURATION=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3;async function lockNoOp(e,i,s){return await s()}class GoTrueClient{constructor(i){var s,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser$1()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},DEFAULT_OPTIONS),i);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new GoTrueAdminApi({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=resolveFetch(o.fetch),this.lock=o.lock||lockNoOp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:isBrowser$1()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser$1()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...i){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{const s=parseParametersFromURL(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),isBrowser$1()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),isAuthImplicitGrantRedirectError(c)){const h=(i=c.details)===null||i===void 0?void 0:i.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",g),await this._saveSession(d),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return isAuthError(s)?{error:s}:{error:new AuthUnknownError("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var s,a,o;try{const c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=i==null?void 0:i.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=i==null?void 0:i.options)===null||o===void 0?void 0:o.captchaToken}},xform:_sessionResponse}),{data:d,error:g}=c;if(g||!d)return{data:{user:null,session:null},error:g};const h=d.session,b=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:b,session:h},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(i){var s,a,o;try{let c;if("email"in i){const{email:_,password:et,options:nt}=i;let st=null,ot=null;this.flowType==="pkce"&&([st,ot]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:nt==null?void 0:nt.emailRedirectTo,body:{email:_,password:et,data:(s=nt==null?void 0:nt.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken},code_challenge:st,code_challenge_method:ot},xform:_sessionResponse})}else if("phone"in i){const{phone:_,password:et,options:nt}=i;c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:et,data:(a=nt==null?void 0:nt.data)!==null&&a!==void 0?a:{},channel:(o=nt==null?void 0:nt.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:g}=c;if(g||!d)return{data:{user:null,session:null},error:g};const h=d.session,b=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:b,session:h},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(i){try{let s;if("email"in i){const{email:c,password:d,options:g}=i;s=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in i){const{phone:c,password:d,options:g}=i;s=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:a,error:o}=s;return o?{data:{user:null,session:null},error:o}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(i){var s,a,o,c;return await this._handleProviderSignIn(i.provider,{redirectTo:(s=i.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=i.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=i.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=i.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async _exchangeCodeForSession(i){const s=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(s??"").split("/");try{const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:a},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(isAuthError(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(i){try{const{options:s,provider:a,token:o,access_token:c,nonce:d}=i,g=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:_sessionResponse}),{data:h,error:b}=g;return b?{data:{user:null,session:null},error:b}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:b})}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(i){var s,a,o,c,d;try{if("email"in i){const{email:g,options:h}=i;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:et}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:b,code_challenge_method:_},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:et}}if("phone"in i){const{phone:g,options:h}=i,{data:b,error:_}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(d=h==null?void 0:h.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:_}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(g){if(isAuthError(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(i){var s,a;try{let o,c;"options"in i&&(o=(s=i.options)===null||s===void 0?void 0:s.redirectTo,c=(a=i.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:g}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:_sessionResponse});if(g)throw g;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,b=d.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:b,session:h},error:null}}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(i){var s,a,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(a=(s=i.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=i==null?void 0:i.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:_ssoResponse})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)throw a;if(!s)throw new AuthSessionMissingError;const{error:o}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async resend(i){try{const s=`${this.url}/resend`;if("email"in i){const{email:a,type:o,options:c}=i,{error:d}=await _request(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in i){const{phone:a,type:o,options:c}=i,{data:d,error:g}=await _request(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:g}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(i,s){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await i(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const s=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?i=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const a=i.expires_at?i.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",i.expires_at),!a){if(this.storage.isServer){let d=this.suppressGetSessionWarning;i=new Proxy(i,{get:(h,b,_)=>(!d&&b==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,b,_))})}return{data:{session:i},error:null}}const{session:o,error:c}=await this._callRefreshToken(i.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:_userResponse}):await this._useSession(async s=>{var a,o,c;const{data:d,error:g}=s;if(g)throw g;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:_userResponse})})}catch(s){if(isAuthError(s))return isAuthSessionMissingError(s)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(i,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,s))}async _updateUser(i,s={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new AuthSessionMissingError;const d=o.session;let g=null,h=null;this.flowType==="pkce"&&i.email!=null&&([g,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:b,error:_}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:g,code_challenge_method:h}),jwt:d.access_token,xform:_userResponse});if(_)throw _;return d.user=b.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}_decodeJWT(i){return decodeJWTPayload(i)}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new AuthSessionMissingError;const s=Date.now()/1e3;let a=s,o=!0,c=null;const d=decodeJWTPayload(i.access_token);if(d.exp&&(a=d.exp,o=a<=s),o){const{session:g,error:h}=await this._callRefreshToken(i.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!g)return{data:{user:null,session:null},error:null};c=g}else{const{data:g,error:h}=await this._getUser(i.access_token);if(h)throw h;c={access_token:i.access_token,refresh_token:i.refresh_token,user:g.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(isAuthError(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async s=>{var a;if(!i){const{data:d,error:g}=s;if(g)throw g;i=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(i!=null&&i.refresh_token))throw new AuthSessionMissingError;const{session:o,error:c}=await this._callRefreshToken(i.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(i,s){try{if(!isBrowser$1())throw new AuthImplicitGrantRedirectError("No browser detected.");if(i.error||i.error_description||i.error_code)throw new AuthImplicitGrantRedirectError(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:_e,error:ct}=await this._exchangeCodeForSession(i.code);if(ct)throw ct;const pt=new URL(window.location.href);return pt.searchParams.delete("code"),window.history.replaceState(window.history.state,"",pt.toString()),{data:{session:_e.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:g,expires_at:h,token_type:b}=i;if(!c||!g||!d||!b)throw new AuthImplicitGrantRedirectError("No session defined in URL");const _=Math.round(Date.now()/1e3),et=parseInt(g);let nt=_+et;h&&(nt=parseInt(h));const st=nt-_;st*1e3<=AUTO_REFRESH_TICK_DURATION&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${st}s, should have been closer to ${et}s`);const ot=nt-et;_-ot>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",ot,nt,_):_-ot<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",ot,nt,_);const{data:ht,error:dt}=await this._getUser(c);if(dt)throw dt;const $={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:et,expires_at:nt,refresh_token:d,token_type:b,user:ht.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:i.type},error:null}}catch(a){if(isAuthError(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const s=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&s)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:o,error:c}=s;if(c)return{error:c};const d=(a=o.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:g}=await this.admin.signOut(d,i);if(g&&!(isAuthApiError(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return i!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(i){const s=uuid(),a={id:s,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(i){return await this._useSession(async s=>{var a,o;try{const{data:{session:c},error:d}=s;if(d)throw d;await((a=this.stateChangeEmitters.get(i))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",i,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(i))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",c),console.error(c)}})}async resetPasswordForEmail(i,s={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async getUserIdentities(){var i;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(i=s.user.identities)!==null&&i!==void 0?i:[]},error:null}}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}async linkIdentity(i){var s;try{const{data:a,error:o}=await this._useSession(async c=>{var d,g,h,b,_;const{data:et,error:nt}=c;if(nt)throw nt;const st=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(d=i.options)===null||d===void 0?void 0:d.redirectTo,scopes:(g=i.options)===null||g===void 0?void 0:g.scopes,queryParams:(h=i.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",st,{headers:this.headers,jwt:(_=(b=et.session)===null||b===void 0?void 0:b.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return isBrowser$1()&&!(!((s=i.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:i.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(isAuthError(a))return{data:{provider:i.provider,url:null},error:a};throw a}}async unlinkIdentity(i){try{return await this._useSession(async s=>{var a,o;const{data:c,error:d}=s;if(d)throw d;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}async _refreshAccessToken(i){const s=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await retryable(async o=>(o>0&&await sleep(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:_sessionResponse})),(o,c)=>{const d=200*Math.pow(2,o);return c&&isAuthRetryableFetchError(c)&&Date.now()+d-a<AUTO_REFRESH_TICK_DURATION})}catch(a){if(this._debug(s,"error",a),isAuthError(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",s,"url",a),isBrowser$1()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:i,url:a},error:null}}async _recoverAndRefresh(){var i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await getItemAsync(this.storage,this.storageKey);if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),c=((i=a.expires_at)!==null&&i!==void 0?i:1/0)<o+EXPIRY_MARGIN;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${EXPIRY_MARGIN}s`),c){if(this.autoRefreshToken&&a.refresh_token){const{error:d}=await this._callRefreshToken(a.refresh_token);d&&(console.error(d),isAuthRetryableFetchError(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(i){var s,a;if(!i)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Deferred;const{data:c,error:d}=await this._refreshAccessToken(i);if(d)throw d;if(!c.session)throw new AuthSessionMissingError;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const g={session:c.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(c){if(this._debug(o,"error",c),isAuthError(c)){const d={session:null,error:c};return isAuthRetryableFetchError(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(i,s,a=!0){const o=`#_notifyAllSubscribers(${i})`;this._debug(o,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:i,session:s});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(i,s)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let g=0;g<c.length;g+=1)console.error(c[g]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await setItemAsync(this.storage,this.storageKey,i)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&isBrowser$1()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",i)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-i)/AUTO_REFRESH_TICK_DURATION);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),o<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser$1()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const s=`#_onVisibilityChanged(${i})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,s,a){const o=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(g.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${i}?${o.join("&")}`}async _unenroll(i){try{return await this._useSession(async s=>{var a;const{data:o,error:c}=s;return c?{data:null,error:c}:await _request(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}async _enroll(i){try{return await this._useSession(async s=>{var a,o;const{data:c,error:d}=s;if(d)return{data:null,error:d};const g=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:{issuer:i.issuer}),{data:h,error:b}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return b?{data:null,error:b}:(i.factorType==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:o,error:c}=s;if(c)return{data:null,error:c};const{data:d,error:g}=await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:{code:i.code,challenge_id:i.challengeId},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:g})})}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:o,error:c}=s;return c?{data:null,error:c}:await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:{channel:i.channel},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(isAuthError(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(i){const{data:s,error:a}=await this._challenge({factorId:i.factorId});return a?{data:null,error:a}:await this._verify({factorId:i.factorId,challengeId:s.id,code:i.code})}async _listFactors(){const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(i==null?void 0:i.factors)||[],o=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async i=>{var s,a;const{data:{session:o},error:c}=i;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const d=this._decodeJWT(o.access_token);let g=null;d.aal&&(g=d.aal);let h=g;((a=(s=o.user.factors)===null||s===void 0?void 0:s.filter(et=>et.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const _=d.amr||[];return{data:{currentLevel:g,nextLevel:h,currentAuthenticationMethods:_},error:null}}))}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(i){super(i)}}var __awaiter$1=function(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})};class SupabaseClient{constructor(i,s,a){var o,c,d;if(this.supabaseUrl=i,this.supabaseKey=s,!i)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const g=stripTrailingSlash(i);this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,b={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:DEFAULT_GLOBAL_OPTIONS},_=applySettingDefaults(a??{},b);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=_.global.headers)!==null&&c!==void 0?c:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(et,nt)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(nt)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=_.auth)!==null&&d!==void 0?d:{},this.headers,_.global.fetch),this.fetch=fetchWithAuth(s,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new PostgrestClient(`${g}/rest/v1`,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,s={},a={}){return this.rest.rpc(i,s,a)}channel(i,s={config:{}}){return this.realtime.channel(i,s)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var i,s;return __awaiter$1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:s,detectSessionInUrl:a,storage:o,storageKey:c,flowType:d,lock:g,debug:h},b,_){const et={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},et),b),storageKey:c,autoRefreshToken:i,persistSession:s,detectSessionInUrl:a,storage:o,flowType:d,lock:g,debug:h,fetch:_,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(i){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(i,s,a){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:i==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(e,i,s)=>new SupabaseClient(e,i,s),supabaseUrl="https://xxqjvtouvlsogvfyqveu.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4cWp2dG91dmxzb2d2ZnlxdmV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2MDI1ODYsImV4cCI6MjA1NTE3ODU4Nn0.rl4SN-zo_8YX5eegM1ofNiZDGl_Esdc1-cLJgAkEENA",supabase=createClient(supabaseUrl,supabaseKey);supabase.from("annotations").select("*").limit(1).then(({data:e,error:i})=>{i?console.error("Supabase connection error:",i):console.log("Supabase connection successful")});const COLORS=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316"];function RoomJoin(){const[e,i]=reactExports.useState("create"),[s,a]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,g]=reactExports.useState(COLORS[0]),[h,b]=reactExports.useState(!1),[_,et]=reactExports.useState(null),[nt,st]=reactExports.useState(!1),[ot,ht]=reactExports.useState(null),dt=useNavigate(),$=async pt=>{if(pt.preventDefault(),!!s.trim())try{if(b(!0),et(null),e==="create"){const{data:tt,error:ut}=await supabase.from("rooms").insert([{name:`${s}'s Room`,created_by:s}]).select().single();if(ut)throw ut;ht(tt.id),st(!0)}else{const{data:tt,error:ut}=await supabase.from("rooms").select("id").eq("id",o).single();if(ut||!tt)throw new Error("Invalid room code. Please check and try again.")}localStorage.setItem("userName",s),localStorage.setItem("userColor",d),e==="join"&&dt(`/room/${o}`)}catch(tt){console.error("Error:",tt.message),et(tt.message||"An error occurred")}finally{b(!1)}},_e=async()=>{ot&&await navigator.clipboard.writeText(ot)},ct=()=>{ot&&dt(`/room/${ot}`)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center px-4",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl w-full space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Users,{className:"mx-auto h-16 w-16 text-blue-500"}),jsxRuntimeExports.jsx("h1",{className:"mt-6 text-4xl font-bold text-gray-900",children:"Research Room"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Collaborate on research papers in real-time"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 mb-8",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i("create"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${e==="create"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Create Room"}),jsxRuntimeExports.jsx("button",{onClick:()=>i("join"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${e==="join"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Join Room"})]}),_&&jsxRuntimeExports.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-sm text-red-700",children:_}),jsxRuntimeExports.jsxs("form",{onSubmit:$,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Your Name"}),jsxRuntimeExports.jsx("input",{id:"name",type:"text",required:!0,value:s,onChange:pt=>a(pt.target.value),className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter your name"})]}),e==="join"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"roomCode",className:"block text-sm font-medium text-gray-700",children:"Room Code"}),jsxRuntimeExports.jsx("input",{id:"roomCode",type:"text",required:!0,value:o,onChange:pt=>c(pt.target.value),className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter room code"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Your Color"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-3",children:COLORS.map(pt=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(pt),className:`w-8 h-8 rounded-full transition-transform ${d===pt?"ring-2 ring-offset-2 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:pt}},pt))})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:h||!s.trim()||e==="join"&&!o.trim(),className:"w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Link,{className:"w-4 h-4 mr-2"}),e==="create"?"Create Room":"Join Room"]})})]})]})]}),nt&&ot&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Share Room"}),jsxRuntimeExports.jsx("button",{onClick:()=>st(!1),className:"text-gray-400 hover:text-gray-500",children:jsxRuntimeExports.jsx(X,{className:"h-5 w-5"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share this room code with others to invite them to your research room:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"text",readOnly:!0,value:ot,className:"flex-1 rounded-lg border border-gray-300 px-4 py-2 bg-gray-50 text-sm font-mono"}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"p-2 text-blue-600 hover:text-blue-700",title:"Copy to clipboard",children:jsxRuntimeExports.jsx(Copy,{className:"h-5 w-5"})})]}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"w-full flex justify-center items-center px-4 py-3 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Continue to Room"})]})})]})}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(a,o,c,d,g,h){if(h!==ReactPropTypesSecret){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function i(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:i,element:e,elementType:e,instanceOf:i,node:e,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter(e,i,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function g(_){try{b(a.next(_))}catch(et){d(et)}}function h(_){try{b(a.throw(_))}catch(et){d(et)}}function b(_){_.done?c(_.value):o(_.value).then(g,h)}b((a=a.apply(e,i||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(e,i,s){const a=withMimeType(e),{webkitRelativePath:o}=e,c=typeof i=="string"?i:typeof o=="string"&&o.length>0?o:`./${e.name}`;return typeof a.path!="string"&&setObjProp(a,"path",c),setObjProp(a,"relativePath",c),a}function withMimeType(e){const{name:i}=e;if(i&&i.lastIndexOf(".")!==-1&&!e.type){const a=i.split(".").pop().toLowerCase(),o=COMMON_MIME_TYPES.get(a);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}function setObjProp(e,i,s){Object.defineProperty(e,i,{value:s,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(e){return __awaiter(this,void 0,void 0,function*(){return isObject(e)&&isDataTransfer(e.dataTransfer)?getDataTransferFiles(e.dataTransfer,e.type):isChangeEvt(e)?getInputFiles(e):Array.isArray(e)&&e.every(i=>"getFile"in i&&typeof i.getFile=="function")?getFsHandleFiles(e):[]})}function isDataTransfer(e){return isObject(e)}function isChangeEvt(e){return isObject(e)&&isObject(e.target)}function isObject(e){return typeof e=="object"&&e!==null}function getInputFiles(e){return fromList(e.target.files).map(i=>toFileWithPath(i))}function getFsHandleFiles(e){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(e.map(s=>s.getFile()))).map(s=>toFileWithPath(s))})}function getDataTransferFiles(e,i){return __awaiter(this,void 0,void 0,function*(){if(e.items){const s=fromList(e.items).filter(o=>o.kind==="file");if(i!=="drop")return s;const a=yield Promise.all(s.map(toFilePromises));return noIgnoredFiles(flatten(a))}return noIgnoredFiles(fromList(e.files).map(s=>toFileWithPath(s)))})}function noIgnoredFiles(e){return e.filter(i=>FILES_TO_IGNORE.indexOf(i.name)===-1)}function fromList(e){if(e===null)return[];const i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a)}return i}function toFilePromises(e){if(typeof e.webkitGetAsEntry!="function")return fromDataTransferItem(e);const i=e.webkitGetAsEntry();return i&&i.isDirectory?fromDirEntry(i):fromDataTransferItem(e,i)}function flatten(e){return e.reduce((i,s)=>[...i,...Array.isArray(s)?flatten(s):[s]],[])}function fromDataTransferItem(e,i){return __awaiter(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const c=yield e.getAsFileSystemHandle();if(c===null)throw new Error(`${e} is not a File`);if(c!==void 0){const d=yield c.getFile();return d.handle=c,toFileWithPath(d)}}const a=e.getAsFile();if(!a)throw new Error(`${e} is not a File`);return toFileWithPath(a,(s=i==null?void 0:i.fullPath)!==null&&s!==void 0?s:void 0)})}function fromEntry(e){return __awaiter(this,void 0,void 0,function*(){return e.isDirectory?fromDirEntry(e):fromFileEntry(e)})}function fromDirEntry(e){const i=e.createReader();return new Promise((s,a)=>{const o=[];function c(){i.readEntries(d=>__awaiter(this,void 0,void 0,function*(){if(d.length){const g=Promise.all(d.map(fromEntry));o.push(g),c()}else try{const g=yield Promise.all(o);s(g)}catch(g){a(g)}}),d=>{a(d)})}c()})}function fromFileEntry(e){return __awaiter(this,void 0,void 0,function*(){return new Promise((i,s)=>{e.file(a=>{const o=toFileWithPath(a,e.fullPath);i(o)},a=>{s(a)})})})}var _default=function(e,i){if(e&&i){var s=Array.isArray(i)?i:i.split(",");if(s.length===0)return!0;var a=e.name||"",o=(e.type||"").toLowerCase(),c=o.replace(/\/.*$/,"");return s.some(function(d){var g=d.trim().toLowerCase();return g.charAt(0)==="."?a.toLowerCase().endsWith(g):g.endsWith("/*")?c===g.replace(/\/.*$/,""):o===g})}return!0};function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function ownKeys$1(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),s.push.apply(s,a)}return s}function _objectSpread$1(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(s),!0).forEach(function(a){_defineProperty$1(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys$1(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty$1(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _slicedToArray$1(e,i){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,i)||_unsupportedIterableToArray$1(e,i)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$1(e,i)}}function _arrayLikeToArray$1(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function _iterableToArrayLimit$1(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a=[],o=!0,c=!1,d,g;try{for(s=s.call(e);!(o=(d=s.next()).done)&&(a.push(d.value),!(i&&a.length===i));o=!0);}catch(h){c=!0,g=h}finally{try{!o&&s.return!=null&&s.return()}finally{if(c)throw g}}return a}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=i.split(","),a=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(a)}},getTooLargeRejectionErr=function(i){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(i," ").concat(i===1?"byte":"bytes")}},getTooSmallRejectionErr=function(i){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(i," ").concat(i===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(e,i){var s=e.type==="application/x-moz-file"||accepts(e,i);return[s,s?null:getInvalidTypeRejectionErr(i)]}function fileMatchSize(e,i,s){if(isDefined(e.size))if(isDefined(i)&&isDefined(s)){if(e.size>s)return[!1,getTooLargeRejectionErr(s)];if(e.size<i)return[!1,getTooSmallRejectionErr(i)]}else{if(isDefined(i)&&e.size<i)return[!1,getTooSmallRejectionErr(i)];if(isDefined(s)&&e.size>s)return[!1,getTooLargeRejectionErr(s)]}return[!0,null]}function isDefined(e){return e!=null}function allFilesAccepted(e){var i=e.files,s=e.accept,a=e.minSize,o=e.maxSize,c=e.multiple,d=e.maxFiles,g=e.validator;return!c&&i.length>1||c&&d>=1&&i.length>d?!1:i.every(function(h){var b=fileAccepted(h,s),_=_slicedToArray$1(b,1),et=_[0],nt=fileMatchSize(h,a,o),st=_slicedToArray$1(nt,1),ot=st[0],ht=g?g(h):null;return et&&ot&&!ht})}function isPropagationStopped(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(i){return i==="Files"||i==="application/x-moz-file"}):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function isIe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function isEdge(e){return e.indexOf("Edge/")!==-1}function isIeOrEdge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(e)||isEdge(e)}function composeEventHandlers(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return function(a){for(var o=arguments.length,c=new Array(o>1?o-1:0),d=1;d<o;d++)c[d-1]=arguments[d];return i.some(function(g){return!isPropagationStopped(a)&&g&&g.apply(void 0,[a].concat(c)),isPropagationStopped(a)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(e){if(isDefined(e)){var i=Object.entries(e).filter(function(s){var a=_slicedToArray$1(s,2),o=a[0],c=a[1],d=!0;return isMIMEType(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(c)||!c.every(isExt))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(s,a){var o=_slicedToArray$1(a,2),c=o[0],d=o[1];return _objectSpread$1(_objectSpread$1({},s),{},_defineProperty$1({},c,d))},{});return[{description:"Files",accept:i}]}return e}function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce(function(i,s){var a=_slicedToArray$1(s,2),o=a[0],c=a[1];return[].concat(_toConsumableArray$1(i),[o],_toConsumableArray$1(c))},[]).filter(function(i){return isMIMEType(i)||isExt(i)}).join(",")}function isAbort(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function isSecurityError(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function isMIMEType(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,i){return _arrayWithHoles(e)||_iterableToArrayLimit(e,i)||_unsupportedIterableToArray(e,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(e,i)}}function _arrayLikeToArray(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function _iterableToArrayLimit(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a=[],o=!0,c=!1,d,g;try{for(s=s.call(e);!(o=(d=s.next()).done)&&(a.push(d.value),!(i&&a.length===i));o=!0);}catch(h){c=!0,g=h}finally{try{!o&&s.return!=null&&s.return()}finally{if(c)throw g}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),s.push.apply(s,a)}return s}function _objectSpread(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _objectWithoutProperties(e,i){if(e==null)return{};var s=_objectWithoutPropertiesLoose(e,i),a,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)a=c[o],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function _objectWithoutPropertiesLoose(e,i){if(e==null)return{};var s={},a=Object.keys(e),o,c;for(c=0;c<a.length;c++)o=a[c],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}var Dropzone=reactExports.forwardRef(function(e,i){var s=e.children,a=_objectWithoutProperties(e,_excluded),o=useDropzone(a),c=o.open,d=_objectWithoutProperties(o,_excluded2);return reactExports.useImperativeHandle(i,function(){return{open:c}},[c]),React.createElement(reactExports.Fragment,null,s(_objectSpread(_objectSpread({},d),{},{open:c})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=_objectSpread(_objectSpread({},defaultProps),e),s=i.accept,a=i.disabled,o=i.getFilesFromEvent,c=i.maxSize,d=i.minSize,g=i.multiple,h=i.maxFiles,b=i.onDragEnter,_=i.onDragLeave,et=i.onDragOver,nt=i.onDrop,st=i.onDropAccepted,ot=i.onDropRejected,ht=i.onFileDialogCancel,dt=i.onFileDialogOpen,$=i.useFsAccessApi,_e=i.autoFocus,ct=i.preventDropOnDocument,pt=i.noClick,tt=i.noKeyboard,ut=i.noDrag,it=i.noDragEventsBubbling,lt=i.onError,mt=i.validator,Et=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(s)},[s]),ft=reactExports.useMemo(function(){return pickerOptionsFromAccept(s)},[s]),xt=reactExports.useMemo(function(){return typeof dt=="function"?dt:noop},[dt]),kt=reactExports.useMemo(function(){return typeof ht=="function"?ht:noop},[ht]),Dt=reactExports.useRef(null),Ot=reactExports.useRef(null),Bt=reactExports.useReducer(reducer,initialState),Ft=_slicedToArray(Bt,2),Mt=Ft[0],vt=Ft[1],Rt=Mt.isFocused,$t=Mt.isFileDialogActive,_t=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&$&&canUseFileSystemAccessAPI()),rt=function(){!_t.current&&$t&&setTimeout(function(){if(Ot.current){var It=Ot.current.files;It.length||(vt({type:"closeDialog"}),kt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",rt,!1),function(){window.removeEventListener("focus",rt,!1)}},[Ot,$t,kt,_t]);var at=reactExports.useRef([]),gt=function(It){Dt.current&&Dt.current.contains(It.target)||(It.preventDefault(),at.current=[])};reactExports.useEffect(function(){return ct&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",gt,!1)),function(){ct&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",gt))}},[Dt,ct]),reactExports.useEffect(function(){return!a&&_e&&Dt.current&&Dt.current.focus(),function(){}},[Dt,_e,a]);var wt=reactExports.useCallback(function(zt){lt?lt(zt):console.error(zt)},[lt]),St=reactExports.useCallback(function(zt){zt.preventDefault(),zt.persist(),Ut(zt),at.current=[].concat(_toConsumableArray(at.current),[zt.target]),isEvtWithFiles(zt)&&Promise.resolve(o(zt)).then(function(It){if(!(isPropagationStopped(zt)&&!it)){var dn=It.length,un=dn>0&&allFilesAccepted({files:It,accept:Et,minSize:d,maxSize:c,multiple:g,maxFiles:h,validator:mt}),Sn=dn>0&&!un;vt({isDragAccept:un,isDragReject:Sn,isDragActive:!0,type:"setDraggedFiles"}),b&&b(zt)}}).catch(function(It){return wt(It)})},[o,b,wt,it,Et,d,c,g,h,mt]),Tt=reactExports.useCallback(function(zt){zt.preventDefault(),zt.persist(),Ut(zt);var It=isEvtWithFiles(zt);if(It&&zt.dataTransfer)try{zt.dataTransfer.dropEffect="copy"}catch{}return It&&et&&et(zt),!1},[et,it]),Lt=reactExports.useCallback(function(zt){zt.preventDefault(),zt.persist(),Ut(zt);var It=at.current.filter(function(un){return Dt.current&&Dt.current.contains(un)}),dn=It.indexOf(zt.target);dn!==-1&&It.splice(dn,1),at.current=It,!(It.length>0)&&(vt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(zt)&&_&&_(zt))},[Dt,_,it]),Kt=reactExports.useCallback(function(zt,It){var dn=[],un=[];zt.forEach(function(Sn){var kn=fileAccepted(Sn,Et),Pn=_slicedToArray(kn,2),vn=Pn[0],wn=Pn[1],Rn=fileMatchSize(Sn,d,c),Mn=_slicedToArray(Rn,2),sn=Mn[0],Gt=Mn[1],Xt=mt?mt(Sn):null;if(vn&&sn&&!Xt)dn.push(Sn);else{var mn=[wn,Gt];Xt&&(mn=mn.concat(Xt)),un.push({file:Sn,errors:mn.filter(function(In){return In})})}}),(!g&&dn.length>1||g&&h>=1&&dn.length>h)&&(dn.forEach(function(Sn){un.push({file:Sn,errors:[TOO_MANY_FILES_REJECTION]})}),dn.splice(0)),vt({acceptedFiles:dn,fileRejections:un,isDragReject:un.length>0,type:"setFiles"}),nt&&nt(dn,un,It),un.length>0&&ot&&ot(un,It),dn.length>0&&st&&st(dn,It)},[vt,g,Et,d,c,h,nt,st,ot,mt]),en=reactExports.useCallback(function(zt){zt.preventDefault(),zt.persist(),Ut(zt),at.current=[],isEvtWithFiles(zt)&&Promise.resolve(o(zt)).then(function(It){isPropagationStopped(zt)&&!it||Kt(It,zt)}).catch(function(It){return wt(It)}),vt({type:"reset"})},[o,Kt,wt,it]),Qt=reactExports.useCallback(function(){if(_t.current){vt({type:"openDialog"}),xt();var zt={multiple:g,types:ft};window.showOpenFilePicker(zt).then(function(It){return o(It)}).then(function(It){Kt(It,null),vt({type:"closeDialog"})}).catch(function(It){isAbort(It)?(kt(It),vt({type:"closeDialog"})):isSecurityError(It)?(_t.current=!1,Ot.current?(Ot.current.value=null,Ot.current.click()):wt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):wt(It)});return}Ot.current&&(vt({type:"openDialog"}),xt(),Ot.current.value=null,Ot.current.click())},[vt,xt,kt,$,Kt,wt,ft,g]),rn=reactExports.useCallback(function(zt){!Dt.current||!Dt.current.isEqualNode(zt.target)||(zt.key===" "||zt.key==="Enter"||zt.keyCode===32||zt.keyCode===13)&&(zt.preventDefault(),Qt())},[Dt,Qt]),on=reactExports.useCallback(function(){vt({type:"focus"})},[]),ln=reactExports.useCallback(function(){vt({type:"blur"})},[]),Wt=reactExports.useCallback(function(){pt||(isIeOrEdge()?setTimeout(Qt,0):Qt())},[pt,Qt]),Ht=function(It){return a?null:It},yt=function(It){return tt?null:Ht(It)},Ct=function(It){return ut?null:Ht(It)},Ut=function(It){it&&It.stopPropagation()},Vt=reactExports.useMemo(function(){return function(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It=zt.refKey,dn=It===void 0?"ref":It,un=zt.role,Sn=zt.onKeyDown,kn=zt.onFocus,Pn=zt.onBlur,vn=zt.onClick,wn=zt.onDragEnter,Rn=zt.onDragOver,Mn=zt.onDragLeave,sn=zt.onDrop,Gt=_objectWithoutProperties(zt,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:yt(composeEventHandlers(Sn,rn)),onFocus:yt(composeEventHandlers(kn,on)),onBlur:yt(composeEventHandlers(Pn,ln)),onClick:Ht(composeEventHandlers(vn,Wt)),onDragEnter:Ct(composeEventHandlers(wn,St)),onDragOver:Ct(composeEventHandlers(Rn,Tt)),onDragLeave:Ct(composeEventHandlers(Mn,Lt)),onDrop:Ct(composeEventHandlers(sn,en)),role:typeof un=="string"&&un!==""?un:"presentation"},dn,Dt),!a&&!tt?{tabIndex:0}:{}),Gt)}},[Dt,rn,on,ln,Wt,St,Tt,Lt,en,tt,ut,a]),tn=reactExports.useCallback(function(zt){zt.stopPropagation()},[]),cn=reactExports.useMemo(function(){return function(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It=zt.refKey,dn=It===void 0?"ref":It,un=zt.onChange,Sn=zt.onClick,kn=_objectWithoutProperties(zt,_excluded4),Pn=_defineProperty({accept:Et,multiple:g,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ht(composeEventHandlers(un,en)),onClick:Ht(composeEventHandlers(Sn,tn)),tabIndex:-1},dn,Ot);return _objectSpread(_objectSpread({},Pn),kn)}},[Ot,s,g,en,a]);return _objectSpread(_objectSpread({},Mt),{},{isFocused:Rt&&!a,getRootProps:Vt,getInputProps:cn,rootRef:Dt,inputRef:Ot,open:Ht(Qt)})}function reducer(e,i){switch(i.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:i.isDragActive,isDragAccept:i.isDragAccept,isDragReject:i.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:i.acceptedFiles,fileRejections:i.fileRejections,isDragReject:i.isDragReject});case"reset":return _objectSpread({},initialState);default:return e}}function noop(){}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(i,s){module.exports=i.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,i)=>{var Mn;Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.RenderingIntentFlag=i.PromiseCapability=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.MAX_IMAGE_SIZE_TO_CACHE=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.BASELINE_FACTOR=i.AnnotationType=i.AnnotationReplyType=i.AnnotationPrefix=i.AnnotationMode=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.assert=vt,i.bytesToString=en,i.createValidAbsoluteUrl=$t,i.getModificationDate=un,i.getUuid=wn,i.getVerbosityLevel=Ot,i.info=Bt,i.isArrayBuffer=It,i.isArrayEqual=dn,i.isNodeJS=void 0,i.normalizeUnicode=vn,i.objectFromMap=ln,i.objectSize=on,i.setVerbosityLevel=Dt,i.shadow=_t,i.string32=rn,i.stringToBytes=Qt,i.stringToPDFString=tn,i.stringToUTF8String=cn,i.unreachable=Mt,i.utf8StringToString=zt,i.warn=Ft;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=s;const a=[1,0,0,1,0,0];i.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=o;const c=1e7;i.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;i.LINE_FACTOR=d;const g=.35;i.LINE_DESCENT_FACTOR=g;const h=g/d;i.BASELINE_FACTOR=h;const b={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=b;const _={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=_;const et="pdfjs_internal_editor_";i.AnnotationEditorPrefix=et;const nt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};i.AnnotationEditorType=nt;const st={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};i.AnnotationEditorParamsType=st;const ot={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=ot;const ht={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=ht;const dt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=dt;const $={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=$;const _e={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=_e;const ct={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=ct;const pt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=pt;const tt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=tt;const ut={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=ut;const it={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=it;const lt={O:"PageOpen",C:"PageClose"};i.PageActionEventType=lt;const mt={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=mt;const Et={NONE:0,BINARY:1};i.CMapCompressionType=Et;const ft={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=ft;const xt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=xt;let kt=mt.WARNINGS;function Dt(sn){Number.isInteger(sn)&&(kt=sn)}function Ot(){return kt}function Bt(sn){kt>=mt.INFOS&&console.log(`Info: ${sn}`)}function Ft(sn){kt>=mt.WARNINGS&&console.log(`Warning: ${sn}`)}function Mt(sn){throw new Error(sn)}function vt(sn,Gt){sn||Mt(Gt)}function Rt(sn){switch(sn==null?void 0:sn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function $t(sn,Gt=null,Xt=null){if(!sn)return null;try{if(Xt&&typeof sn=="string"){if(Xt.addDefaultProtocol&&sn.startsWith("www.")){const In=sn.match(/\./g);(In==null?void 0:In.length)>=2&&(sn=`http://${sn}`)}if(Xt.tryConvertEncoding)try{sn=cn(sn)}catch{}}const mn=Gt?new URL(sn,Gt):new URL(sn);if(Rt(mn))return mn}catch{}return null}function _t(sn,Gt,Xt,mn=!1){return Object.defineProperty(sn,Gt,{value:Xt,enumerable:!mn,configurable:!0,writable:!1}),Xt}const rt=function(){function Gt(Xt,mn){this.constructor===Gt&&Mt("Cannot initialize BaseException."),this.message=Xt,this.name=mn}return Gt.prototype=new Error,Gt.constructor=Gt,Gt}();i.BaseException=rt;class at extends rt{constructor(Gt,Xt){super(Gt,"PasswordException"),this.code=Xt}}i.PasswordException=at;class gt extends rt{constructor(Gt,Xt){super(Gt,"UnknownErrorException"),this.details=Xt}}i.UnknownErrorException=gt;class wt extends rt{constructor(Gt){super(Gt,"InvalidPDFException")}}i.InvalidPDFException=wt;class St extends rt{constructor(Gt){super(Gt,"MissingPDFException")}}i.MissingPDFException=St;class Tt extends rt{constructor(Gt,Xt){super(Gt,"UnexpectedResponseException"),this.status=Xt}}i.UnexpectedResponseException=Tt;class Lt extends rt{constructor(Gt){super(Gt,"FormatError")}}i.FormatError=Lt;class Kt extends rt{constructor(Gt){super(Gt,"AbortException")}}i.AbortException=Kt;function en(sn){(typeof sn!="object"||(sn==null?void 0:sn.length)===void 0)&&Mt("Invalid argument for bytesToString");const Gt=sn.length,Xt=8192;if(Gt<Xt)return String.fromCharCode.apply(null,sn);const mn=[];for(let In=0;In<Gt;In+=Xt){const Fn=Math.min(In+Xt,Gt),Pt=sn.subarray(In,Fn);mn.push(String.fromCharCode.apply(null,Pt))}return mn.join("")}function Qt(sn){typeof sn!="string"&&Mt("Invalid argument for stringToBytes");const Gt=sn.length,Xt=new Uint8Array(Gt);for(let mn=0;mn<Gt;++mn)Xt[mn]=sn.charCodeAt(mn)&255;return Xt}function rn(sn){return String.fromCharCode(sn>>24&255,sn>>16&255,sn>>8&255,sn&255)}function on(sn){return Object.keys(sn).length}function ln(sn){const Gt=Object.create(null);for(const[Xt,mn]of sn)Gt[Xt]=mn;return Gt}function Wt(){const sn=new Uint8Array(4);return sn[0]=1,new Uint32Array(sn.buffer,0,1)[0]===1}function Ht(){try{return new Function(""),!0}catch{return!1}}class yt{static get isLittleEndian(){return _t(this,"isLittleEndian",Wt())}static get isEvalSupported(){return _t(this,"isEvalSupported",Ht())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_t(this,"platform",{isWin:!1,isMac:!1}):_t(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Gt,Xt;return _t(this,"isCSSRoundSupported",(Xt=(Gt=globalThis.CSS)==null?void 0:Gt.supports)==null?void 0:Xt.call(Gt,"width: round(1.5px, 1px)"))}}i.FeatureTest=yt;const Ct=[...Array(256).keys()].map(sn=>sn.toString(16).padStart(2,"0"));class Ut{static makeHexColor(Gt,Xt,mn){return`#${Ct[Gt]}${Ct[Xt]}${Ct[mn]}`}static scaleMinMax(Gt,Xt){let mn;Gt[0]?(Gt[0]<0&&(mn=Xt[0],Xt[0]=Xt[1],Xt[1]=mn),Xt[0]*=Gt[0],Xt[1]*=Gt[0],Gt[3]<0&&(mn=Xt[2],Xt[2]=Xt[3],Xt[3]=mn),Xt[2]*=Gt[3],Xt[3]*=Gt[3]):(mn=Xt[0],Xt[0]=Xt[2],Xt[2]=mn,mn=Xt[1],Xt[1]=Xt[3],Xt[3]=mn,Gt[1]<0&&(mn=Xt[2],Xt[2]=Xt[3],Xt[3]=mn),Xt[2]*=Gt[1],Xt[3]*=Gt[1],Gt[2]<0&&(mn=Xt[0],Xt[0]=Xt[1],Xt[1]=mn),Xt[0]*=Gt[2],Xt[1]*=Gt[2]),Xt[0]+=Gt[4],Xt[1]+=Gt[4],Xt[2]+=Gt[5],Xt[3]+=Gt[5]}static transform(Gt,Xt){return[Gt[0]*Xt[0]+Gt[2]*Xt[1],Gt[1]*Xt[0]+Gt[3]*Xt[1],Gt[0]*Xt[2]+Gt[2]*Xt[3],Gt[1]*Xt[2]+Gt[3]*Xt[3],Gt[0]*Xt[4]+Gt[2]*Xt[5]+Gt[4],Gt[1]*Xt[4]+Gt[3]*Xt[5]+Gt[5]]}static applyTransform(Gt,Xt){const mn=Gt[0]*Xt[0]+Gt[1]*Xt[2]+Xt[4],In=Gt[0]*Xt[1]+Gt[1]*Xt[3]+Xt[5];return[mn,In]}static applyInverseTransform(Gt,Xt){const mn=Xt[0]*Xt[3]-Xt[1]*Xt[2],In=(Gt[0]*Xt[3]-Gt[1]*Xt[2]+Xt[2]*Xt[5]-Xt[4]*Xt[3])/mn,Fn=(-Gt[0]*Xt[1]+Gt[1]*Xt[0]+Xt[4]*Xt[1]-Xt[5]*Xt[0])/mn;return[In,Fn]}static getAxialAlignedBoundingBox(Gt,Xt){const mn=this.applyTransform(Gt,Xt),In=this.applyTransform(Gt.slice(2,4),Xt),Fn=this.applyTransform([Gt[0],Gt[3]],Xt),Pt=this.applyTransform([Gt[2],Gt[1]],Xt);return[Math.min(mn[0],In[0],Fn[0],Pt[0]),Math.min(mn[1],In[1],Fn[1],Pt[1]),Math.max(mn[0],In[0],Fn[0],Pt[0]),Math.max(mn[1],In[1],Fn[1],Pt[1])]}static inverseTransform(Gt){const Xt=Gt[0]*Gt[3]-Gt[1]*Gt[2];return[Gt[3]/Xt,-Gt[1]/Xt,-Gt[2]/Xt,Gt[0]/Xt,(Gt[2]*Gt[5]-Gt[4]*Gt[3])/Xt,(Gt[4]*Gt[1]-Gt[5]*Gt[0])/Xt]}static singularValueDecompose2dScale(Gt){const Xt=[Gt[0],Gt[2],Gt[1],Gt[3]],mn=Gt[0]*Xt[0]+Gt[1]*Xt[2],In=Gt[0]*Xt[1]+Gt[1]*Xt[3],Fn=Gt[2]*Xt[0]+Gt[3]*Xt[2],Pt=Gt[2]*Xt[1]+Gt[3]*Xt[3],nn=(mn+Pt)/2,pn=Math.sqrt((mn+Pt)**2-4*(mn*Pt-Fn*In))/2,xn=nn+pn||1,An=nn-pn||1;return[Math.sqrt(xn),Math.sqrt(An)]}static normalizeRect(Gt){const Xt=Gt.slice(0);return Gt[0]>Gt[2]&&(Xt[0]=Gt[2],Xt[2]=Gt[0]),Gt[1]>Gt[3]&&(Xt[1]=Gt[3],Xt[3]=Gt[1]),Xt}static intersect(Gt,Xt){const mn=Math.max(Math.min(Gt[0],Gt[2]),Math.min(Xt[0],Xt[2])),In=Math.min(Math.max(Gt[0],Gt[2]),Math.max(Xt[0],Xt[2]));if(mn>In)return null;const Fn=Math.max(Math.min(Gt[1],Gt[3]),Math.min(Xt[1],Xt[3])),Pt=Math.min(Math.max(Gt[1],Gt[3]),Math.max(Xt[1],Xt[3]));return Fn>Pt?null:[mn,Fn,In,Pt]}static bezierBoundingBox(Gt,Xt,mn,In,Fn,Pt,nn,pn){const xn=[],An=[[],[]];let gn,At,bt,jt,Jt,Zt,an,hn;for(let Cn=0;Cn<2;++Cn){if(Cn===0?(At=6*Gt-12*mn+6*Fn,gn=-3*Gt+9*mn-9*Fn+3*nn,bt=3*mn-3*Gt):(At=6*Xt-12*In+6*Pt,gn=-3*Xt+9*In-9*Pt+3*pn,bt=3*In-3*Xt),Math.abs(gn)<1e-12){if(Math.abs(At)<1e-12)continue;jt=-bt/At,0<jt&&jt<1&&xn.push(jt);continue}an=At*At-4*bt*gn,hn=Math.sqrt(an),!(an<0)&&(Jt=(-At+hn)/(2*gn),0<Jt&&Jt<1&&xn.push(Jt),Zt=(-At-hn)/(2*gn),0<Zt&&Zt<1&&xn.push(Zt))}let bn=xn.length,yn;const fn=bn;for(;bn--;)jt=xn[bn],yn=1-jt,An[0][bn]=yn*yn*yn*Gt+3*yn*yn*jt*mn+3*yn*jt*jt*Fn+jt*jt*jt*nn,An[1][bn]=yn*yn*yn*Xt+3*yn*yn*jt*In+3*yn*jt*jt*Pt+jt*jt*jt*pn;return An[0][fn]=Gt,An[1][fn]=Xt,An[0][fn+1]=nn,An[1][fn+1]=pn,An[0].length=An[1].length=fn+2,[Math.min(...An[0]),Math.min(...An[1]),Math.max(...An[0]),Math.max(...An[1])]}}i.Util=Ut;const Vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function tn(sn){if(sn[0]>="ï"){let Xt;if(sn[0]==="þ"&&sn[1]==="ÿ"?Xt="utf-16be":sn[0]==="ÿ"&&sn[1]==="þ"?Xt="utf-16le":sn[0]==="ï"&&sn[1]==="»"&&sn[2]==="¿"&&(Xt="utf-8"),Xt)try{const mn=new TextDecoder(Xt,{fatal:!0}),In=Qt(sn);return mn.decode(In)}catch(mn){Ft(`stringToPDFString: "${mn}".`)}}const Gt=[];for(let Xt=0,mn=sn.length;Xt<mn;Xt++){const In=Vt[sn.charCodeAt(Xt)];Gt.push(In?String.fromCharCode(In):sn.charAt(Xt))}return Gt.join("")}function cn(sn){return decodeURIComponent(escape(sn))}function zt(sn){return unescape(encodeURIComponent(sn))}function It(sn){return typeof sn=="object"&&(sn==null?void 0:sn.byteLength)!==void 0}function dn(sn,Gt){if(sn.length!==Gt.length)return!1;for(let Xt=0,mn=sn.length;Xt<mn;Xt++)if(sn[Xt]!==Gt[Xt])return!1;return!0}function un(sn=new Date){return[sn.getUTCFullYear().toString(),(sn.getUTCMonth()+1).toString().padStart(2,"0"),sn.getUTCDate().toString().padStart(2,"0"),sn.getUTCHours().toString().padStart(2,"0"),sn.getUTCMinutes().toString().padStart(2,"0"),sn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Sn{constructor(){qt(this,Mn,!1);this.promise=new Promise((Gt,Xt)=>{this.resolve=mn=>{Yt(this,Mn,!0),Gt(mn)},this.reject=mn=>{Yt(this,Mn,!0),Xt(mn)}})}get settled(){return j(this,Mn)}}Mn=new WeakMap,i.PromiseCapability=Sn;let kn=null,Pn=null;function vn(sn){return kn||(kn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pn=new Map([["ﬅ","ſt"]])),sn.replaceAll(kn,(Gt,Xt,mn)=>Xt?Xt.normalize("NFKC"):Pn.get(mn))}function wn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const sn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(sn);else for(let Gt=0;Gt<32;Gt++)sn[Gt]=Math.floor(Math.random()*255);return en(sn)}const Rn="pdfjs_internal_id_";i.AnnotationPrefix=Rn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,s,a,o,Gn,rr,g,h,b,_,et,nt,st,ot,ht,sr,$,_e,_r,pt,tt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(it){if(typeof it=="string"||it instanceof URL?it={url:it}:(0,_util.isArrayBuffer)(it)&&(it={data:it}),typeof it!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!it.url&&!it.data&&!it.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const lt=new PDFDocumentLoadingTask,{docId:mt}=lt,Et=it.url?getUrlProp(it.url):null,ft=it.data?getDataProp(it.data):null,xt=it.httpHeaders||null,kt=it.withCredentials===!0,Dt=it.password??null,Ot=it.range instanceof PDFDataRangeTransport?it.range:null,Bt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ft=it.worker instanceof PDFWorker?it.worker:null;const Mt=it.verbosity,vt=typeof it.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(it.docBaseUrl)?it.docBaseUrl:null,Rt=typeof it.cMapUrl=="string"?it.cMapUrl:null,$t=it.cMapPacked!==!1,_t=it.CMapReaderFactory||DefaultCMapReaderFactory,rt=typeof it.standardFontDataUrl=="string"?it.standardFontDataUrl:null,at=it.StandardFontDataFactory||DefaultStandardFontDataFactory,gt=it.stopAtErrors!==!0,wt=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,St=it.isEvalSupported!==!1,Tt=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!_util.isNodeJS,Lt=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,Kt=typeof it.disableFontFace=="boolean"?it.disableFontFace:_util.isNodeJS,en=it.fontExtraProperties===!0,Qt=it.enableXfa===!0,rn=it.ownerDocument||globalThis.document,on=it.disableRange===!0,ln=it.disableStream===!0,Wt=it.disableAutoFetch===!0,Ht=it.pdfBug===!0,yt=Ot?Ot.length:it.length??NaN,Ct=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!_util.isNodeJS&&!Kt,Ut=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:_t===_display_utils.DOMCMapReaderFactory&&at===_display_utils.DOMStandardFontDataFactory&&Rt&&rt&&(0,_display_utils.isValidFetchUrl)(Rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(rt,document.baseURI),Vt=it.canvasFactory||new DefaultCanvasFactory({ownerDocument:rn}),tn=it.filterFactory||new DefaultFilterFactory({docId:mt,ownerDocument:rn}),cn=null;(0,_util.setVerbosityLevel)(Mt);const zt={canvasFactory:Vt,filterFactory:tn};if(Ut||(zt.cMapReaderFactory=new _t({baseUrl:Rt,isCompressed:$t}),zt.standardFontDataFactory=new at({baseUrl:rt})),!Ft){const un={verbosity:Mt,port:_worker_options.GlobalWorkerOptions.workerPort};Ft=un.port?PDFWorker.fromPort(un):new PDFWorker(un),lt._worker=Ft}const It={docId:mt,apiVersion:"3.11.174",data:ft,password:Dt,disableAutoFetch:Wt,rangeChunkSize:Bt,length:yt,docBaseUrl:vt,enableXfa:Qt,evaluatorOptions:{maxImageSize:wt,disableFontFace:Kt,ignoreErrors:gt,isEvalSupported:St,isOffscreenCanvasSupported:Tt,canvasMaxAreaInBytes:Lt,fontExtraProperties:en,useSystemFonts:Ct,cMapUrl:Ut?Rt:null,standardFontDataUrl:Ut?rt:null}},dn={ignoreErrors:gt,isEvalSupported:St,disableFontFace:Kt,fontExtraProperties:en,enableXfa:Qt,ownerDocument:rn,disableAutoFetch:Wt,pdfBug:Ht,styleElement:cn};return Ft.promise.then(function(){if(lt.destroyed)throw new Error("Loading aborted");const un=_fetchDocument(Ft,It),Sn=new Promise(function(kn){let Pn;Ot?Pn=new _transport_stream.PDFDataTransportStream({length:yt,initialData:Ot.initialData,progressiveDone:Ot.progressiveDone,contentDispositionFilename:Ot.contentDispositionFilename,disableRange:on,disableStream:ln},Ot):ft||(Pn=(wn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(wn):(0,_display_utils.isValidFetchUrl)(wn.url)?new _displayFetch_stream.PDFFetchStream(wn):new _displayNetwork.PDFNetworkStream(wn))({url:Et,length:yt,httpHeaders:xt,withCredentials:kt,rangeChunkSize:Bt,disableRange:on,disableStream:ln})),kn(Pn)});return Promise.all([un,Sn]).then(function([kn,Pn]){if(lt.destroyed)throw new Error("Loading aborted");const vn=new _message_handler.MessageHandler(mt,kn,Ft.port),wn=new WorkerTransport(vn,lt,Pn,dn,zt);lt._transport=wn,vn.send("Ready",null)})}).catch(lt._capability.reject),lt}async function _fetchDocument(it,lt){if(it.destroyed)throw new Error("Worker was destroyed");const mt=await it.messageHandler.sendWithPromise("GetDocRequest",lt,lt.data?[lt.data.buffer]:null);if(it.destroyed)throw new Error("Worker was destroyed");return mt}function getUrlProp(it){if(it instanceof URL)return it.href;try{return new URL(it,window.location).href}catch{if(_util.isNodeJS&&typeof it=="string")return it}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(_util.isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return(0,_util.stringToBytes)(it);if(typeof it=="object"&&!isNaN(it==null?void 0:it.length)||(0,_util.isArrayBuffer)(it))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const i=class i{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Jn(i,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var lt,mt,Et;this.destroyed=!0;try{(lt=this._worker)!=null&&lt.port&&(this._worker._pendingDestroy=!0),await((mt=this._transport)==null?void 0:mt.destroy())}catch(ft){throw(Et=this._worker)!=null&&Et.port&&delete this._worker._pendingDestroy,ft}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,qt(i,e,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(lt,mt,Et=!1,ft=null){this.length=lt,this.initialData=mt,this.progressiveDone=Et,this.contentDispositionFilename=ft,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(lt){this._rangeListeners.push(lt)}addProgressListener(lt){this._progressListeners.push(lt)}addProgressiveReadListener(lt){this._progressiveReadListeners.push(lt)}addProgressiveDoneListener(lt){this._progressiveDoneListeners.push(lt)}onDataRange(lt,mt){for(const Et of this._rangeListeners)Et(lt,mt)}onDataProgress(lt,mt){this._readyCapability.promise.then(()=>{for(const Et of this._progressListeners)Et(lt,mt)})}onDataProgressiveRead(lt){this._readyCapability.promise.then(()=>{for(const mt of this._progressiveReadListeners)mt(lt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const lt of this._progressiveDoneListeners)lt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(lt,mt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(lt,mt){this._pdfInfo=lt,this._transport=mt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Et=>{if(!Et)return Et;const ft=[];for(const xt in Et)ft.push(...Et[xt]);return ft}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(lt){return this._transport.getPage(lt)}getPageIndex(lt){return this._transport.getPageIndex(lt)}getDestinations(){return this._transport.getDestinations()}getDestination(lt){return this._transport.getDestination(lt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(lt=!1){return this._transport.startCleanup(lt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(lt,mt,Et,ft=!1){qt(this,o);qt(this,s,null);qt(this,a,!1);this._pageIndex=lt,this._pageInfo=mt,this._transport=Et,this._stats=ft?new _display_utils.StatTimer:null,this._pdfBug=ft,this.commonObjs=Et.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:lt,rotation:mt=this.rotate,offsetX:Et=0,offsetY:ft=0,dontFlip:xt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:lt,rotation:mt,offsetX:Et,offsetY:ft,dontFlip:xt})}getAnnotations({intent:lt="display"}={}){const mt=this._transport.getRenderingIntent(lt);return this._transport.getAnnotations(this._pageIndex,mt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var lt;return((lt=this._transport._htmlForXfa)==null?void 0:lt.children[this._pageIndex])||null}render({canvasContext:lt,viewport:mt,intent:Et="display",annotationMode:ft=_util.AnnotationMode.ENABLE,transform:xt=null,background:kt=null,optionalContentConfigPromise:Dt=null,annotationCanvasMap:Ot=null,pageColors:Bt=null,printAnnotationStorage:Ft=null}){var at,gt;(at=this._stats)==null||at.time("Overall");const Mt=this._transport.getRenderingIntent(Et,ft,Ft);Yt(this,a,!1),Nt(this,o,rr).call(this),Dt||(Dt=this._transport.getOptionalContentConfig());let vt=this._intentStates.get(Mt.cacheKey);vt||(vt=Object.create(null),this._intentStates.set(Mt.cacheKey,vt)),vt.streamReaderCancelTimeout&&(clearTimeout(vt.streamReaderCancelTimeout),vt.streamReaderCancelTimeout=null);const Rt=!!(Mt.renderingIntent&_util.RenderingIntentFlag.PRINT);vt.displayReadyCapability||(vt.displayReadyCapability=new _util.PromiseCapability,vt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(gt=this._stats)==null||gt.time("Page Request"),this._pumpOperatorList(Mt));const $t=wt=>{var St,Tt;vt.renderTasks.delete(_t),(this._maybeCleanupAfterRender||Rt)&&Yt(this,a,!0),Nt(this,o,Gn).call(this,!Rt),wt?(_t.capability.reject(wt),this._abortOperatorList({intentState:vt,reason:wt instanceof Error?wt:new Error(wt)})):_t.capability.resolve(),(St=this._stats)==null||St.timeEnd("Rendering"),(Tt=this._stats)==null||Tt.timeEnd("Overall")},_t=new InternalRenderTask({callback:$t,params:{canvasContext:lt,viewport:mt,transform:xt,background:kt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ot,operatorList:vt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Rt,pdfBug:this._pdfBug,pageColors:Bt});(vt.renderTasks||(vt.renderTasks=new Set)).add(_t);const rt=_t.task;return Promise.all([vt.displayReadyCapability.promise,Dt]).then(([wt,St])=>{var Tt;if(this.destroyed){$t();return}(Tt=this._stats)==null||Tt.time("Rendering"),_t.initializeGraphics({transparency:wt,optionalContentConfig:St}),_t.operatorListChanged()}).catch($t),rt}getOperatorList({intent:lt="display",annotationMode:mt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Et=null}={}){var Ot;function ft(){kt.operatorList.lastChunk&&(kt.opListReadCapability.resolve(kt.operatorList),kt.renderTasks.delete(Dt))}const xt=this._transport.getRenderingIntent(lt,mt,Et,!0);let kt=this._intentStates.get(xt.cacheKey);kt||(kt=Object.create(null),this._intentStates.set(xt.cacheKey,kt));let Dt;return kt.opListReadCapability||(Dt=Object.create(null),Dt.operatorListChanged=ft,kt.opListReadCapability=new _util.PromiseCapability,(kt.renderTasks||(kt.renderTasks=new Set)).add(Dt),kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ot=this._stats)==null||Ot.time("Page Request"),this._pumpOperatorList(xt)),kt.opListReadCapability.promise}streamTextContent({includeMarkedContent:lt=!1,disableNormalization:mt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:lt===!0,disableNormalization:mt===!0},{highWaterMark:100,size(ft){return ft.items.length}})}getTextContent(lt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Et=>_xfa_text.XfaText.textContent(Et));const mt=this.streamTextContent(lt);return new Promise(function(Et,ft){function xt(){kt.read().then(function({value:Ot,done:Bt}){if(Bt){Et(Dt);return}Object.assign(Dt.styles,Ot.styles),Dt.items.push(...Ot.items),xt()},ft)}const kt=mt.getReader(),Dt={items:[],styles:Object.create(null)};xt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const lt=[];for(const mt of this._intentStates.values())if(this._abortOperatorList({intentState:mt,reason:new Error("Page was destroyed."),force:!0}),!mt.opListReadCapability)for(const Et of mt.renderTasks)lt.push(Et.completed),Et.cancel();return this.objs.clear(),Yt(this,a,!1),Nt(this,o,rr).call(this),Promise.all(lt)}cleanup(lt=!1){Yt(this,a,!0);const mt=Nt(this,o,Gn).call(this,!1);return lt&&mt&&this._stats&&(this._stats=new _display_utils.StatTimer),mt}_startRenderPage(lt,mt){var ft,xt;const Et=this._intentStates.get(mt);Et&&((ft=this._stats)==null||ft.timeEnd("Page Request"),(xt=Et.displayReadyCapability)==null||xt.resolve(lt))}_renderPageChunk(lt,mt){for(let Et=0,ft=lt.length;Et<ft;Et++)mt.operatorList.fnArray.push(lt.fnArray[Et]),mt.operatorList.argsArray.push(lt.argsArray[Et]);mt.operatorList.lastChunk=lt.lastChunk,mt.operatorList.separateAnnots=lt.separateAnnots;for(const Et of mt.renderTasks)Et.operatorListChanged();lt.lastChunk&&Nt(this,o,Gn).call(this,!0)}_pumpOperatorList({renderingIntent:lt,cacheKey:mt,annotationStorageSerializable:Et}){const{map:ft,transfers:xt}=Et,Dt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:lt,cacheKey:mt,annotationStorage:ft},xt).getReader(),Ot=this._intentStates.get(mt);Ot.streamReader=Dt;const Bt=()=>{Dt.read().then(({value:Ft,done:Mt})=>{if(Mt){Ot.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ft,Ot),Bt())},Ft=>{if(Ot.streamReader=null,!this._transport.destroyed){if(Ot.operatorList){Ot.operatorList.lastChunk=!0;for(const Mt of Ot.renderTasks)Mt.operatorListChanged();Nt(this,o,Gn).call(this,!0)}if(Ot.displayReadyCapability)Ot.displayReadyCapability.reject(Ft);else if(Ot.opListReadCapability)Ot.opListReadCapability.reject(Ft);else throw Ft}})};Bt()}_abortOperatorList({intentState:lt,reason:mt,force:Et=!1}){if(lt.streamReader){if(lt.streamReaderCancelTimeout&&(clearTimeout(lt.streamReaderCancelTimeout),lt.streamReaderCancelTimeout=null),!Et){if(lt.renderTasks.size>0)return;if(mt instanceof _display_utils.RenderingCancelledException){let ft=RENDERING_CANCELLED_TIMEOUT;mt.extraDelay>0&&mt.extraDelay<1e3&&(ft+=mt.extraDelay),lt.streamReaderCancelTimeout=setTimeout(()=>{lt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:lt,reason:mt,force:!0})},ft);return}}if(lt.streamReader.cancel(new _util.AbortException(mt.message)).catch(()=>{}),lt.streamReader=null,!this._transport.destroyed){for(const[ft,xt]of this._intentStates)if(xt===lt){this._intentStates.delete(ft);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,a=new WeakMap,o=new WeakSet,Gn=function(lt=!1){if(Nt(this,o,rr).call(this),!j(this,a)||this.destroyed)return!1;if(lt)return Yt(this,s,setTimeout(()=>{Yt(this,s,null),Nt(this,o,Gn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:mt,operatorList:Et}of this._intentStates.values())if(mt.size>0||!Et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Yt(this,a,!1),!0},rr=function(){j(this,s)&&(clearTimeout(j(this,s)),Yt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){qt(this,g,new Set);qt(this,h,Promise.resolve())}postMessage(lt,mt){const Et={data:structuredClone(lt,mt?{transfer:mt}:null)};j(this,h).then(()=>{for(const ft of j(this,g))ft.call(this,Et)})}addEventListener(lt,mt){j(this,g).add(mt)}removeEventListener(lt,mt){j(this,g).delete(mt)}terminate(){j(this,g).clear()}}g=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const it=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;it&&(PDFWorkerUtil.fallbackWorkerSrc=it.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(it,lt){let mt;try{if(mt=new URL(it),!mt.origin||mt.origin==="null")return!1}catch{return!1}const Et=new URL(lt,mt);return mt.origin===Et.origin},PDFWorkerUtil.createCDNWrapper=function(it){const lt=`importScripts("${it}");`;return URL.createObjectURL(new Blob([lt]))}}const _PDFWorker=class _PDFWorker{constructor({name:it=null,port:lt=null,verbosity:mt=(0,_util.getVerbosityLevel)()}={}){var Et;if(this.name=it,this.destroyed=!1,this.verbosity=mt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,lt){if((Et=j(_PDFWorker,_))!=null&&Et.has(lt))throw new Error("Cannot use more than one PDFWorker per port.");(j(_PDFWorker,_)||Yt(_PDFWorker,_,new WeakMap)).set(lt,this),this._initializeFromPort(lt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(it){this._port=it,this._messageHandler=new _message_handler.MessageHandler("main","worker",it),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:it}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,it)||(it=PDFWorkerUtil.createCDNWrapper(new URL(it,window.location).href));const lt=new Worker(it),mt=new _message_handler.MessageHandler("main","worker",lt),Et=()=>{lt.removeEventListener("error",ft),mt.destroy(),lt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ft=()=>{this._webWorker||Et()};lt.addEventListener("error",ft),mt.on("test",kt=>{if(lt.removeEventListener("error",ft),this.destroyed){Et();return}kt?(this._messageHandler=mt,this._port=lt,this._webWorker=lt,this._readyCapability.resolve(),mt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),mt.destroy(),lt.terminate())}),mt.on("ready",kt=>{if(lt.removeEventListener("error",ft),this.destroyed){Et();return}try{xt()}catch{this._setupFakeWorker()}});const xt=()=>{const kt=new Uint8Array;mt.send("test",kt,[kt.buffer])};xt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(it=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const lt=new LoopbackPort;this._port=lt;const mt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Et=new _message_handler.MessageHandler(mt+"_worker",mt,lt);it.setup(Et,lt);const ft=new _message_handler.MessageHandler(mt,mt+"_worker",lt);this._messageHandler=ft,this._readyCapability.resolve(),ft.send("configure",{verbosity:this.verbosity})}).catch(it=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${it.message}".`))})}destroy(){var it;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(it=j(_PDFWorker,_))==null||it.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(it){var mt;if(!(it!=null&&it.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const lt=(mt=j(this,_))==null?void 0:mt.get(it.port);if(lt){if(lt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return lt}return new _PDFWorker(it)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var it;try{return((it=globalThis.pdfjsWorker)==null?void 0:it.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_=new WeakMap,qt(_PDFWorker,_);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(lt,mt,Et,ft,xt){qt(this,ht);qt(this,et,new Map);qt(this,nt,new Map);qt(this,st,new Map);qt(this,ot,null);this.messageHandler=lt,this.loadingTask=mt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:ft.ownerDocument,styleElement:ft.styleElement}),this._params=ft,this.canvasFactory=xt.canvasFactory,this.filterFactory=xt.filterFactory,this.cMapReaderFactory=xt.cMapReaderFactory,this.standardFontDataFactory=xt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Et,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(lt,mt=_util.AnnotationMode.ENABLE,Et=null,ft=!1){let xt=_util.RenderingIntentFlag.DISPLAY,kt=_annotation_storage.SerializableEmpty;switch(lt){case"any":xt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":xt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${lt}`)}switch(mt){case _util.AnnotationMode.DISABLE:xt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:xt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:xt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,kt=(xt&_util.RenderingIntentFlag.PRINT&&Et instanceof _annotation_storage.PrintAnnotationStorage?Et:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${mt}`)}return ft&&(xt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:xt,cacheKey:`${xt}_${kt.hash}`,annotationStorageSerializable:kt}}destroy(){var Et;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Et=j(this,ot))==null||Et.reject(new Error("Worker was destroyed during onPassword callback"));const lt=[];for(const ft of j(this,nt).values())lt.push(ft._destroy());j(this,nt).clear(),j(this,st).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const mt=this.messageHandler.sendWithPromise("Terminate",null);return lt.push(mt),Promise.all(lt).then(()=>{var ft;this.commonObjs.clear(),this.fontLoader.clear(),j(this,et).clear(),this.filterFactory.destroy(),(ft=this._networkStream)==null||ft.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:lt,loadingTask:mt}=this;lt.on("GetReader",(Et,ft)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=xt=>{this._lastProgress={loaded:xt.loaded,total:xt.total}},ft.onPull=()=>{this._fullReader.read().then(function({value:xt,done:kt}){if(kt){ft.close();return}(0,_util.assert)(xt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ft.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{ft.error(xt)})},ft.onCancel=xt=>{this._fullReader.cancel(xt),ft.ready.catch(kt=>{if(!this.destroyed)throw kt})}}),lt.on("ReaderHeadersReady",Et=>{const ft=new _util.PromiseCapability,xt=this._fullReader;return xt.headersReady.then(()=>{var kt;(!xt.isStreamingSupported||!xt.isRangeSupported)&&(this._lastProgress&&((kt=mt.onProgress)==null||kt.call(mt,this._lastProgress)),xt.onProgress=Dt=>{var Ot;(Ot=mt.onProgress)==null||Ot.call(mt,{loaded:Dt.loaded,total:Dt.total})}),ft.resolve({isStreamingSupported:xt.isStreamingSupported,isRangeSupported:xt.isRangeSupported,contentLength:xt.contentLength})},ft.reject),ft.promise}),lt.on("GetRangeReader",(Et,ft)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const xt=this._networkStream.getRangeReader(Et.begin,Et.end);if(!xt){ft.close();return}ft.onPull=()=>{xt.read().then(function({value:kt,done:Dt}){if(Dt){ft.close();return}(0,_util.assert)(kt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ft.enqueue(new Uint8Array(kt),1,[kt])}).catch(kt=>{ft.error(kt)})},ft.onCancel=kt=>{xt.cancel(kt),ft.ready.catch(Dt=>{if(!this.destroyed)throw Dt})}}),lt.on("GetDoc",({pdfInfo:Et})=>{this._numPages=Et.numPages,this._htmlForXfa=Et.htmlForXfa,delete Et.htmlForXfa,mt._capability.resolve(new PDFDocumentProxy(Et,this))}),lt.on("DocException",function(Et){let ft;switch(Et.name){case"PasswordException":ft=new _util.PasswordException(Et.message,Et.code);break;case"InvalidPDFException":ft=new _util.InvalidPDFException(Et.message);break;case"MissingPDFException":ft=new _util.MissingPDFException(Et.message);break;case"UnexpectedResponseException":ft=new _util.UnexpectedResponseException(Et.message,Et.status);break;case"UnknownErrorException":ft=new _util.UnknownErrorException(Et.message,Et.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}mt._capability.reject(ft)}),lt.on("PasswordRequest",Et=>{if(Yt(this,ot,new _util.PromiseCapability),mt.onPassword){const ft=xt=>{xt instanceof Error?j(this,ot).reject(xt):j(this,ot).resolve({password:xt})};try{mt.onPassword(ft,Et.code)}catch(xt){j(this,ot).reject(xt)}}else j(this,ot).reject(new _util.PasswordException(Et.message,Et.code));return j(this,ot).promise}),lt.on("DataLoaded",Et=>{var ft;(ft=mt.onProgress)==null||ft.call(mt,{loaded:Et.length,total:Et.length}),this.downloadInfoCapability.resolve(Et)}),lt.on("StartRenderPage",Et=>{if(this.destroyed)return;j(this,nt).get(Et.pageIndex)._startRenderPage(Et.transparency,Et.cacheKey)}),lt.on("commonobj",([Et,ft,xt])=>{var kt;if(!this.destroyed&&!this.commonObjs.has(Et))switch(ft){case"Font":const Dt=this._params;if("error"in xt){const Ft=xt.error;(0,_util.warn)(`Error during font loading: ${Ft}`),this.commonObjs.resolve(Et,Ft);break}const Ot=Dt.pdfBug&&((kt=globalThis.FontInspector)!=null&&kt.enabled)?(Ft,Mt)=>globalThis.FontInspector.fontAdded(Ft,Mt):null,Bt=new _font_loader.FontFaceObject(xt,{isEvalSupported:Dt.isEvalSupported,disableFontFace:Dt.disableFontFace,ignoreErrors:Dt.ignoreErrors,inspectFont:Ot});this.fontLoader.bind(Bt).catch(Ft=>lt.sendWithPromise("FontFallback",{id:Et})).finally(()=>{!Dt.fontExtraProperties&&Bt.data&&(Bt.data=null),this.commonObjs.resolve(Et,Bt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Et,xt);break;default:throw new Error(`Got unknown common object type ${ft}`)}}),lt.on("obj",([Et,ft,xt,kt])=>{var Ot;if(this.destroyed)return;const Dt=j(this,nt).get(ft);if(!Dt.objs.has(Et))switch(xt){case"Image":if(Dt.objs.resolve(Et,kt),kt){let Bt;if(kt.bitmap){const{width:Ft,height:Mt}=kt;Bt=Ft*Mt*4}else Bt=((Ot=kt.data)==null?void 0:Ot.length)||0;Bt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Dt._maybeCleanupAfterRender=!0)}break;case"Pattern":Dt.objs.resolve(Et,kt);break;default:throw new Error(`Got unknown object type ${xt}`)}}),lt.on("DocProgress",Et=>{var ft;this.destroyed||(ft=mt.onProgress)==null||ft.call(mt,{loaded:Et.loaded,total:Et.total})}),lt.on("FetchBuiltInCMap",Et=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Et):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),lt.on("FetchStandardFontData",Et=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Et):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Et;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:lt,transfers:mt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:lt,filename:((Et=this._fullReader)==null?void 0:Et.filename)??null},mt).finally(()=>{this.annotationStorage.resetModified()})}getPage(lt){if(!Number.isInteger(lt)||lt<=0||lt>this._numPages)return Promise.reject(new Error("Invalid page request."));const mt=lt-1,Et=j(this,st).get(mt);if(Et)return Et;const ft=this.messageHandler.sendWithPromise("GetPage",{pageIndex:mt}).then(xt=>{if(this.destroyed)throw new Error("Transport destroyed");const kt=new PDFPageProxy(mt,xt,this,this._params.pdfBug);return j(this,nt).set(mt,kt),kt});return j(this,st).set(mt,ft),ft}getPageIndex(lt){return typeof lt!="object"||lt===null||!Number.isInteger(lt.num)||lt.num<0||!Number.isInteger(lt.gen)||lt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:lt.num,gen:lt.gen})}getAnnotations(lt,mt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:lt,intent:mt})}getFieldObjects(){return Nt(this,ht,sr).call(this,"GetFieldObjects")}hasJSActions(){return Nt(this,ht,sr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(lt){return typeof lt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:lt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Nt(this,ht,sr).call(this,"GetDocJSActions")}getPageJSActions(lt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:lt})}getStructTree(lt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:lt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(lt=>new _optional_content_config.OptionalContentConfig(lt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const lt="GetMetadata",mt=j(this,et).get(lt);if(mt)return mt;const Et=this.messageHandler.sendWithPromise(lt,null).then(ft=>{var xt,kt;return{info:ft[0],metadata:ft[1]?new _metadata.Metadata(ft[1]):null,contentDispositionFilename:((xt=this._fullReader)==null?void 0:xt.filename)??null,contentLength:((kt=this._fullReader)==null?void 0:kt.contentLength)??null}});return j(this,et).set(lt,Et),Et}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(lt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const mt of j(this,nt).values())if(!mt.cleanup())throw new Error(`startCleanup: Page ${mt.pageNumber} is currently rendering.`);this.commonObjs.clear(),lt||this.fontLoader.clear(),j(this,et).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:lt,enableXfa:mt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:lt,enableXfa:mt})}}et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakSet,sr=function(lt,mt=null){const Et=j(this,et).get(lt);if(Et)return Et;const ft=this.messageHandler.sendWithPromise(lt,mt);return j(this,et).set(lt,ft),ft};class PDFObjects{constructor(){qt(this,_e);qt(this,$,Object.create(null))}get(lt,mt=null){if(mt){const ft=Nt(this,_e,_r).call(this,lt);return ft.capability.promise.then(()=>mt(ft.data)),null}const Et=j(this,$)[lt];if(!(Et!=null&&Et.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${lt}.`);return Et.data}has(lt){const mt=j(this,$)[lt];return(mt==null?void 0:mt.capability.settled)||!1}resolve(lt,mt=null){const Et=Nt(this,_e,_r).call(this,lt);Et.data=mt,Et.capability.resolve()}clear(){var lt;for(const mt in j(this,$)){const{data:Et}=j(this,$)[mt];(lt=Et==null?void 0:Et.bitmap)==null||lt.close()}Yt(this,$,Object.create(null))}}$=new WeakMap,_e=new WeakSet,_r=function(lt){var mt;return(mt=j(this,$))[lt]||(mt[lt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(lt){qt(this,pt,null);Yt(this,pt,lt),this.onContinue=null}get promise(){return j(this,pt).capability.promise}cancel(lt=0){j(this,pt).cancel(null,lt)}get separateAnnots(){const{separateAnnots:lt}=j(this,pt).operatorList;if(!lt)return!1;const{annotationCanvasMap:mt}=j(this,pt);return lt.form||lt.canvas&&(mt==null?void 0:mt.size)>0}}pt=new WeakMap,exports.RenderTask=RenderTask;const ut=class ut{constructor({callback:lt,params:mt,objs:Et,commonObjs:ft,annotationCanvasMap:xt,operatorList:kt,pageIndex:Dt,canvasFactory:Ot,filterFactory:Bt,useRequestAnimationFrame:Ft=!1,pdfBug:Mt=!1,pageColors:vt=null}){this.callback=lt,this.params=mt,this.objs=Et,this.commonObjs=ft,this.annotationCanvasMap=xt,this.operatorListIdx=null,this.operatorList=kt,this._pageIndex=Dt,this.canvasFactory=Ot,this.filterFactory=Bt,this._pdfBug=Mt,this.pageColors=vt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ft===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=mt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:lt=!1,optionalContentConfig:mt}){var Dt,Ot;if(this.cancelled)return;if(this._canvas){if(j(ut,tt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");j(ut,tt).add(this._canvas)}this._pdfBug&&((Dt=globalThis.StepperManager)!=null&&Dt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Et,viewport:ft,transform:xt,background:kt}=this.params;this.gfx=new _canvas.CanvasGraphics(Et,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:mt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:xt,viewport:ft,transparency:lt,background:kt}),this.operatorListIdx=0,this.graphicsReady=!0,(Ot=this.graphicsReadyCallback)==null||Ot.call(this)}cancel(lt=null,mt=0){var Et;this.running=!1,this.cancelled=!0,(Et=this.gfx)==null||Et.endDrawing(),j(ut,tt).delete(this._canvas),this.callback(lt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,mt))}operatorListChanged(){var lt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(lt=this.stepper)==null||lt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),j(ut,tt).delete(this._canvas),this.callback())))}};tt=new WeakMap,qt(ut,tt,new WeakSet);let InternalRenderTask=ut;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,i,s)=>{var b,_,et,ns,st;Object.defineProperty(i,"__esModule",{value:!0}),i.SerializableEmpty=i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var a=s(1),o=s(4),c=s(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});i.SerializableEmpty=d;class g{constructor(){qt(this,et);qt(this,b,!1);qt(this,_,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ht,dt){const $=j(this,_).get(ht);return $===void 0?dt:Object.assign(dt,$)}getRawValue(ht){return j(this,_).get(ht)}remove(ht){if(j(this,_).delete(ht),j(this,_).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const dt of j(this,_).values())if(dt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ht,dt){const $=j(this,_).get(ht);let _e=!1;if($!==void 0)for(const[ct,pt]of Object.entries(dt))$[ct]!==pt&&(_e=!0,$[ct]=pt);else _e=!0,j(this,_).set(ht,dt);_e&&Nt(this,et,ns).call(this),dt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(dt.constructor._type)}has(ht){return j(this,_).has(ht)}getAll(){return j(this,_).size>0?(0,a.objectFromMap)(j(this,_)):null}setAll(ht){for(const[dt,$]of Object.entries(ht))this.setValue(dt,$)}get size(){return j(this,_).size}resetModified(){j(this,b)&&(Yt(this,b,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(j(this,_).size===0)return d;const ht=new Map,dt=new c.MurmurHash3_64,$=[],_e=Object.create(null);let ct=!1;for(const[pt,tt]of j(this,_)){const ut=tt instanceof o.AnnotationEditor?tt.serialize(!1,_e):tt;ut&&(ht.set(pt,ut),dt.update(`${pt}:${JSON.stringify(ut)}`),ct||(ct=!!ut.bitmap))}if(ct)for(const pt of ht.values())pt.bitmap&&$.push(pt.bitmap);return ht.size>0?{map:ht,hash:dt.hexdigest(),transfers:$}:d}}b=new WeakMap,_=new WeakMap,et=new WeakSet,ns=function(){j(this,b)||(Yt(this,b,!0),typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=g;class h extends g{constructor(dt){super();qt(this,st);const{map:$,hash:_e,transfers:ct}=dt.serializable,pt=structuredClone($,ct?{transfer:ct}:null);Yt(this,st,{map:pt,hash:_e,transfers:ct})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return j(this,st)}}st=new WeakMap,i.PrintAnnotationStorage=h},(e,i,s)=>{var h,b,_,et,nt,st,ot,ht,dt,$,_e,ct,pt,tt,ut,xr,br,mt,Er,wr,is,rs,ss,Ar,as;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var a=s(5),o=s(1),c=s(6);const Ft=class Ft{constructor(vt){qt(this,ut);qt(this,h,"");qt(this,b,!1);qt(this,_,null);qt(this,et,null);qt(this,nt,null);qt(this,st,!1);qt(this,ot,null);qt(this,ht,this.focusin.bind(this));qt(this,dt,this.focusout.bind(this));qt(this,$,!1);qt(this,_e,!1);qt(this,ct,!1);Ln(this,"_initialOptions",Object.create(null));Ln(this,"_uiManager",null);Ln(this,"_focusEventsAllowed",!0);Ln(this,"_l10nPromise",null);qt(this,pt,!1);qt(this,tt,Ft._zIndex++);this.constructor===Ft&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=vt.parent,this.id=vt.id,this.width=this.height=null,this.pageIndex=vt.parent.pageIndex,this.name=vt.name,this.div=null,this._uiManager=vt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=vt.isCentered,this._structTreeParentId=null;const{rotation:Rt,rawDims:{pageWidth:$t,pageHeight:_t,pageX:rt,pageY:at}}=this.parent.viewport;this.rotation=Rt,this.pageRotation=(360+Rt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[$t,_t],this.pageTranslation=[rt,at];const[gt,wt]=this.parentDimensions;this.x=vt.x/gt,this.y=vt.y/wt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(vt){const Rt=new g({id:vt.parent.getNextId(),parent:vt.parent,uiManager:vt._uiManager});Rt.annotationElementId=vt.annotationElementId,Rt.deleted=!0,Rt._uiManager.addToAnnotationStorage(Rt)}static initialize(vt,Rt=null){if(Ft._l10nPromise||(Ft._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(_t=>[_t,vt.get(_t)]))),Rt!=null&&Rt.strings)for(const _t of Rt.strings)Ft._l10nPromise.set(_t,vt.get(_t));if(Ft._borderLineWidth!==-1)return;const $t=getComputedStyle(document.documentElement);Ft._borderLineWidth=parseFloat($t.getPropertyValue("--outline-width"))||0}static updateDefaultParams(vt,Rt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(vt){return!1}static paste(vt,Rt){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return j(this,pt)}set _isDraggable(vt){var Rt;Yt(this,pt,vt),(Rt=this.div)==null||Rt.classList.toggle("draggable",vt)}center(){const[vt,Rt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Rt/(vt*2),this.y+=this.width*vt/(Rt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Rt/(vt*2),this.y-=this.width*vt/(Rt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(vt){this._uiManager.addCommands(vt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=j(this,tt)}setParent(vt){vt!==null&&(this.pageIndex=vt.pageIndex,this.pageDimensions=vt.pageDimensions),this.parent=vt}focusin(vt){this._focusEventsAllowed&&(j(this,$)?Yt(this,$,!1):this.parent.setSelected(this))}focusout(vt){var $t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Rt=vt.relatedTarget;Rt!=null&&Rt.closest(`#${this.id}`)||(vt.preventDefault(),($t=this.parent)!=null&&$t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(vt,Rt,$t,_t){const[rt,at]=this.parentDimensions;[$t,_t]=this.screenToPageTranslation($t,_t),this.x=(vt+$t)/rt,this.y=(Rt+_t)/at,this.fixAndSetPosition()}translate(vt,Rt){Nt(this,ut,xr).call(this,this.parentDimensions,vt,Rt)}translateInPage(vt,Rt){Nt(this,ut,xr).call(this,this.pageDimensions,vt,Rt),this.div.scrollIntoView({block:"nearest"})}drag(vt,Rt){const[$t,_t]=this.parentDimensions;if(this.x+=vt/$t,this.y+=Rt/_t,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:St,y:Tt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,St,Tt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:rt,y:at}=this;const[gt,wt]=Nt(this,ut,br).call(this);rt+=gt,at+=wt,this.div.style.left=`${(100*rt).toFixed(2)}%`,this.div.style.top=`${(100*at).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[vt,Rt]=this.pageDimensions;let{x:$t,y:_t,width:rt,height:at}=this;switch(rt*=vt,at*=Rt,$t*=vt,_t*=Rt,this.rotation){case 0:$t=Math.max(0,Math.min(vt-rt,$t)),_t=Math.max(0,Math.min(Rt-at,_t));break;case 90:$t=Math.max(0,Math.min(vt-at,$t)),_t=Math.min(Rt,Math.max(rt,_t));break;case 180:$t=Math.min(vt,Math.max(rt,$t)),_t=Math.min(Rt,Math.max(at,_t));break;case 270:$t=Math.min(vt,Math.max(at,$t)),_t=Math.max(0,Math.min(Rt-rt,_t));break}this.x=$t/=vt,this.y=_t/=Rt;const[gt,wt]=Nt(this,ut,br).call(this);$t+=gt,_t+=wt;const{style:St}=this.div;St.left=`${(100*$t).toFixed(2)}%`,St.top=`${(100*_t).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(vt,Rt){var $t;return Nt($t=Ft,mt,Er).call($t,vt,Rt,this.parentRotation)}pageTranslationToScreen(vt,Rt){var $t;return Nt($t=Ft,mt,Er).call($t,vt,Rt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:vt,pageDimensions:[Rt,$t]}=this,_t=Rt*vt,rt=$t*vt;return o.FeatureTest.isCSSRoundSupported?[Math.round(_t),Math.round(rt)]:[_t,rt]}setDims(vt,Rt){var rt;const[$t,_t]=this.parentDimensions;this.div.style.width=`${(100*vt/$t).toFixed(2)}%`,j(this,st)||(this.div.style.height=`${(100*Rt/_t).toFixed(2)}%`),(rt=j(this,_))==null||rt.classList.toggle("small",vt<Ft.SMALL_EDITOR_SIZE||Rt<Ft.SMALL_EDITOR_SIZE)}fixDims(){const{style:vt}=this.div,{height:Rt,width:$t}=vt,_t=$t.endsWith("%"),rt=!j(this,st)&&Rt.endsWith("%");if(_t&&rt)return;const[at,gt]=this.parentDimensions;_t||(vt.width=`${(100*parseFloat($t)/at).toFixed(2)}%`),!j(this,st)&&!rt&&(vt.height=`${(100*parseFloat(Rt)/gt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(j(this,_))return;const vt=Yt(this,_,document.createElement("button"));vt.className="altText";const Rt=await Ft._l10nPromise.get("editor_alt_text_button_label");vt.textContent=Rt,vt.setAttribute("aria-label",Rt),vt.tabIndex="0",vt.addEventListener("contextmenu",c.noContextMenu),vt.addEventListener("pointerdown",$t=>$t.stopPropagation()),vt.addEventListener("click",$t=>{$t.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),vt.addEventListener("keydown",$t=>{$t.target===vt&&$t.key==="Enter"&&($t.preventDefault(),this._uiManager.editAltText(this))}),Nt(this,ut,Ar).call(this),this.div.append(vt),Ft.SMALL_EDITOR_SIZE||(Ft.SMALL_EDITOR_SIZE=Math.min(128,Math.round(vt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:j(this,h),decorative:j(this,b)}}set altTextData({altText:vt,decorative:Rt}){j(this,h)===vt&&j(this,b)===Rt||(Yt(this,h,vt),Yt(this,b,Rt),Nt(this,ut,Ar).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",j(this,ht)),this.div.addEventListener("focusout",j(this,dt));const[vt,Rt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Rt/vt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*vt/Rt).toFixed(2)}%`);const[$t,_t]=this.getInitialTranslation();return this.translate($t,_t),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(vt){const{isMac:Rt}=o.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&Rt){vt.preventDefault();return}Yt(this,$,!0),Nt(this,ut,as).call(this,vt)}moveInDOM(){var vt;(vt=this.parent)==null||vt.moveEditorInDOM(this)}_setParentAndPosition(vt,Rt,$t){vt.changeParent(this),this.x=Rt,this.y=$t,this.fixAndSetPosition()}getRect(vt,Rt){const $t=this.parentScale,[_t,rt]=this.pageDimensions,[at,gt]=this.pageTranslation,wt=vt/$t,St=Rt/$t,Tt=this.x*_t,Lt=this.y*rt,Kt=this.width*_t,en=this.height*rt;switch(this.rotation){case 0:return[Tt+wt+at,rt-Lt-St-en+gt,Tt+wt+Kt+at,rt-Lt-St+gt];case 90:return[Tt+St+at,rt-Lt+wt+gt,Tt+St+en+at,rt-Lt+wt+Kt+gt];case 180:return[Tt-wt-Kt+at,rt-Lt+St+gt,Tt-wt+at,rt-Lt+St+en+gt];case 270:return[Tt-St-en+at,rt-Lt-wt-Kt+gt,Tt-St+at,rt-Lt-wt+gt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(vt,Rt){const[$t,_t,rt,at]=vt,gt=rt-$t,wt=at-_t;switch(this.rotation){case 0:return[$t,Rt-at,gt,wt];case 90:return[$t,Rt-_t,wt,gt];case 180:return[rt,Rt-_t,gt,wt];case 270:return[rt,Rt-at,wt,gt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Yt(this,ct,!0)}disableEditMode(){Yt(this,ct,!1)}isInEditMode(){return j(this,ct)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var vt,Rt;(vt=this.div)==null||vt.addEventListener("focusin",j(this,ht)),(Rt=this.div)==null||Rt.addEventListener("focusout",j(this,dt))}serialize(vt=!1,Rt=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(vt,Rt,$t){const _t=new this.prototype.constructor({parent:Rt,id:Rt.getNextId(),uiManager:$t});_t.rotation=vt.rotation;const[rt,at]=_t.pageDimensions,[gt,wt,St,Tt]=_t.getRectInCurrentCoords(vt.rect,at);return _t.x=gt/rt,_t.y=wt/at,_t.width=St/rt,_t.height=Tt/at,_t}remove(){var vt;this.div.removeEventListener("focusin",j(this,ht)),this.div.removeEventListener("focusout",j(this,dt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(vt=j(this,_))==null||vt.remove(),Yt(this,_,null),Yt(this,et,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Nt(this,ut,is).call(this),j(this,ot).classList.remove("hidden"))}select(){var vt;this.makeResizable(),(vt=this.div)==null||vt.classList.add("selectedEditor")}unselect(){var vt,Rt,$t;(vt=j(this,ot))==null||vt.classList.add("hidden"),(Rt=this.div)==null||Rt.classList.remove("selectedEditor"),($t=this.div)!=null&&$t.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(vt,Rt){}disableEditing(){j(this,_)&&(j(this,_).hidden=!0)}enableEditing(){j(this,_)&&(j(this,_).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return j(this,_e)}set isEditing(vt){Yt(this,_e,vt),this.parent&&(vt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(vt,Rt){Yt(this,st,!0);const $t=vt/Rt,{style:_t}=this.div;_t.aspectRatio=$t,_t.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,b=new WeakMap,_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,pt=new WeakMap,tt=new WeakMap,ut=new WeakSet,xr=function([vt,Rt],$t,_t){[$t,_t]=this.screenToPageTranslation($t,_t),this.x+=$t/vt,this.y+=_t/Rt,this.fixAndSetPosition()},br=function(){const[vt,Rt]=this.parentDimensions,{_borderLineWidth:$t}=Ft,_t=$t/vt,rt=$t/Rt;switch(this.rotation){case 90:return[-_t,rt];case 180:return[_t,rt];case 270:return[_t,-rt];default:return[-_t,-rt]}},mt=new WeakSet,Er=function(vt,Rt,$t){switch($t){case 90:return[Rt,-vt];case 180:return[-vt,-Rt];case 270:return[-Rt,vt];default:return[vt,Rt]}},wr=function(vt){switch(vt){case 90:{const[Rt,$t]=this.pageDimensions;return[0,-Rt/$t,$t/Rt,0]}case 180:return[-1,0,0,-1];case 270:{const[Rt,$t]=this.pageDimensions;return[0,Rt/$t,-$t/Rt,0]}default:return[1,0,0,1]}},is=function(){if(j(this,ot))return;Yt(this,ot,document.createElement("div")),j(this,ot).classList.add("resizers");const vt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||vt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Rt of vt){const $t=document.createElement("div");j(this,ot).append($t),$t.classList.add("resizer",Rt),$t.addEventListener("pointerdown",Nt(this,ut,rs).bind(this,Rt)),$t.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(j(this,ot))},rs=function(vt,Rt){Rt.preventDefault();const{isMac:$t}=o.FeatureTest.platform;if(Rt.button!==0||Rt.ctrlKey&&$t)return;const _t=Nt(this,ut,ss).bind(this,vt),rt=this._isDraggable;this._isDraggable=!1;const at={passive:!0,capture:!0};window.addEventListener("pointermove",_t,at);const gt=this.x,wt=this.y,St=this.width,Tt=this.height,Lt=this.parent.div.style.cursor,Kt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Rt.target).cursor;const en=()=>{this._isDraggable=rt,window.removeEventListener("pointerup",en),window.removeEventListener("blur",en),window.removeEventListener("pointermove",_t,at),this.parent.div.style.cursor=Lt,this.div.style.cursor=Kt;const Qt=this.x,rn=this.y,on=this.width,ln=this.height;Qt===gt&&rn===wt&&on===St&&ln===Tt||this.addCommands({cmd:()=>{this.width=on,this.height=ln,this.x=Qt,this.y=rn;const[Wt,Ht]=this.parentDimensions;this.setDims(Wt*on,Ht*ln),this.fixAndSetPosition()},undo:()=>{this.width=St,this.height=Tt,this.x=gt,this.y=wt;const[Wt,Ht]=this.parentDimensions;this.setDims(Wt*St,Ht*Tt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",en),window.addEventListener("blur",en)},ss=function(vt,Rt){const[$t,_t]=this.parentDimensions,rt=this.x,at=this.y,gt=this.width,wt=this.height,St=Ft.MIN_SIZE/$t,Tt=Ft.MIN_SIZE/_t,Lt=vn=>Math.round(vn*1e4)/1e4,Kt=Nt(this,ut,wr).call(this,this.rotation),en=(vn,wn)=>[Kt[0]*vn+Kt[2]*wn,Kt[1]*vn+Kt[3]*wn],Qt=Nt(this,ut,wr).call(this,360-this.rotation),rn=(vn,wn)=>[Qt[0]*vn+Qt[2]*wn,Qt[1]*vn+Qt[3]*wn];let on,ln,Wt=!1,Ht=!1;switch(vt){case"topLeft":Wt=!0,on=(vn,wn)=>[0,0],ln=(vn,wn)=>[vn,wn];break;case"topMiddle":on=(vn,wn)=>[vn/2,0],ln=(vn,wn)=>[vn/2,wn];break;case"topRight":Wt=!0,on=(vn,wn)=>[vn,0],ln=(vn,wn)=>[0,wn];break;case"middleRight":Ht=!0,on=(vn,wn)=>[vn,wn/2],ln=(vn,wn)=>[0,wn/2];break;case"bottomRight":Wt=!0,on=(vn,wn)=>[vn,wn],ln=(vn,wn)=>[0,0];break;case"bottomMiddle":on=(vn,wn)=>[vn/2,wn],ln=(vn,wn)=>[vn/2,0];break;case"bottomLeft":Wt=!0,on=(vn,wn)=>[0,wn],ln=(vn,wn)=>[vn,0];break;case"middleLeft":Ht=!0,on=(vn,wn)=>[0,wn/2],ln=(vn,wn)=>[vn,wn/2];break}const yt=on(gt,wt),Ct=ln(gt,wt);let Ut=en(...Ct);const Vt=Lt(rt+Ut[0]),tn=Lt(at+Ut[1]);let cn=1,zt=1,[It,dn]=this.screenToPageTranslation(Rt.movementX,Rt.movementY);if([It,dn]=rn(It/$t,dn/_t),Wt){const vn=Math.hypot(gt,wt);cn=zt=Math.max(Math.min(Math.hypot(Ct[0]-yt[0]-It,Ct[1]-yt[1]-dn)/vn,1/gt,1/wt),St/gt,Tt/wt)}else Ht?cn=Math.max(St,Math.min(1,Math.abs(Ct[0]-yt[0]-It)))/gt:zt=Math.max(Tt,Math.min(1,Math.abs(Ct[1]-yt[1]-dn)))/wt;const un=Lt(gt*cn),Sn=Lt(wt*zt);Ut=en(...ln(un,Sn));const kn=Vt-Ut[0],Pn=tn-Ut[1];this.width=un,this.height=Sn,this.x=kn,this.y=Pn,this.setDims($t*un,_t*Sn),this.fixAndSetPosition()},Ar=async function(){var $t;const vt=j(this,_);if(!vt)return;if(!j(this,h)&&!j(this,b)){vt.classList.remove("done"),($t=j(this,et))==null||$t.remove();return}Ft._l10nPromise.get("editor_alt_text_edit_button_label").then(_t=>{vt.setAttribute("aria-label",_t)});let Rt=j(this,et);if(!Rt){Yt(this,et,Rt=document.createElement("span")),Rt.className="tooltip",Rt.setAttribute("role","tooltip");const _t=Rt.id=`alt-text-tooltip-${this.id}`;vt.setAttribute("aria-describedby",_t);const rt=100;vt.addEventListener("mouseenter",()=>{Yt(this,nt,setTimeout(()=>{Yt(this,nt,null),j(this,et).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},rt))}),vt.addEventListener("mouseleave",()=>{var at;clearTimeout(j(this,nt)),Yt(this,nt,null),(at=j(this,et))==null||at.classList.remove("show")})}vt.classList.add("done"),Rt.innerText=j(this,b)?await Ft._l10nPromise.get("editor_alt_text_decorative_tooltip"):j(this,h),Rt.parentNode||vt.append(Rt)},as=function(vt){if(!this._isDraggable)return;const Rt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let $t,_t;Rt&&($t={passive:!0,capture:!0},_t=at=>{const[gt,wt]=this.screenToPageTranslation(at.movementX,at.movementY);this._uiManager.dragSelectedEditors(gt,wt)},window.addEventListener("pointermove",_t,$t));const rt=()=>{if(window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),Rt&&window.removeEventListener("pointermove",_t,$t),Yt(this,$,!1),!this._uiManager.endDragSession()){const{isMac:at}=o.FeatureTest.platform;vt.ctrlKey&&!at||vt.shiftKey||vt.metaKey&&at?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)},qt(Ft,mt),Ln(Ft,"_borderLineWidth",-1),Ln(Ft,"_colorManager",new a.ColorManager),Ln(Ft,"_zIndex",1),Ln(Ft,"SMALL_EDITOR_SIZE",0);let d=Ft;i.AnnotationEditor=d;class g extends d{constructor(vt){super(vt),this.annotationElementId=vt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,i,s)=>{var st,ot,ht,dt,$,Sr,pt,tt,ut,it,lt,os,ft,xt,kt,Dt,Ot,Bt,Ft,Mt,vt,Rt,$t,_t,rt,at,gt,wt,St,Tt,Lt,Kt,en,Qt,rn,on,ln,Wt,Ht,yt,Ct,Ut,Vt,tn,cn,zt,It,ls,kr,Tr,ar,Cr,Pr,Un,Qn,cs,us,Rr,Zn,Or;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=c,i.opacityToHex=d;var a=s(1),o=s(6);function c(Fn,Pt,nn){for(const pn of nn)Pt.addEventListener(pn,Fn[pn].bind(Fn))}function d(Fn){return Math.round(Math.min(255,Math.max(1,255*Fn))).toString(16).padStart(2,"0")}class g{constructor(){qt(this,st,0)}getId(){return`${a.AnnotationEditorPrefix}${Jn(this,st)._++}`}}st=new WeakMap;const ct=class ct{constructor(){qt(this,$);qt(this,ot,(0,a.getUuid)());qt(this,ht,0);qt(this,dt,null)}static get _isSVGFittingCanvas(){const Pt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pn=new OffscreenCanvas(1,3).getContext("2d"),xn=new Image;xn.src=Pt;const An=xn.decode().then(()=>(pn.drawImage(xn,0,0,1,1,0,0,1,3),new Uint32Array(pn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",An)}async getFromFile(Pt){const{lastModified:nn,name:pn,size:xn,type:An}=Pt;return Nt(this,$,Sr).call(this,`${nn}_${pn}_${xn}_${An}`,Pt)}async getFromUrl(Pt){return Nt(this,$,Sr).call(this,Pt,Pt)}async getFromId(Pt){j(this,dt)||Yt(this,dt,new Map);const nn=j(this,dt).get(Pt);return nn?nn.bitmap?(nn.refCounter+=1,nn):nn.file?this.getFromFile(nn.file):this.getFromUrl(nn.url):null}getSvgUrl(Pt){const nn=j(this,dt).get(Pt);return nn!=null&&nn.isSvg?nn.svgUrl:null}deleteId(Pt){j(this,dt)||Yt(this,dt,new Map);const nn=j(this,dt).get(Pt);nn&&(nn.refCounter-=1,nn.refCounter===0&&(nn.bitmap=null))}isValidId(Pt){return Pt.startsWith(`image_${j(this,ot)}_`)}};ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakSet,Sr=async function(Pt,nn){j(this,dt)||Yt(this,dt,new Map);let pn=j(this,dt).get(Pt);if(pn===null)return null;if(pn!=null&&pn.bitmap)return pn.refCounter+=1,pn;try{pn||(pn={bitmap:null,id:`image_${j(this,ot)}_${Jn(this,ht)._++}`,refCounter:0,isSvg:!1});let xn;if(typeof nn=="string"){pn.url=nn;const An=await fetch(nn);if(!An.ok)throw new Error(An.statusText);xn=await An.blob()}else xn=pn.file=nn;if(xn.type==="image/svg+xml"){const An=ct._isSVGFittingCanvas,gn=new FileReader,At=new Image,bt=new Promise((jt,Jt)=>{At.onload=()=>{pn.bitmap=At,pn.isSvg=!0,jt()},gn.onload=async()=>{const Zt=pn.svgUrl=gn.result;At.src=await An?`${Zt}#svgView(preserveAspectRatio(none))`:Zt},At.onerror=gn.onerror=Jt});gn.readAsDataURL(xn),await bt}else pn.bitmap=await createImageBitmap(xn);pn.refCounter=1}catch(xn){console.error(xn),pn=null}return j(this,dt).set(Pt,pn),pn&&j(this,dt).set(pn.id,pn),pn};let h=ct;class b{constructor(Pt=128){qt(this,pt,[]);qt(this,tt,!1);qt(this,ut);qt(this,it,-1);Yt(this,ut,Pt)}add({cmd:Pt,undo:nn,mustExec:pn,type:xn=NaN,overwriteIfSameType:An=!1,keepUndo:gn=!1}){if(pn&&Pt(),j(this,tt))return;const At={cmd:Pt,undo:nn,type:xn};if(j(this,it)===-1){j(this,pt).length>0&&(j(this,pt).length=0),Yt(this,it,0),j(this,pt).push(At);return}if(An&&j(this,pt)[j(this,it)].type===xn){gn&&(At.undo=j(this,pt)[j(this,it)].undo),j(this,pt)[j(this,it)]=At;return}const bt=j(this,it)+1;bt===j(this,ut)?j(this,pt).splice(0,1):(Yt(this,it,bt),bt<j(this,pt).length&&j(this,pt).splice(bt)),j(this,pt).push(At)}undo(){j(this,it)!==-1&&(Yt(this,tt,!0),j(this,pt)[j(this,it)].undo(),Yt(this,tt,!1),Yt(this,it,j(this,it)-1))}redo(){j(this,it)<j(this,pt).length-1&&(Yt(this,it,j(this,it)+1),Yt(this,tt,!0),j(this,pt)[j(this,it)].cmd(),Yt(this,tt,!1))}hasSomethingToUndo(){return j(this,it)!==-1}hasSomethingToRedo(){return j(this,it)<j(this,pt).length-1}destroy(){Yt(this,pt,null)}}pt=new WeakMap,tt=new WeakMap,ut=new WeakMap,it=new WeakMap,i.CommandManager=b;class _{constructor(Pt){qt(this,lt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:nn}=a.FeatureTest.platform;for(const[pn,xn,An={}]of Pt)for(const gn of pn){const At=gn.startsWith("mac+");nn&&At?(this.callbacks.set(gn.slice(4),{callback:xn,options:An}),this.allKeys.add(gn.split("+").at(-1))):!nn&&!At&&(this.callbacks.set(gn,{callback:xn,options:An}),this.allKeys.add(gn.split("+").at(-1)))}}exec(Pt,nn){if(!this.allKeys.has(nn.key))return;const pn=this.callbacks.get(Nt(this,lt,os).call(this,nn));if(!pn)return;const{callback:xn,options:{bubbles:An=!1,args:gn=[],checker:At=null}}=pn;At&&!At(Pt,nn)||(xn.bind(Pt,...gn)(),An||(nn.stopPropagation(),nn.preventDefault()))}}lt=new WeakSet,os=function(Pt){Pt.altKey&&this.buffer.push("alt"),Pt.ctrlKey&&this.buffer.push("ctrl"),Pt.metaKey&&this.buffer.push("meta"),Pt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Pt.key);const nn=this.buffer.join("+");return this.buffer.length=0,nn},i.KeyboardManager=_;const Et=class Et{get _colors(){const Pt=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Pt),(0,a.shadow)(this,"_colors",Pt)}convert(Pt){const nn=(0,o.getRGB)(Pt);if(!window.matchMedia("(forced-colors: active)").matches)return nn;for(const[pn,xn]of this._colors)if(xn.every((An,gn)=>An===nn[gn]))return Et._colorsMapping.get(pn);return nn}getHexCode(Pt){const nn=this._colors.get(Pt);return nn?a.Util.makeHexColor(...nn):Pt}};Ln(Et,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let et=Et;i.ColorManager=et;const In=class In{constructor(Pt,nn,pn,xn,An,gn){qt(this,It);qt(this,ft,null);qt(this,xt,new Map);qt(this,kt,new Map);qt(this,Dt,null);qt(this,Ot,null);qt(this,Bt,new b);qt(this,Ft,0);qt(this,Mt,new Set);qt(this,vt,null);qt(this,Rt,null);qt(this,$t,new Set);qt(this,_t,null);qt(this,rt,new g);qt(this,at,!1);qt(this,gt,!1);qt(this,wt,null);qt(this,St,a.AnnotationEditorType.NONE);qt(this,Tt,new Set);qt(this,Lt,null);qt(this,Kt,this.blur.bind(this));qt(this,en,this.focus.bind(this));qt(this,Qt,this.copy.bind(this));qt(this,rn,this.cut.bind(this));qt(this,on,this.paste.bind(this));qt(this,ln,this.keydown.bind(this));qt(this,Wt,this.onEditingAction.bind(this));qt(this,Ht,this.onPageChanging.bind(this));qt(this,yt,this.onScaleChanging.bind(this));qt(this,Ct,this.onRotationChanging.bind(this));qt(this,Ut,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});qt(this,Vt,[0,0]);qt(this,tn,null);qt(this,cn,null);qt(this,zt,null);Yt(this,cn,Pt),Yt(this,zt,nn),Yt(this,Dt,pn),this._eventBus=xn,this._eventBus._on("editingaction",j(this,Wt)),this._eventBus._on("pagechanging",j(this,Ht)),this._eventBus._on("scalechanging",j(this,yt)),this._eventBus._on("rotationchanging",j(this,Ct)),Yt(this,Ot,An.annotationStorage),Yt(this,_t,An.filterFactory),Yt(this,Lt,gn),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Pt=In.prototype,nn=An=>{const{activeElement:gn}=document;return gn&&j(An,cn).contains(gn)&&An.hasSomethingToControl()},pn=this.TRANSLATE_SMALL,xn=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],Pt.selectAll],[["ctrl+z","mac+meta+z"],Pt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Pt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Pt.delete],[["Escape","mac+Escape"],Pt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Pt.translateSelectedEditors,{args:[-pn,0],checker:nn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Pt.translateSelectedEditors,{args:[-xn,0],checker:nn}],[["ArrowRight","mac+ArrowRight"],Pt.translateSelectedEditors,{args:[pn,0],checker:nn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Pt.translateSelectedEditors,{args:[xn,0],checker:nn}],[["ArrowUp","mac+ArrowUp"],Pt.translateSelectedEditors,{args:[0,-pn],checker:nn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Pt.translateSelectedEditors,{args:[0,-xn],checker:nn}],[["ArrowDown","mac+ArrowDown"],Pt.translateSelectedEditors,{args:[0,pn],checker:nn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Pt.translateSelectedEditors,{args:[0,xn],checker:nn}]]))}destroy(){Nt(this,It,ar).call(this),Nt(this,It,kr).call(this),this._eventBus._off("editingaction",j(this,Wt)),this._eventBus._off("pagechanging",j(this,Ht)),this._eventBus._off("scalechanging",j(this,yt)),this._eventBus._off("rotationchanging",j(this,Ct));for(const Pt of j(this,kt).values())Pt.destroy();j(this,kt).clear(),j(this,xt).clear(),j(this,$t).clear(),Yt(this,ft,null),j(this,Tt).clear(),j(this,Bt).destroy(),j(this,Dt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",j(this,Lt)?j(this,_t).addHCMFilter(j(this,Lt).foreground,j(this,Lt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(j(this,cn)).direction)}editAltText(Pt){var nn;(nn=j(this,Dt))==null||nn.editAltText(this,Pt)}onPageChanging({pageNumber:Pt}){Yt(this,Ft,Pt-1)}focusMainContainer(){j(this,cn).focus()}findParent(Pt,nn){for(const pn of j(this,kt).values()){const{x:xn,y:An,width:gn,height:At}=pn.div.getBoundingClientRect();if(Pt>=xn&&Pt<=xn+gn&&nn>=An&&nn<=An+At)return pn}return null}disableUserSelect(Pt=!1){j(this,zt).classList.toggle("noUserSelect",Pt)}addShouldRescale(Pt){j(this,$t).add(Pt)}removeShouldRescale(Pt){j(this,$t).delete(Pt)}onScaleChanging({scale:Pt}){this.commitOrRemove(),this.viewParameters.realScale=Pt*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const nn of j(this,$t))nn.onScaleChanging()}onRotationChanging({pagesRotation:Pt}){this.commitOrRemove(),this.viewParameters.rotation=Pt}addToAnnotationStorage(Pt){!Pt.isEmpty()&&j(this,Ot)&&!j(this,Ot).has(Pt.id)&&j(this,Ot).setValue(Pt.id,Pt)}blur(){if(!this.hasSelection)return;const{activeElement:Pt}=document;for(const nn of j(this,Tt))if(nn.div.contains(Pt)){Yt(this,wt,[nn,Pt]),nn._focusEventsAllowed=!1;break}}focus(){if(!j(this,wt))return;const[Pt,nn]=j(this,wt);Yt(this,wt,null),nn.addEventListener("focusin",()=>{Pt._focusEventsAllowed=!0},{once:!0}),nn.focus()}addEditListeners(){Nt(this,It,Tr).call(this),Nt(this,It,Cr).call(this)}removeEditListeners(){Nt(this,It,ar).call(this),Nt(this,It,Pr).call(this)}copy(Pt){var pn;if(Pt.preventDefault(),(pn=j(this,ft))==null||pn.commitOrRemove(),!this.hasSelection)return;const nn=[];for(const xn of j(this,Tt)){const An=xn.serialize(!0);An&&nn.push(An)}nn.length!==0&&Pt.clipboardData.setData("application/pdfjs",JSON.stringify(nn))}cut(Pt){this.copy(Pt),this.delete()}paste(Pt){Pt.preventDefault();const{clipboardData:nn}=Pt;for(const An of nn.items)for(const gn of j(this,Rt))if(gn.isHandlingMimeForPasting(An.type)){gn.paste(An,this.currentLayer);return}let pn=nn.getData("application/pdfjs");if(!pn)return;try{pn=JSON.parse(pn)}catch(An){(0,a.warn)(`paste: "${An.message}".`);return}if(!Array.isArray(pn))return;this.unselectAll();const xn=this.currentLayer;try{const An=[];for(const bt of pn){const jt=xn.deserialize(bt);if(!jt)return;An.push(jt)}const gn=()=>{for(const bt of An)Nt(this,It,Rr).call(this,bt);Nt(this,It,Or).call(this,An)},At=()=>{for(const bt of An)bt.remove()};this.addCommands({cmd:gn,undo:At,mustExec:!0})}catch(An){(0,a.warn)(`paste: "${An.message}".`)}}keydown(Pt){var nn;(nn=this.getActive())!=null&&nn.shouldGetKeyboardEvents()||In._keyboardManager.exec(this,Pt)}onEditingAction(Pt){["undo","redo","delete","selectAll"].includes(Pt.name)&&this[Pt.name]()}setEditingState(Pt){Pt?(Nt(this,It,ls).call(this),Nt(this,It,Tr).call(this),Nt(this,It,Cr).call(this),Nt(this,It,Un).call(this,{isEditing:j(this,St)!==a.AnnotationEditorType.NONE,isEmpty:Nt(this,It,Zn).call(this),hasSomethingToUndo:j(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:j(this,Bt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Nt(this,It,kr).call(this),Nt(this,It,ar).call(this),Nt(this,It,Pr).call(this),Nt(this,It,Un).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Pt){if(!j(this,Rt)){Yt(this,Rt,Pt);for(const nn of j(this,Rt))Nt(this,It,Qn).call(this,nn.defaultPropertiesToUpdate)}}getId(){return j(this,rt).getId()}get currentLayer(){return j(this,kt).get(j(this,Ft))}getLayer(Pt){return j(this,kt).get(Pt)}get currentPageIndex(){return j(this,Ft)}addLayer(Pt){j(this,kt).set(Pt.pageIndex,Pt),j(this,at)?Pt.enable():Pt.disable()}removeLayer(Pt){j(this,kt).delete(Pt.pageIndex)}updateMode(Pt,nn=null){if(j(this,St)!==Pt){if(Yt(this,St,Pt),Pt===a.AnnotationEditorType.NONE){this.setEditingState(!1),Nt(this,It,us).call(this);return}this.setEditingState(!0),Nt(this,It,cs).call(this),this.unselectAll();for(const pn of j(this,kt).values())pn.updateMode(Pt);if(nn){for(const pn of j(this,xt).values())if(pn.annotationElementId===nn){this.setSelected(pn),pn.enterInEditMode();break}}}}updateToolbar(Pt){Pt!==j(this,St)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Pt})}updateParams(Pt,nn){if(j(this,Rt)){if(Pt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Pt);return}for(const pn of j(this,Tt))pn.updateParams(Pt,nn);for(const pn of j(this,Rt))pn.updateDefaultParams(Pt,nn)}}enableWaiting(Pt=!1){if(j(this,gt)!==Pt){Yt(this,gt,Pt);for(const nn of j(this,kt).values())Pt?nn.disableClick():nn.enableClick(),nn.div.classList.toggle("waiting",Pt)}}getEditors(Pt){const nn=[];for(const pn of j(this,xt).values())pn.pageIndex===Pt&&nn.push(pn);return nn}getEditor(Pt){return j(this,xt).get(Pt)}addEditor(Pt){j(this,xt).set(Pt.id,Pt)}removeEditor(Pt){var nn;j(this,xt).delete(Pt.id),this.unselect(Pt),(!Pt.annotationElementId||!j(this,Mt).has(Pt.annotationElementId))&&((nn=j(this,Ot))==null||nn.remove(Pt.id))}addDeletedAnnotationElement(Pt){j(this,Mt).add(Pt.annotationElementId),Pt.deleted=!0}isDeletedAnnotationElement(Pt){return j(this,Mt).has(Pt)}removeDeletedAnnotationElement(Pt){j(this,Mt).delete(Pt.annotationElementId),Pt.deleted=!1}setActiveEditor(Pt){j(this,ft)!==Pt&&(Yt(this,ft,Pt),Pt&&Nt(this,It,Qn).call(this,Pt.propertiesToUpdate))}toggleSelected(Pt){if(j(this,Tt).has(Pt)){j(this,Tt).delete(Pt),Pt.unselect(),Nt(this,It,Un).call(this,{hasSelectedEditor:this.hasSelection});return}j(this,Tt).add(Pt),Pt.select(),Nt(this,It,Qn).call(this,Pt.propertiesToUpdate),Nt(this,It,Un).call(this,{hasSelectedEditor:!0})}setSelected(Pt){for(const nn of j(this,Tt))nn!==Pt&&nn.unselect();j(this,Tt).clear(),j(this,Tt).add(Pt),Pt.select(),Nt(this,It,Qn).call(this,Pt.propertiesToUpdate),Nt(this,It,Un).call(this,{hasSelectedEditor:!0})}isSelected(Pt){return j(this,Tt).has(Pt)}unselect(Pt){Pt.unselect(),j(this,Tt).delete(Pt),Nt(this,It,Un).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return j(this,Tt).size!==0}undo(){j(this,Bt).undo(),Nt(this,It,Un).call(this,{hasSomethingToUndo:j(this,Bt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Nt(this,It,Zn).call(this)})}redo(){j(this,Bt).redo(),Nt(this,It,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:j(this,Bt).hasSomethingToRedo(),isEmpty:Nt(this,It,Zn).call(this)})}addCommands(Pt){j(this,Bt).add(Pt),Nt(this,It,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Nt(this,It,Zn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Pt=[...j(this,Tt)],nn=()=>{for(const xn of Pt)xn.remove()},pn=()=>{for(const xn of Pt)Nt(this,It,Rr).call(this,xn)};this.addCommands({cmd:nn,undo:pn,mustExec:!0})}commitOrRemove(){var Pt;(Pt=j(this,ft))==null||Pt.commitOrRemove()}hasSomethingToControl(){return j(this,ft)||this.hasSelection}selectAll(){for(const Pt of j(this,Tt))Pt.commit();Nt(this,It,Or).call(this,j(this,xt).values())}unselectAll(){if(j(this,ft)){j(this,ft).commitOrRemove();return}if(this.hasSelection){for(const Pt of j(this,Tt))Pt.unselect();j(this,Tt).clear(),Nt(this,It,Un).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Pt,nn,pn=!1){if(pn||this.commitOrRemove(),!this.hasSelection)return;j(this,Vt)[0]+=Pt,j(this,Vt)[1]+=nn;const[xn,An]=j(this,Vt),gn=[...j(this,Tt)],At=1e3;j(this,tn)&&clearTimeout(j(this,tn)),Yt(this,tn,setTimeout(()=>{Yt(this,tn,null),j(this,Vt)[0]=j(this,Vt)[1]=0,this.addCommands({cmd:()=>{for(const bt of gn)j(this,xt).has(bt.id)&&bt.translateInPage(xn,An)},undo:()=>{for(const bt of gn)j(this,xt).has(bt.id)&&bt.translateInPage(-xn,-An)},mustExec:!1})},At));for(const bt of gn)bt.translateInPage(Pt,nn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Yt(this,vt,new Map);for(const Pt of j(this,Tt))j(this,vt).set(Pt,{savedX:Pt.x,savedY:Pt.y,savedPageIndex:Pt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!j(this,vt))return!1;this.disableUserSelect(!1);const Pt=j(this,vt);Yt(this,vt,null);let nn=!1;for(const[{x:xn,y:An,pageIndex:gn},At]of Pt)At.newX=xn,At.newY=An,At.newPageIndex=gn,nn||(nn=xn!==At.savedX||An!==At.savedY||gn!==At.savedPageIndex);if(!nn)return!1;const pn=(xn,An,gn,At)=>{if(j(this,xt).has(xn.id)){const bt=j(this,kt).get(At);bt?xn._setParentAndPosition(bt,An,gn):(xn.pageIndex=At,xn.x=An,xn.y=gn)}};return this.addCommands({cmd:()=>{for(const[xn,{newX:An,newY:gn,newPageIndex:At}]of Pt)pn(xn,An,gn,At)},undo:()=>{for(const[xn,{savedX:An,savedY:gn,savedPageIndex:At}]of Pt)pn(xn,An,gn,At)},mustExec:!0}),!0}dragSelectedEditors(Pt,nn){if(j(this,vt))for(const pn of j(this,vt).keys())pn.drag(Pt,nn)}rebuild(Pt){if(Pt.parent===null){const nn=this.getLayer(Pt.pageIndex);nn?(nn.changeParent(Pt),nn.addOrRebuild(Pt)):(this.addEditor(Pt),this.addToAnnotationStorage(Pt),Pt.rebuild())}else Pt.parent.addOrRebuild(Pt)}isActive(Pt){return j(this,ft)===Pt}getActive(){return j(this,ft)}getMode(){return j(this,St)}get imageManager(){return(0,a.shadow)(this,"imageManager",new h)}};ft=new WeakMap,xt=new WeakMap,kt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,vt=new WeakMap,Rt=new WeakMap,$t=new WeakMap,_t=new WeakMap,rt=new WeakMap,at=new WeakMap,gt=new WeakMap,wt=new WeakMap,St=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Kt=new WeakMap,en=new WeakMap,Qt=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,yt=new WeakMap,Ct=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,tn=new WeakMap,cn=new WeakMap,zt=new WeakMap,It=new WeakSet,ls=function(){window.addEventListener("focus",j(this,en)),window.addEventListener("blur",j(this,Kt))},kr=function(){window.removeEventListener("focus",j(this,en)),window.removeEventListener("blur",j(this,Kt))},Tr=function(){window.addEventListener("keydown",j(this,ln),{capture:!0})},ar=function(){window.removeEventListener("keydown",j(this,ln),{capture:!0})},Cr=function(){document.addEventListener("copy",j(this,Qt)),document.addEventListener("cut",j(this,rn)),document.addEventListener("paste",j(this,on))},Pr=function(){document.removeEventListener("copy",j(this,Qt)),document.removeEventListener("cut",j(this,rn)),document.removeEventListener("paste",j(this,on))},Un=function(Pt){Object.entries(Pt).some(([pn,xn])=>j(this,Ut)[pn]!==xn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(j(this,Ut),Pt)})},Qn=function(Pt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Pt})},cs=function(){if(!j(this,at)){Yt(this,at,!0);for(const Pt of j(this,kt).values())Pt.enable()}},us=function(){if(this.unselectAll(),j(this,at)){Yt(this,at,!1);for(const Pt of j(this,kt).values())Pt.disable()}},Rr=function(Pt){const nn=j(this,kt).get(Pt.pageIndex);nn?nn.addOrRebuild(Pt):this.addEditor(Pt)},Zn=function(){if(j(this,xt).size===0)return!0;if(j(this,xt).size===1)for(const Pt of j(this,xt).values())return Pt.isEmpty();return!1},Or=function(Pt){j(this,Tt).clear();for(const nn of Pt)nn.isEmpty()||(j(this,Tt).add(nn),nn.select());Nt(this,It,Un).call(this,{hasSelectedEditor:!0})},Ln(In,"TRANSLATE_SMALL",1),Ln(In,"TRANSLATE_BIG",10);let nt=In;i.AnnotationEditorUIManager=nt},(e,i,s)=>{var Ft,Mt,vt,Rt,$t,_t,rt,at,gt,wt,St,Tt,qn,Kn,Ir,or,lr,_i,er;Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMFilterFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=void 0,i.deprecated=it,i.getColorValues=xt,i.getCurrentTransform=kt,i.getCurrentTransformInverse=Dt,i.getFilenameFromUrl=$,i.getPdfFilenameFromUrl=_e,i.getRGB=ft,i.getXfaPageViewport=Et,i.isDataScheme=ht,i.isPdfFile=dt,i.isValidFetchUrl=pt,i.loadScript=ut,i.noContextMenu=tt,i.setLayerDimensions=Ot;var a=s(7),o=s(1);const c="http://www.w3.org/2000/svg",Bt=class Bt{};Ln(Bt,"CSS",96),Ln(Bt,"PDF",72),Ln(Bt,"PDF_TO_CSS_UNITS",Bt.CSS/Bt.PDF);let d=Bt;i.PixelsPerInch=d;class g extends a.BaseFilterFactory{constructor({docId:yt,ownerDocument:Ct=globalThis.document}={}){super();qt(this,Tt);qt(this,Ft);qt(this,Mt);qt(this,vt);qt(this,Rt);qt(this,$t);qt(this,_t);qt(this,rt);qt(this,at);qt(this,gt);qt(this,wt);qt(this,St,0);Yt(this,vt,yt),Yt(this,Rt,Ct)}addFilter(yt){if(!yt)return"none";let Ct=j(this,Tt,qn).get(yt);if(Ct)return Ct;let Ut,Vt,tn,cn;if(yt.length===1){const un=yt[0],Sn=new Array(256);for(let kn=0;kn<256;kn++)Sn[kn]=un[kn]/255;cn=Ut=Vt=tn=Sn.join(",")}else{const[un,Sn,kn]=yt,Pn=new Array(256),vn=new Array(256),wn=new Array(256);for(let Rn=0;Rn<256;Rn++)Pn[Rn]=un[Rn]/255,vn[Rn]=Sn[Rn]/255,wn[Rn]=kn[Rn]/255;Ut=Pn.join(","),Vt=vn.join(","),tn=wn.join(","),cn=`${Ut}${Vt}${tn}`}if(Ct=j(this,Tt,qn).get(cn),Ct)return j(this,Tt,qn).set(yt,Ct),Ct;const zt=`g_${j(this,vt)}_transfer_map_${Jn(this,St)._++}`,It=`url(#${zt})`;j(this,Tt,qn).set(yt,It),j(this,Tt,qn).set(cn,It);const dn=Nt(this,Tt,or).call(this,zt);return Nt(this,Tt,_i).call(this,Ut,Vt,tn,dn),It}addHCMFilter(yt,Ct){var Sn;const Ut=`${yt}-${Ct}`;if(j(this,_t)===Ut)return j(this,rt);if(Yt(this,_t,Ut),Yt(this,rt,"none"),(Sn=j(this,$t))==null||Sn.remove(),!yt||!Ct)return j(this,rt);const Vt=Nt(this,Tt,er).call(this,yt);yt=o.Util.makeHexColor(...Vt);const tn=Nt(this,Tt,er).call(this,Ct);if(Ct=o.Util.makeHexColor(...tn),j(this,Tt,Kn).style.color="",yt==="#000000"&&Ct==="#ffffff"||yt===Ct)return j(this,rt);const cn=new Array(256);for(let kn=0;kn<=255;kn++){const Pn=kn/255;cn[kn]=Pn<=.03928?Pn/12.92:((Pn+.055)/1.055)**2.4}const zt=cn.join(","),It=`g_${j(this,vt)}_hcm_filter`,dn=Yt(this,at,Nt(this,Tt,or).call(this,It));Nt(this,Tt,_i).call(this,zt,zt,zt,dn),Nt(this,Tt,Ir).call(this,dn);const un=(kn,Pn)=>{const vn=Vt[kn]/255,wn=tn[kn]/255,Rn=new Array(Pn+1);for(let Mn=0;Mn<=Pn;Mn++)Rn[Mn]=vn+Mn/Pn*(wn-vn);return Rn.join(",")};return Nt(this,Tt,_i).call(this,un(0,5),un(1,5),un(2,5),dn),Yt(this,rt,`url(#${It})`),j(this,rt)}addHighlightHCMFilter(yt,Ct,Ut,Vt){var wn;const tn=`${yt}-${Ct}-${Ut}-${Vt}`;if(j(this,gt)===tn)return j(this,wt);if(Yt(this,gt,tn),Yt(this,wt,"none"),(wn=j(this,at))==null||wn.remove(),!yt||!Ct)return j(this,wt);const[cn,zt]=[yt,Ct].map(Nt(this,Tt,er).bind(this));let It=Math.round(.2126*cn[0]+.7152*cn[1]+.0722*cn[2]),dn=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),[un,Sn]=[Ut,Vt].map(Nt(this,Tt,er).bind(this));dn<It&&([It,dn,un,Sn]=[dn,It,Sn,un]),j(this,Tt,Kn).style.color="";const kn=(Rn,Mn,sn)=>{const Gt=new Array(256),Xt=(dn-It)/sn,mn=Rn/255,In=(Mn-Rn)/(255*sn);let Fn=0;for(let Pt=0;Pt<=sn;Pt++){const nn=Math.round(It+Pt*Xt),pn=mn+Pt*In;for(let xn=Fn;xn<=nn;xn++)Gt[xn]=pn;Fn=nn+1}for(let Pt=Fn;Pt<256;Pt++)Gt[Pt]=Gt[Fn-1];return Gt.join(",")},Pn=`g_${j(this,vt)}_hcm_highlight_filter`,vn=Yt(this,at,Nt(this,Tt,or).call(this,Pn));return Nt(this,Tt,Ir).call(this,vn),Nt(this,Tt,_i).call(this,kn(un[0],Sn[0],5),kn(un[1],Sn[1],5),kn(un[2],Sn[2],5),vn),Yt(this,wt,`url(#${Pn})`),j(this,wt)}destroy(yt=!1){yt&&(j(this,rt)||j(this,wt))||(j(this,Mt)&&(j(this,Mt).parentNode.parentNode.remove(),Yt(this,Mt,null)),j(this,Ft)&&(j(this,Ft).clear(),Yt(this,Ft,null)),Yt(this,St,0))}}Ft=new WeakMap,Mt=new WeakMap,vt=new WeakMap,Rt=new WeakMap,$t=new WeakMap,_t=new WeakMap,rt=new WeakMap,at=new WeakMap,gt=new WeakMap,wt=new WeakMap,St=new WeakMap,Tt=new WeakSet,qn=function(){return j(this,Ft)||Yt(this,Ft,new Map)},Kn=function(){if(!j(this,Mt)){const yt=j(this,Rt).createElement("div"),{style:Ct}=yt;Ct.visibility="hidden",Ct.contain="strict",Ct.width=Ct.height=0,Ct.position="absolute",Ct.top=Ct.left=0,Ct.zIndex=-1;const Ut=j(this,Rt).createElementNS(c,"svg");Ut.setAttribute("width",0),Ut.setAttribute("height",0),Yt(this,Mt,j(this,Rt).createElementNS(c,"defs")),yt.append(Ut),Ut.append(j(this,Mt)),j(this,Rt).body.append(yt)}return j(this,Mt)},Ir=function(yt){const Ct=j(this,Rt).createElementNS(c,"feColorMatrix");Ct.setAttribute("type","matrix"),Ct.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),yt.append(Ct)},or=function(yt){const Ct=j(this,Rt).createElementNS(c,"filter");return Ct.setAttribute("color-interpolation-filters","sRGB"),Ct.setAttribute("id",yt),j(this,Tt,Kn).append(Ct),Ct},lr=function(yt,Ct,Ut){const Vt=j(this,Rt).createElementNS(c,Ct);Vt.setAttribute("type","discrete"),Vt.setAttribute("tableValues",Ut),yt.append(Vt)},_i=function(yt,Ct,Ut,Vt){const tn=j(this,Rt).createElementNS(c,"feComponentTransfer");Vt.append(tn),Nt(this,Tt,lr).call(this,tn,"feFuncR",yt),Nt(this,Tt,lr).call(this,tn,"feFuncG",Ct),Nt(this,Tt,lr).call(this,tn,"feFuncB",Ut)},er=function(yt){return j(this,Tt,Kn).style.color=yt,ft(getComputedStyle(j(this,Tt,Kn)).getPropertyValue("color"))},i.DOMFilterFactory=g;class h extends a.BaseCanvasFactory{constructor({ownerDocument:Ht=globalThis.document}={}){super(),this._document=Ht}_createCanvas(Ht,yt){const Ct=this._document.createElement("canvas");return Ct.width=Ht,Ct.height=yt,Ct}}i.DOMCanvasFactory=h;async function b(Wt,Ht=!1){if(pt(Wt,document.baseURI)){const yt=await fetch(Wt);if(!yt.ok)throw new Error(yt.statusText);return Ht?new Uint8Array(await yt.arrayBuffer()):(0,o.stringToBytes)(await yt.text())}return new Promise((yt,Ct)=>{const Ut=new XMLHttpRequest;Ut.open("GET",Wt,!0),Ht&&(Ut.responseType="arraybuffer"),Ut.onreadystatechange=()=>{if(Ut.readyState===XMLHttpRequest.DONE){if(Ut.status===200||Ut.status===0){let Vt;if(Ht&&Ut.response?Vt=new Uint8Array(Ut.response):!Ht&&Ut.responseText&&(Vt=(0,o.stringToBytes)(Ut.responseText)),Vt){yt(Vt);return}}Ct(new Error(Ut.statusText))}},Ut.send(null)})}class _ extends a.BaseCMapReaderFactory{_fetchData(Ht,yt){return b(Ht,this.isCompressed).then(Ct=>({cMapData:Ct,compressionType:yt}))}}i.DOMCMapReaderFactory=_;class et extends a.BaseStandardFontDataFactory{_fetchData(Ht){return b(Ht,!0)}}i.DOMStandardFontDataFactory=et;class nt extends a.BaseSVGFactory{_createSVG(Ht){return document.createElementNS(c,Ht)}}i.DOMSVGFactory=nt;class st{constructor({viewBox:Ht,scale:yt,rotation:Ct,offsetX:Ut=0,offsetY:Vt=0,dontFlip:tn=!1}){this.viewBox=Ht,this.scale=yt,this.rotation=Ct,this.offsetX=Ut,this.offsetY=Vt;const cn=(Ht[2]+Ht[0])/2,zt=(Ht[3]+Ht[1])/2;let It,dn,un,Sn;switch(Ct%=360,Ct<0&&(Ct+=360),Ct){case 180:It=-1,dn=0,un=0,Sn=1;break;case 90:It=0,dn=1,un=1,Sn=0;break;case 270:It=0,dn=-1,un=-1,Sn=0;break;case 0:It=1,dn=0,un=0,Sn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}tn&&(un=-un,Sn=-Sn);let kn,Pn,vn,wn;It===0?(kn=Math.abs(zt-Ht[1])*yt+Ut,Pn=Math.abs(cn-Ht[0])*yt+Vt,vn=(Ht[3]-Ht[1])*yt,wn=(Ht[2]-Ht[0])*yt):(kn=Math.abs(cn-Ht[0])*yt+Ut,Pn=Math.abs(zt-Ht[1])*yt+Vt,vn=(Ht[2]-Ht[0])*yt,wn=(Ht[3]-Ht[1])*yt),this.transform=[It*yt,dn*yt,un*yt,Sn*yt,kn-It*yt*cn-un*yt*zt,Pn-dn*yt*cn-Sn*yt*zt],this.width=vn,this.height=wn}get rawDims(){const{viewBox:Ht}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Ht[2]-Ht[0],pageHeight:Ht[3]-Ht[1],pageX:Ht[0],pageY:Ht[1]})}clone({scale:Ht=this.scale,rotation:yt=this.rotation,offsetX:Ct=this.offsetX,offsetY:Ut=this.offsetY,dontFlip:Vt=!1}={}){return new st({viewBox:this.viewBox.slice(),scale:Ht,rotation:yt,offsetX:Ct,offsetY:Ut,dontFlip:Vt})}convertToViewportPoint(Ht,yt){return o.Util.applyTransform([Ht,yt],this.transform)}convertToViewportRectangle(Ht){const yt=o.Util.applyTransform([Ht[0],Ht[1]],this.transform),Ct=o.Util.applyTransform([Ht[2],Ht[3]],this.transform);return[yt[0],yt[1],Ct[0],Ct[1]]}convertToPdfPoint(Ht,yt){return o.Util.applyInverseTransform([Ht,yt],this.transform)}}i.PageViewport=st;class ot extends o.BaseException{constructor(Ht,yt=0){super(Ht,"RenderingCancelledException"),this.extraDelay=yt}}i.RenderingCancelledException=ot;function ht(Wt){const Ht=Wt.length;let yt=0;for(;yt<Ht&&Wt[yt].trim()==="";)yt++;return Wt.substring(yt,yt+5).toLowerCase()==="data:"}function dt(Wt){return typeof Wt=="string"&&/\.pdf$/i.test(Wt)}function $(Wt,Ht=!1){return Ht||([Wt]=Wt.split(/[#?]/,1)),Wt.substring(Wt.lastIndexOf("/")+1)}function _e(Wt,Ht="document.pdf"){if(typeof Wt!="string")return Ht;if(ht(Wt))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Ht;const yt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ut=yt.exec(Wt);let Vt=Ct.exec(Ut[1])||Ct.exec(Ut[2])||Ct.exec(Ut[3]);if(Vt&&(Vt=Vt[0],Vt.includes("%")))try{Vt=Ct.exec(decodeURIComponent(Vt))[0]}catch{}return Vt||Ht}class ct{constructor(){Ln(this,"started",Object.create(null));Ln(this,"times",[])}time(Ht){Ht in this.started&&(0,o.warn)(`Timer is already running for ${Ht}`),this.started[Ht]=Date.now()}timeEnd(Ht){Ht in this.started||(0,o.warn)(`Timer has not been started for ${Ht}`),this.times.push({name:Ht,start:this.started[Ht],end:Date.now()}),delete this.started[Ht]}toString(){const Ht=[];let yt=0;for(const{name:Ct}of this.times)yt=Math.max(Ct.length,yt);for(const{name:Ct,start:Ut,end:Vt}of this.times)Ht.push(`${Ct.padEnd(yt)} ${Vt-Ut}ms
`);return Ht.join("")}}i.StatTimer=ct;function pt(Wt,Ht){try{const{protocol:yt}=Ht?new URL(Wt,Ht):new URL(Wt);return yt==="http:"||yt==="https:"}catch{return!1}}function tt(Wt){Wt.preventDefault()}function ut(Wt,Ht=!1){return new Promise((yt,Ct)=>{const Ut=document.createElement("script");Ut.src=Wt,Ut.onload=function(Vt){Ht&&Ut.remove(),yt(Vt)},Ut.onerror=function(){Ct(new Error(`Cannot load script at: ${Ut.src}`))},(document.head||document.documentElement).append(Ut)})}function it(Wt){console.log("Deprecated API usage: "+Wt)}let lt;class mt{static toDateObject(Ht){if(!Ht||typeof Ht!="string")return null;lt||(lt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const yt=lt.exec(Ht);if(!yt)return null;const Ct=parseInt(yt[1],10);let Ut=parseInt(yt[2],10);Ut=Ut>=1&&Ut<=12?Ut-1:0;let Vt=parseInt(yt[3],10);Vt=Vt>=1&&Vt<=31?Vt:1;let tn=parseInt(yt[4],10);tn=tn>=0&&tn<=23?tn:0;let cn=parseInt(yt[5],10);cn=cn>=0&&cn<=59?cn:0;let zt=parseInt(yt[6],10);zt=zt>=0&&zt<=59?zt:0;const It=yt[7]||"Z";let dn=parseInt(yt[8],10);dn=dn>=0&&dn<=23?dn:0;let un=parseInt(yt[9],10)||0;return un=un>=0&&un<=59?un:0,It==="-"?(tn+=dn,cn+=un):It==="+"&&(tn-=dn,cn-=un),new Date(Date.UTC(Ct,Ut,Vt,tn,cn,zt))}}i.PDFDateString=mt;function Et(Wt,{scale:Ht=1,rotation:yt=0}){const{width:Ct,height:Ut}=Wt.attributes.style,Vt=[0,0,parseInt(Ct),parseInt(Ut)];return new st({viewBox:Vt,scale:Ht,rotation:yt})}function ft(Wt){if(Wt.startsWith("#")){const Ht=parseInt(Wt.slice(1),16);return[(Ht&16711680)>>16,(Ht&65280)>>8,Ht&255]}return Wt.startsWith("rgb(")?Wt.slice(4,-1).split(",").map(Ht=>parseInt(Ht)):Wt.startsWith("rgba(")?Wt.slice(5,-1).split(",").map(Ht=>parseInt(Ht)).slice(0,3):((0,o.warn)(`Not a valid color format: "${Wt}"`),[0,0,0])}function xt(Wt){const Ht=document.createElement("span");Ht.style.visibility="hidden",document.body.append(Ht);for(const yt of Wt.keys()){Ht.style.color=yt;const Ct=window.getComputedStyle(Ht).color;Wt.set(yt,ft(Ct))}Ht.remove()}function kt(Wt){const{a:Ht,b:yt,c:Ct,d:Ut,e:Vt,f:tn}=Wt.getTransform();return[Ht,yt,Ct,Ut,Vt,tn]}function Dt(Wt){const{a:Ht,b:yt,c:Ct,d:Ut,e:Vt,f:tn}=Wt.getTransform().invertSelf();return[Ht,yt,Ct,Ut,Vt,tn]}function Ot(Wt,Ht,yt=!1,Ct=!0){if(Ht instanceof st){const{pageWidth:Ut,pageHeight:Vt}=Ht.rawDims,{style:tn}=Wt,cn=o.FeatureTest.isCSSRoundSupported,zt=`var(--scale-factor) * ${Ut}px`,It=`var(--scale-factor) * ${Vt}px`,dn=cn?`round(${zt}, 1px)`:`calc(${zt})`,un=cn?`round(${It}, 1px)`:`calc(${It})`;!yt||Ht.rotation%180===0?(tn.width=dn,tn.height=un):(tn.width=un,tn.height=dn)}Ct&&Wt.setAttribute("data-main-rotation",Ht.rotation)}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseFilterFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var a=s(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,et){return"none"}addHighlightHCMFilter(_,et,nt,st){return"none"}destroy(_=!1){}}i.BaseFilterFactory=o;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,et){if(_<=0||et<=0)throw new Error("Invalid canvas size");const nt=this._createCanvas(_,et);return{canvas:nt,context:nt.getContext("2d")}}reset(_,et,nt){if(!_.canvas)throw new Error("Canvas is not specified");if(et<=0||nt<=0)throw new Error("Invalid canvas size");_.canvas.width=et,_.canvas.height=nt}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,et){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=c;class d{constructor({baseUrl:_=null,isCompressed:et=!0}){this.constructor===d&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=et}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const et=this.baseUrl+_+(this.isCompressed?".bcmap":""),nt=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(et,nt).catch(st=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}_fetchData(_,et){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=d;class g{constructor({baseUrl:_=null}){this.constructor===g&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${_}`;return this._fetchData(et).catch(nt=>{throw new Error(`Unable to load font data at: ${et}`)})}_fetchData(_){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=g;class h{constructor(){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,et,nt=!1){if(_<=0||et<=0)throw new Error("Invalid SVG dimensions");const st=this._createSVG("svg:svg");return st.setAttribute("version","1.1"),nt||(st.setAttribute("width",`${_}px`),st.setAttribute("height",`${et}px`)),st.setAttribute("preserveAspectRatio","none"),st.setAttribute("viewBox",`0 0 ${_} ${et}`),st}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,a.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=h},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var a=s(1);const o=3285377520,c=4294901760,d=65535;class g{constructor(b){this.h1=b?b&4294967295:o,this.h2=b?b&4294967295:o}update(b){let _,et;if(typeof b=="string"){_=new Uint8Array(b.length*2),et=0;for(let it=0,lt=b.length;it<lt;it++){const mt=b.charCodeAt(it);mt<=255?_[et++]=mt:(_[et++]=mt>>>8,_[et++]=mt&255)}}else if((0,a.isArrayBuffer)(b))_=b.slice(),et=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const nt=et>>2,st=et-nt*4,ot=new Uint32Array(_.buffer,0,nt);let ht=0,dt=0,$=this.h1,_e=this.h2;const ct=3432918353,pt=461845907,tt=ct&d,ut=pt&d;for(let it=0;it<nt;it++)it&1?(ht=ot[it],ht=ht*ct&c|ht*tt&d,ht=ht<<15|ht>>>17,ht=ht*pt&c|ht*ut&d,$^=ht,$=$<<13|$>>>19,$=$*5+3864292196):(dt=ot[it],dt=dt*ct&c|dt*tt&d,dt=dt<<15|dt>>>17,dt=dt*pt&c|dt*ut&d,_e^=dt,_e=_e<<13|_e>>>19,_e=_e*5+3864292196);switch(ht=0,st){case 3:ht^=_[nt*4+2]<<16;case 2:ht^=_[nt*4+1]<<8;case 1:ht^=_[nt*4],ht=ht*ct&c|ht*tt&d,ht=ht<<15|ht>>>17,ht=ht*pt&c|ht*ut&d,nt&1?$^=ht:_e^=ht}this.h1=$,this.h2=_e}hexdigest(){let b=this.h1,_=this.h2;return b^=_>>>1,b=b*3981806797&c|b*36045&d,_=_*4283543511&c|((_<<16|b>>>16)*2950163797&c)>>>16,b^=_>>>1,b=b*444984403&c|b*60499&d,_=_*3301882366&c|((_<<16|b>>>16)*3120437893&c)>>>16,b^=_>>>1,(b>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}i.MurmurHash3_64=g},(e,i,s)=>{var d;Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var a=s(1);class o{constructor({ownerDocument:h=globalThis.document,styleElement:b=null}){qt(this,d,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const b=this.styleElement.sheet;b.insertRule(h,b.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),j(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||j(this,d).has(h.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:b,src:_,style:et}=h,nt=new FontFace(b,_,et);this.addNativeFontFace(nt);try{await nt.load(),j(this,d).add(b)}catch{(0,a.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(nt)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const _=h.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(et){throw(0,a.warn)(`Failed to load font '${_.family}': '${et}'.`),h.disableFontFace=!0,et}}return}const b=h.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const et=this._queueLoadingCallback(_);this._prepareFontLoadEvent(h,et)})}}get isFontLoadingAPISupported(){var b;const h=!!((b=this._document)!=null&&b.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function b(){for((0,a.assert)(!et.done,"completeRequest() cannot be called twice."),et.done=!0;_.length>0&&_[0].done;){const nt=_.shift();setTimeout(nt.callback,0)}}const{loadingRequests:_}=this,et={done:!1,complete:b,callback:h};return _.push(et),et}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,b){function _(ft,xt){return ft.charCodeAt(xt)<<24|ft.charCodeAt(xt+1)<<16|ft.charCodeAt(xt+2)<<8|ft.charCodeAt(xt+3)&255}function et(ft,xt,kt,Dt){const Ot=ft.substring(0,xt),Bt=ft.substring(xt+kt);return Ot+Dt+Bt}let nt,st;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const ht=ot.getContext("2d");let dt=0;function $(ft,xt){if(++dt>30){(0,a.warn)("Load test font never loaded."),xt();return}if(ht.font="30px "+ft,ht.fillText(".",0,20),ht.getImageData(0,0,1,1).data[3]>0){xt();return}setTimeout($.bind(null,ft,xt))}const _e=`lt${Date.now()}${this.loadTestFontId++}`;let ct=this._loadTestFont;ct=et(ct,976,_e.length,_e);const tt=16,ut=1482184792;let it=_(ct,tt);for(nt=0,st=_e.length-3;nt<st;nt+=4)it=it-ut+_(_e,nt)|0;nt<_e.length&&(it=it-ut+_(_e+"XXX",nt)|0),ct=et(ct,tt,4,(0,a.string32)(it));const lt=`url(data:font/opentype;base64,${btoa(ct)});`,mt=`@font-face {font-family:"${_e}";src:${lt}}`;this.insertRule(mt);const Et=this._document.createElement("div");Et.style.visibility="hidden",Et.style.width=Et.style.height="10px",Et.style.position="absolute",Et.style.top=Et.style.left="0px";for(const ft of[h.loadedName,_e]){const xt=this._document.createElement("span");xt.textContent="Hi",xt.style.fontFamily=ft,Et.append(xt)}this._document.body.append(Et),$(_e,()=>{Et.remove(),b.complete()})}}d=new WeakMap,i.FontLoader=o;class c{constructor(h,{isEvalSupported:b=!0,disableFontFace:_=!1,ignoreErrors:et=!1,inspectFont:nt=null}){this.compiledGlyphs=Object.create(null);for(const st in h)this[st]=h[st];this.isEvalSupported=b!==!1,this.disableFontFace=_===!0,this.ignoreErrors=et===!0,this._inspectFont=nt}createNativeFontFace(){var b;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(b=this._inspectFont)==null||b.call(this,this),h}createFontFaceRule(){var et;if(!this.data||this.disableFontFace)return null;const h=(0,a.bytesToString)(this.data),b=`url(data:${this.mimetype};base64,${btoa(h)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${b}}`;else{let nt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(nt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${nt}src:${b}}`}return(et=this._inspectFont)==null||et.call(this,this,b),_}getPathGenerator(h,b){if(this.compiledGlyphs[b]!==void 0)return this.compiledGlyphs[b];let _;try{_=h.get(this.loadedName+"_path_"+b)}catch(et){if(!this.ignoreErrors)throw et;return(0,a.warn)(`getPathGenerator - ignoring character: "${et}".`),this.compiledGlyphs[b]=function(nt,st){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const et=[];for(const nt of _){const st=nt.args!==void 0?nt.args.join(","):"";et.push("c.",nt.cmd,"(",st,`);
`)}return this.compiledGlyphs[b]=new Function("c","size",et.join(""))}return this.compiledGlyphs[b]=function(et,nt){for(const st of _)st.cmd==="scale"&&(st.args=[nt,-nt]),et[st.cmd].apply(et,st.args)}}}i.FontFaceObject=c},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeFilterFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var a=s(7);s(1);const o=function(b){return new Promise((_,et)=>{require$$5.readFile(b,(st,ot)=>{if(st||!ot){et(new Error(st));return}_(new Uint8Array(ot))})})};class c extends a.BaseFilterFactory{}i.NodeFilterFactory=c;class d extends a.BaseCanvasFactory{_createCanvas(_,et){return require$$5.createCanvas(_,et)}}i.NodeCanvasFactory=d;class g extends a.BaseCMapReaderFactory{_fetchData(_,et){return o(_).then(nt=>({cMapData:nt,compressionType:et}))}}i.NodeCMapReaderFactory=g;class h extends a.BaseStandardFontDataFactory{_fetchData(_){return o(_)}}i.NodeStandardFontDataFactory=h},(e,i,s)=>{var Mt,Fr,Mr;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var a=s(1),o=s(6),c=s(12),d=s(13);const g=16,h=100,b=4096,_=15,et=10,nt=1e3,st=16;function ot(_t,rt){if(_t._removeMirroring)throw new Error("Context is already forwarding operations.");_t.__originalSave=_t.save,_t.__originalRestore=_t.restore,_t.__originalRotate=_t.rotate,_t.__originalScale=_t.scale,_t.__originalTranslate=_t.translate,_t.__originalTransform=_t.transform,_t.__originalSetTransform=_t.setTransform,_t.__originalResetTransform=_t.resetTransform,_t.__originalClip=_t.clip,_t.__originalMoveTo=_t.moveTo,_t.__originalLineTo=_t.lineTo,_t.__originalBezierCurveTo=_t.bezierCurveTo,_t.__originalRect=_t.rect,_t.__originalClosePath=_t.closePath,_t.__originalBeginPath=_t.beginPath,_t._removeMirroring=()=>{_t.save=_t.__originalSave,_t.restore=_t.__originalRestore,_t.rotate=_t.__originalRotate,_t.scale=_t.__originalScale,_t.translate=_t.__originalTranslate,_t.transform=_t.__originalTransform,_t.setTransform=_t.__originalSetTransform,_t.resetTransform=_t.__originalResetTransform,_t.clip=_t.__originalClip,_t.moveTo=_t.__originalMoveTo,_t.lineTo=_t.__originalLineTo,_t.bezierCurveTo=_t.__originalBezierCurveTo,_t.rect=_t.__originalRect,_t.closePath=_t.__originalClosePath,_t.beginPath=_t.__originalBeginPath,delete _t._removeMirroring},_t.save=function(){rt.save(),this.__originalSave()},_t.restore=function(){rt.restore(),this.__originalRestore()},_t.translate=function(gt,wt){rt.translate(gt,wt),this.__originalTranslate(gt,wt)},_t.scale=function(gt,wt){rt.scale(gt,wt),this.__originalScale(gt,wt)},_t.transform=function(gt,wt,St,Tt,Lt,Kt){rt.transform(gt,wt,St,Tt,Lt,Kt),this.__originalTransform(gt,wt,St,Tt,Lt,Kt)},_t.setTransform=function(gt,wt,St,Tt,Lt,Kt){rt.setTransform(gt,wt,St,Tt,Lt,Kt),this.__originalSetTransform(gt,wt,St,Tt,Lt,Kt)},_t.resetTransform=function(){rt.resetTransform(),this.__originalResetTransform()},_t.rotate=function(gt){rt.rotate(gt),this.__originalRotate(gt)},_t.clip=function(gt){rt.clip(gt),this.__originalClip(gt)},_t.moveTo=function(at,gt){rt.moveTo(at,gt),this.__originalMoveTo(at,gt)},_t.lineTo=function(at,gt){rt.lineTo(at,gt),this.__originalLineTo(at,gt)},_t.bezierCurveTo=function(at,gt,wt,St,Tt,Lt){rt.bezierCurveTo(at,gt,wt,St,Tt,Lt),this.__originalBezierCurveTo(at,gt,wt,St,Tt,Lt)},_t.rect=function(at,gt,wt,St){rt.rect(at,gt,wt,St),this.__originalRect(at,gt,wt,St)},_t.closePath=function(){rt.closePath(),this.__originalClosePath()},_t.beginPath=function(){rt.beginPath(),this.__originalBeginPath()}}class ht{constructor(rt){this.canvasFactory=rt,this.cache=Object.create(null)}getCanvas(rt,at,gt){let wt;return this.cache[rt]!==void 0?(wt=this.cache[rt],this.canvasFactory.reset(wt,at,gt)):(wt=this.canvasFactory.create(at,gt),this.cache[rt]=wt),wt}delete(rt){delete this.cache[rt]}clear(){for(const rt in this.cache){const at=this.cache[rt];this.canvasFactory.destroy(at),delete this.cache[rt]}}}function dt(_t,rt,at,gt,wt,St,Tt,Lt,Kt,en){const[Qt,rn,on,ln,Wt,Ht]=(0,o.getCurrentTransform)(_t);if(rn===0&&on===0){const Ut=Tt*Qt+Wt,Vt=Math.round(Ut),tn=Lt*ln+Ht,cn=Math.round(tn),zt=(Tt+Kt)*Qt+Wt,It=Math.abs(Math.round(zt)-Vt)||1,dn=(Lt+en)*ln+Ht,un=Math.abs(Math.round(dn)-cn)||1;return _t.setTransform(Math.sign(Qt),0,0,Math.sign(ln),Vt,cn),_t.drawImage(rt,at,gt,wt,St,0,0,It,un),_t.setTransform(Qt,rn,on,ln,Wt,Ht),[It,un]}if(Qt===0&&ln===0){const Ut=Lt*on+Wt,Vt=Math.round(Ut),tn=Tt*rn+Ht,cn=Math.round(tn),zt=(Lt+en)*on+Wt,It=Math.abs(Math.round(zt)-Vt)||1,dn=(Tt+Kt)*rn+Ht,un=Math.abs(Math.round(dn)-cn)||1;return _t.setTransform(0,Math.sign(rn),Math.sign(on),0,Vt,cn),_t.drawImage(rt,at,gt,wt,St,0,0,un,It),_t.setTransform(Qt,rn,on,ln,Wt,Ht),[un,It]}_t.drawImage(rt,at,gt,wt,St,Tt,Lt,Kt,en);const yt=Math.hypot(Qt,rn),Ct=Math.hypot(on,ln);return[yt*Kt,Ct*en]}function $(_t){const{width:rt,height:at}=_t;if(rt>nt||at>nt)return null;const gt=1e3,wt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),St=rt+1;let Tt=new Uint8Array(St*(at+1)),Lt,Kt,en;const Qt=rt+7&-8;let rn=new Uint8Array(Qt*at),on=0;for(const Ct of _t.data){let Ut=128;for(;Ut>0;)rn[on++]=Ct&Ut?0:255,Ut>>=1}let ln=0;for(on=0,rn[on]!==0&&(Tt[0]=1,++ln),Kt=1;Kt<rt;Kt++)rn[on]!==rn[on+1]&&(Tt[Kt]=rn[on]?2:1,++ln),on++;for(rn[on]!==0&&(Tt[Kt]=2,++ln),Lt=1;Lt<at;Lt++){on=Lt*Qt,en=Lt*St,rn[on-Qt]!==rn[on]&&(Tt[en]=rn[on]?1:8,++ln);let Ct=(rn[on]?4:0)+(rn[on-Qt]?8:0);for(Kt=1;Kt<rt;Kt++)Ct=(Ct>>2)+(rn[on+1]?4:0)+(rn[on-Qt+1]?8:0),wt[Ct]&&(Tt[en+Kt]=wt[Ct],++ln),on++;if(rn[on-Qt]!==rn[on]&&(Tt[en+Kt]=rn[on]?2:4,++ln),ln>gt)return null}for(on=Qt*(at-1),en=Lt*St,rn[on]!==0&&(Tt[en]=8,++ln),Kt=1;Kt<rt;Kt++)rn[on]!==rn[on+1]&&(Tt[en+Kt]=rn[on]?4:8,++ln),on++;if(rn[on]!==0&&(Tt[en+Kt]=4,++ln),ln>gt)return null;const Wt=new Int32Array([0,St,-1,0,-St,0,0,0,1]),Ht=new Path2D;for(Lt=0;ln&&Lt<=at;Lt++){let Ct=Lt*St;const Ut=Ct+rt;for(;Ct<Ut&&!Tt[Ct];)Ct++;if(Ct===Ut)continue;Ht.moveTo(Ct%St,Lt);const Vt=Ct;let tn=Tt[Ct];do{const cn=Wt[tn];do Ct+=cn;while(!Tt[Ct]);const zt=Tt[Ct];zt!==5&&zt!==10?(tn=zt,Tt[Ct]=0):(tn=zt&51*tn>>4,Tt[Ct]&=tn>>2|tn<<2),Ht.lineTo(Ct%St,Ct/St|0),Tt[Ct]||--ln}while(Vt!==Ct);--Lt}return rn=null,Tt=null,function(Ct){Ct.save(),Ct.scale(1/rt,-1/at),Ct.translate(0,-at),Ct.fill(Ht),Ct.beginPath(),Ct.restore()}}class _e{constructor(rt,at){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,rt,at])}clone(){const rt=Object.create(this);return rt.clipBox=this.clipBox.slice(),rt}setCurrentPoint(rt,at){this.x=rt,this.y=at}updatePathMinMax(rt,at,gt){[at,gt]=a.Util.applyTransform([at,gt],rt),this.minX=Math.min(this.minX,at),this.minY=Math.min(this.minY,gt),this.maxX=Math.max(this.maxX,at),this.maxY=Math.max(this.maxY,gt)}updateRectMinMax(rt,at){const gt=a.Util.applyTransform(at,rt),wt=a.Util.applyTransform(at.slice(2),rt);this.minX=Math.min(this.minX,gt[0],wt[0]),this.minY=Math.min(this.minY,gt[1],wt[1]),this.maxX=Math.max(this.maxX,gt[0],wt[0]),this.maxY=Math.max(this.maxY,gt[1],wt[1])}updateScalingPathMinMax(rt,at){a.Util.scaleMinMax(rt,at),this.minX=Math.min(this.minX,at[0]),this.maxX=Math.max(this.maxX,at[1]),this.minY=Math.min(this.minY,at[2]),this.maxY=Math.max(this.maxY,at[3])}updateCurvePathMinMax(rt,at,gt,wt,St,Tt,Lt,Kt,en,Qt){const rn=a.Util.bezierBoundingBox(at,gt,wt,St,Tt,Lt,Kt,en);if(Qt){Qt[0]=Math.min(Qt[0],rn[0],rn[2]),Qt[1]=Math.max(Qt[1],rn[0],rn[2]),Qt[2]=Math.min(Qt[2],rn[1],rn[3]),Qt[3]=Math.max(Qt[3],rn[1],rn[3]);return}this.updateRectMinMax(rt,rn)}getPathBoundingBox(rt=c.PathType.FILL,at=null){const gt=[this.minX,this.minY,this.maxX,this.maxY];if(rt===c.PathType.STROKE){at||(0,a.unreachable)("Stroke bounding box must include transform.");const wt=a.Util.singularValueDecompose2dScale(at),St=wt[0]*this.lineWidth/2,Tt=wt[1]*this.lineWidth/2;gt[0]-=St,gt[1]-=Tt,gt[2]+=St,gt[3]+=Tt}return gt}updateClipFromPath(){const rt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(rt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(rt){this.clipBox=rt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(rt=c.PathType.FILL,at=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(rt,at))}}function ct(_t,rt){if(typeof ImageData<"u"&&rt instanceof ImageData){_t.putImageData(rt,0,0);return}const at=rt.height,gt=rt.width,wt=at%st,St=(at-wt)/st,Tt=wt===0?St:St+1,Lt=_t.createImageData(gt,st);let Kt=0,en;const Qt=rt.data,rn=Lt.data;let on,ln,Wt,Ht;if(rt.kind===a.ImageKind.GRAYSCALE_1BPP){const yt=Qt.byteLength,Ct=new Uint32Array(rn.buffer,0,rn.byteLength>>2),Ut=Ct.length,Vt=gt+7>>3,tn=4294967295,cn=a.FeatureTest.isLittleEndian?4278190080:255;for(on=0;on<Tt;on++){for(Wt=on<St?st:wt,en=0,ln=0;ln<Wt;ln++){const zt=yt-Kt;let It=0;const dn=zt>Vt?gt:zt*8-7,un=dn&-8;let Sn=0,kn=0;for(;It<un;It+=8)kn=Qt[Kt++],Ct[en++]=kn&128?tn:cn,Ct[en++]=kn&64?tn:cn,Ct[en++]=kn&32?tn:cn,Ct[en++]=kn&16?tn:cn,Ct[en++]=kn&8?tn:cn,Ct[en++]=kn&4?tn:cn,Ct[en++]=kn&2?tn:cn,Ct[en++]=kn&1?tn:cn;for(;It<dn;It++)Sn===0&&(kn=Qt[Kt++],Sn=128),Ct[en++]=kn&Sn?tn:cn,Sn>>=1}for(;en<Ut;)Ct[en++]=0;_t.putImageData(Lt,0,on*st)}}else if(rt.kind===a.ImageKind.RGBA_32BPP){for(ln=0,Ht=gt*st*4,on=0;on<St;on++)rn.set(Qt.subarray(Kt,Kt+Ht)),Kt+=Ht,_t.putImageData(Lt,0,ln),ln+=st;on<Tt&&(Ht=gt*wt*4,rn.set(Qt.subarray(Kt,Kt+Ht)),_t.putImageData(Lt,0,ln))}else if(rt.kind===a.ImageKind.RGB_24BPP)for(Wt=st,Ht=gt*Wt,on=0;on<Tt;on++){for(on>=St&&(Wt=wt,Ht=gt*Wt),en=0,ln=Ht;ln--;)rn[en++]=Qt[Kt++],rn[en++]=Qt[Kt++],rn[en++]=Qt[Kt++],rn[en++]=255;_t.putImageData(Lt,0,on*st)}else throw new Error(`bad image kind: ${rt.kind}`)}function pt(_t,rt){if(rt.bitmap){_t.drawImage(rt.bitmap,0,0);return}const at=rt.height,gt=rt.width,wt=at%st,St=(at-wt)/st,Tt=wt===0?St:St+1,Lt=_t.createImageData(gt,st);let Kt=0;const en=rt.data,Qt=Lt.data;for(let rn=0;rn<Tt;rn++){const on=rn<St?st:wt;({srcPos:Kt}=(0,d.convertBlackAndWhiteToRGBA)({src:en,srcPos:Kt,dest:Qt,width:gt,height:on,nonBlackColor:0})),_t.putImageData(Lt,0,rn*st)}}function tt(_t,rt){const at=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const gt of at)_t[gt]!==void 0&&(rt[gt]=_t[gt]);_t.setLineDash!==void 0&&(rt.setLineDash(_t.getLineDash()),rt.lineDashOffset=_t.lineDashOffset)}function ut(_t){if(_t.strokeStyle=_t.fillStyle="#000000",_t.fillRule="nonzero",_t.globalAlpha=1,_t.lineWidth=1,_t.lineCap="butt",_t.lineJoin="miter",_t.miterLimit=10,_t.globalCompositeOperation="source-over",_t.font="10px sans-serif",_t.setLineDash!==void 0&&(_t.setLineDash([]),_t.lineDashOffset=0),!a.isNodeJS){const{filter:rt}=_t;rt!=="none"&&rt!==""&&(_t.filter="none")}}function it(_t,rt,at,gt){const wt=_t.length;for(let St=3;St<wt;St+=4){const Tt=_t[St];if(Tt===0)_t[St-3]=rt,_t[St-2]=at,_t[St-1]=gt;else if(Tt<255){const Lt=255-Tt;_t[St-3]=_t[St-3]*Tt+rt*Lt>>8,_t[St-2]=_t[St-2]*Tt+at*Lt>>8,_t[St-1]=_t[St-1]*Tt+gt*Lt>>8}}}function lt(_t,rt,at){const gt=_t.length,wt=1/255;for(let St=3;St<gt;St+=4){const Tt=at?at[_t[St]]:_t[St];rt[St]=rt[St]*Tt*wt|0}}function mt(_t,rt,at){const gt=_t.length;for(let wt=3;wt<gt;wt+=4){const St=_t[wt-3]*77+_t[wt-2]*152+_t[wt-1]*28;rt[wt]=at?rt[wt]*at[St>>8]>>8:rt[wt]*St>>16}}function Et(_t,rt,at,gt,wt,St,Tt,Lt,Kt,en,Qt){const rn=!!St,on=rn?St[0]:0,ln=rn?St[1]:0,Wt=rn?St[2]:0,Ht=wt==="Luminosity"?mt:lt,Ct=Math.min(gt,Math.ceil(1048576/at));for(let Ut=0;Ut<gt;Ut+=Ct){const Vt=Math.min(Ct,gt-Ut),tn=_t.getImageData(Lt-en,Ut+(Kt-Qt),at,Vt),cn=rt.getImageData(Lt,Ut+Kt,at,Vt);rn&&it(tn.data,on,ln,Wt),Ht(tn.data,cn.data,Tt),rt.putImageData(cn,Lt,Ut+Kt)}}function ft(_t,rt,at,gt){const wt=gt[0],St=gt[1],Tt=gt[2]-wt,Lt=gt[3]-St;Tt===0||Lt===0||(Et(rt.context,at,Tt,Lt,rt.subtype,rt.backdrop,rt.transferMap,wt,St,rt.offsetX,rt.offsetY),_t.save(),_t.globalAlpha=1,_t.globalCompositeOperation="source-over",_t.setTransform(1,0,0,1,0,0),_t.drawImage(at.canvas,0,0),_t.restore())}function xt(_t,rt){const at=a.Util.singularValueDecompose2dScale(_t);at[0]=Math.fround(at[0]),at[1]=Math.fround(at[1]);const gt=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return rt!==void 0?rt:at[0]<=gt||at[1]<=gt}const kt=["butt","round","square"],Dt=["miter","round","bevel"],Ot={},Bt={},$t=class $t{constructor(rt,at,gt,wt,St,{optionalContentConfig:Tt,markedContentStack:Lt=null},Kt,en){qt(this,Mt);this.ctx=rt,this.current=new _e(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=at,this.objs=gt,this.canvasFactory=wt,this.filterFactory=St,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Lt||[],this.optionalContentConfig=Tt,this.cachedCanvases=new ht(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Kt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=en,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(rt,at=null){return typeof rt=="string"?rt.startsWith("g_")?this.commonObjs.get(rt):this.objs.get(rt):at}beginDrawing({transform:rt,viewport:at,transparency:gt=!1,background:wt=null}){const St=this.ctx.canvas.width,Tt=this.ctx.canvas.height,Lt=this.ctx.fillStyle;if(this.ctx.fillStyle=wt||"#ffffff",this.ctx.fillRect(0,0,St,Tt),this.ctx.fillStyle=Lt,gt){const Kt=this.cachedCanvases.getCanvas("transparent",St,Tt);this.compositeCtx=this.ctx,this.transparentCanvas=Kt.canvas,this.ctx=Kt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ut(this.ctx),rt&&(this.ctx.transform(...rt),this.outputScaleX=rt[0],this.outputScaleY=rt[0]),this.ctx.transform(...at.transform),this.viewportScale=at.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(rt,at,gt,wt){const St=rt.argsArray,Tt=rt.fnArray;let Lt=at||0;const Kt=St.length;if(Kt===Lt)return Lt;const en=Kt-Lt>et&&typeof gt=="function",Qt=en?Date.now()+_:0;let rn=0;const on=this.commonObjs,ln=this.objs;let Wt;for(;;){if(wt!==void 0&&Lt===wt.nextBreakPoint)return wt.breakIt(Lt,gt),Lt;if(Wt=Tt[Lt],Wt!==a.OPS.dependency)this[Wt].apply(this,St[Lt]);else for(const Ht of St[Lt]){const yt=Ht.startsWith("g_")?on:ln;if(!yt.has(Ht))return yt.get(Ht,gt),Lt}if(Lt++,Lt===Kt)return Lt;if(en&&++rn>et){if(Date.now()>Qt)return gt(),Lt;rn=0}}}endDrawing(){Nt(this,Mt,Fr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const rt of this._cachedBitmapsMap.values()){for(const at of rt.values())typeof HTMLCanvasElement<"u"&&at instanceof HTMLCanvasElement&&(at.width=at.height=0);rt.clear()}this._cachedBitmapsMap.clear(),Nt(this,Mt,Mr).call(this)}_scaleImage(rt,at){const gt=rt.width,wt=rt.height;let St=Math.max(Math.hypot(at[0],at[1]),1),Tt=Math.max(Math.hypot(at[2],at[3]),1),Lt=gt,Kt=wt,en="prescale1",Qt,rn;for(;St>2&&Lt>1||Tt>2&&Kt>1;){let on=Lt,ln=Kt;St>2&&Lt>1&&(on=Lt>=16384?Math.floor(Lt/2)-1||1:Math.ceil(Lt/2),St/=Lt/on),Tt>2&&Kt>1&&(ln=Kt>=16384?Math.floor(Kt/2)-1||1:Math.ceil(Kt)/2,Tt/=Kt/ln),Qt=this.cachedCanvases.getCanvas(en,on,ln),rn=Qt.context,rn.clearRect(0,0,on,ln),rn.drawImage(rt,0,0,Lt,Kt,0,0,on,ln),rt=Qt.canvas,Lt=on,Kt=ln,en=en==="prescale1"?"prescale2":"prescale1"}return{img:rt,paintWidth:Lt,paintHeight:Kt}}_createMaskCanvas(rt){const at=this.ctx,{width:gt,height:wt}=rt,St=this.current.fillColor,Tt=this.current.patternFill,Lt=(0,o.getCurrentTransform)(at);let Kt,en,Qt,rn;if((rt.bitmap||rt.data)&&rt.count>1){const It=rt.bitmap||rt.data.buffer;en=JSON.stringify(Tt?Lt:[Lt.slice(0,4),St]),Kt=this._cachedBitmapsMap.get(It),Kt||(Kt=new Map,this._cachedBitmapsMap.set(It,Kt));const dn=Kt.get(en);if(dn&&!Tt){const un=Math.round(Math.min(Lt[0],Lt[2])+Lt[4]),Sn=Math.round(Math.min(Lt[1],Lt[3])+Lt[5]);return{canvas:dn,offsetX:un,offsetY:Sn}}Qt=dn}Qt||(rn=this.cachedCanvases.getCanvas("maskCanvas",gt,wt),pt(rn.context,rt));let on=a.Util.transform(Lt,[1/gt,0,0,-1/wt,0,0]);on=a.Util.transform(on,[1,0,0,1,0,-wt]);const ln=a.Util.applyTransform([0,0],on),Wt=a.Util.applyTransform([gt,wt],on),Ht=a.Util.normalizeRect([ln[0],ln[1],Wt[0],Wt[1]]),yt=Math.round(Ht[2]-Ht[0])||1,Ct=Math.round(Ht[3]-Ht[1])||1,Ut=this.cachedCanvases.getCanvas("fillCanvas",yt,Ct),Vt=Ut.context,tn=Math.min(ln[0],Wt[0]),cn=Math.min(ln[1],Wt[1]);Vt.translate(-tn,-cn),Vt.transform(...on),Qt||(Qt=this._scaleImage(rn.canvas,(0,o.getCurrentTransformInverse)(Vt)),Qt=Qt.img,Kt&&Tt&&Kt.set(en,Qt)),Vt.imageSmoothingEnabled=xt((0,o.getCurrentTransform)(Vt),rt.interpolate),dt(Vt,Qt,0,0,Qt.width,Qt.height,0,0,gt,wt),Vt.globalCompositeOperation="source-in";const zt=a.Util.transform((0,o.getCurrentTransformInverse)(Vt),[1,0,0,1,-tn,-cn]);return Vt.fillStyle=Tt?St.getPattern(at,this,zt,c.PathType.FILL):St,Vt.fillRect(0,0,gt,wt),Kt&&!Tt&&(this.cachedCanvases.delete("fillCanvas"),Kt.set(en,Ut.canvas)),{canvas:Ut.canvas,offsetX:Math.round(tn),offsetY:Math.round(cn)}}setLineWidth(rt){rt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=rt,this.ctx.lineWidth=rt}setLineCap(rt){this.ctx.lineCap=kt[rt]}setLineJoin(rt){this.ctx.lineJoin=Dt[rt]}setMiterLimit(rt){this.ctx.miterLimit=rt}setDash(rt,at){const gt=this.ctx;gt.setLineDash!==void 0&&(gt.setLineDash(rt),gt.lineDashOffset=at)}setRenderingIntent(rt){}setFlatness(rt){}setGState(rt){for(const[at,gt]of rt)switch(at){case"LW":this.setLineWidth(gt);break;case"LC":this.setLineCap(gt);break;case"LJ":this.setLineJoin(gt);break;case"ML":this.setMiterLimit(gt);break;case"D":this.setDash(gt[0],gt[1]);break;case"RI":this.setRenderingIntent(gt);break;case"FL":this.setFlatness(gt);break;case"Font":this.setFont(gt[0],gt[1]);break;case"CA":this.current.strokeAlpha=gt;break;case"ca":this.current.fillAlpha=gt,this.ctx.globalAlpha=gt;break;case"BM":this.ctx.globalCompositeOperation=gt;break;case"SMask":this.current.activeSMask=gt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(gt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const rt=this.inSMaskMode;this.current.activeSMask&&!rt?this.beginSMaskMode():!this.current.activeSMask&&rt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const rt=this.ctx.canvas.width,at=this.ctx.canvas.height,gt="smaskGroupAt"+this.groupLevel,wt=this.cachedCanvases.getCanvas(gt,rt,at);this.suspendedCtx=this.ctx,this.ctx=wt.context;const St=this.ctx;St.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),tt(this.suspendedCtx,St),ot(St,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),tt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(rt){if(!this.current.activeSMask)return;rt?(rt[0]=Math.floor(rt[0]),rt[1]=Math.floor(rt[1]),rt[2]=Math.ceil(rt[2]),rt[3]=Math.ceil(rt[3])):rt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const at=this.current.activeSMask,gt=this.suspendedCtx;ft(gt,at,this.ctx,rt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(tt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const rt=this.current;this.stateStack.push(rt),this.current=rt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),tt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(rt,at,gt,wt,St,Tt){this.ctx.transform(rt,at,gt,wt,St,Tt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(rt,at,gt){const wt=this.ctx,St=this.current;let Tt=St.x,Lt=St.y,Kt,en;const Qt=(0,o.getCurrentTransform)(wt),rn=Qt[0]===0&&Qt[3]===0||Qt[1]===0&&Qt[2]===0,on=rn?gt.slice(0):null;for(let ln=0,Wt=0,Ht=rt.length;ln<Ht;ln++)switch(rt[ln]|0){case a.OPS.rectangle:Tt=at[Wt++],Lt=at[Wt++];const yt=at[Wt++],Ct=at[Wt++],Ut=Tt+yt,Vt=Lt+Ct;wt.moveTo(Tt,Lt),yt===0||Ct===0?wt.lineTo(Ut,Vt):(wt.lineTo(Ut,Lt),wt.lineTo(Ut,Vt),wt.lineTo(Tt,Vt)),rn||St.updateRectMinMax(Qt,[Tt,Lt,Ut,Vt]),wt.closePath();break;case a.OPS.moveTo:Tt=at[Wt++],Lt=at[Wt++],wt.moveTo(Tt,Lt),rn||St.updatePathMinMax(Qt,Tt,Lt);break;case a.OPS.lineTo:Tt=at[Wt++],Lt=at[Wt++],wt.lineTo(Tt,Lt),rn||St.updatePathMinMax(Qt,Tt,Lt);break;case a.OPS.curveTo:Kt=Tt,en=Lt,Tt=at[Wt+4],Lt=at[Wt+5],wt.bezierCurveTo(at[Wt],at[Wt+1],at[Wt+2],at[Wt+3],Tt,Lt),St.updateCurvePathMinMax(Qt,Kt,en,at[Wt],at[Wt+1],at[Wt+2],at[Wt+3],Tt,Lt,on),Wt+=6;break;case a.OPS.curveTo2:Kt=Tt,en=Lt,wt.bezierCurveTo(Tt,Lt,at[Wt],at[Wt+1],at[Wt+2],at[Wt+3]),St.updateCurvePathMinMax(Qt,Kt,en,Tt,Lt,at[Wt],at[Wt+1],at[Wt+2],at[Wt+3],on),Tt=at[Wt+2],Lt=at[Wt+3],Wt+=4;break;case a.OPS.curveTo3:Kt=Tt,en=Lt,Tt=at[Wt+2],Lt=at[Wt+3],wt.bezierCurveTo(at[Wt],at[Wt+1],Tt,Lt,Tt,Lt),St.updateCurvePathMinMax(Qt,Kt,en,at[Wt],at[Wt+1],Tt,Lt,Tt,Lt,on),Wt+=4;break;case a.OPS.closePath:wt.closePath();break}rn&&St.updateScalingPathMinMax(Qt,on),St.setCurrentPoint(Tt,Lt)}closePath(){this.ctx.closePath()}stroke(rt=!0){const at=this.ctx,gt=this.current.strokeColor;at.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof gt=="object"&&(gt!=null&&gt.getPattern)?(at.save(),at.strokeStyle=gt.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.STROKE),this.rescaleAndStroke(!1),at.restore()):this.rescaleAndStroke(!0)),rt&&this.consumePath(this.current.getClippedPathBoundingBox()),at.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(rt=!0){const at=this.ctx,gt=this.current.fillColor,wt=this.current.patternFill;let St=!1;wt&&(at.save(),at.fillStyle=gt.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.FILL),St=!0);const Tt=this.current.getClippedPathBoundingBox();this.contentVisible&&Tt!==null&&(this.pendingEOFill?(at.fill("evenodd"),this.pendingEOFill=!1):at.fill()),St&&at.restore(),rt&&this.consumePath(Tt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ot}eoClip(){this.pendingClip=Bt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const rt=this.pendingTextPaths,at=this.ctx;if(rt===void 0){at.beginPath();return}at.save(),at.beginPath();for(const gt of rt)at.setTransform(...gt.transform),at.translate(gt.x,gt.y),gt.addToPath(at,gt.fontSize);at.restore(),at.clip(),at.beginPath(),delete this.pendingTextPaths}setCharSpacing(rt){this.current.charSpacing=rt}setWordSpacing(rt){this.current.wordSpacing=rt}setHScale(rt){this.current.textHScale=rt/100}setLeading(rt){this.current.leading=-rt}setFont(rt,at){var Qt;const gt=this.commonObjs.get(rt),wt=this.current;if(!gt)throw new Error(`Can't find font for ${rt}`);if(wt.fontMatrix=gt.fontMatrix||a.FONT_IDENTITY_MATRIX,(wt.fontMatrix[0]===0||wt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+rt),at<0?(at=-at,wt.fontDirection=-1):wt.fontDirection=1,this.current.font=gt,this.current.fontSize=at,gt.isType3Font)return;const St=gt.loadedName||"sans-serif",Tt=((Qt=gt.systemFontInfo)==null?void 0:Qt.css)||`"${St}", ${gt.fallbackName}`;let Lt="normal";gt.black?Lt="900":gt.bold&&(Lt="bold");const Kt=gt.italic?"italic":"normal";let en=at;at<g?en=g:at>h&&(en=h),this.current.fontSizeScale=at/en,this.ctx.font=`${Kt} ${Lt} ${en}px ${Tt}`}setTextRenderingMode(rt){this.current.textRenderingMode=rt}setTextRise(rt){this.current.textRise=rt}moveText(rt,at){this.current.x=this.current.lineX+=rt,this.current.y=this.current.lineY+=at}setLeadingMoveText(rt,at){this.setLeading(-at),this.moveText(rt,at)}setTextMatrix(rt,at,gt,wt,St,Tt){this.current.textMatrix=[rt,at,gt,wt,St,Tt],this.current.textMatrixScale=Math.hypot(rt,at),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(rt,at,gt,wt){const St=this.ctx,Tt=this.current,Lt=Tt.font,Kt=Tt.textRenderingMode,en=Tt.fontSize/Tt.fontSizeScale,Qt=Kt&a.TextRenderingMode.FILL_STROKE_MASK,rn=!!(Kt&a.TextRenderingMode.ADD_TO_PATH_FLAG),on=Tt.patternFill&&!Lt.missingFile;let ln;(Lt.disableFontFace||rn||on)&&(ln=Lt.getPathGenerator(this.commonObjs,rt)),Lt.disableFontFace||on?(St.save(),St.translate(at,gt),St.beginPath(),ln(St,en),wt&&St.setTransform(...wt),(Qt===a.TextRenderingMode.FILL||Qt===a.TextRenderingMode.FILL_STROKE)&&St.fill(),(Qt===a.TextRenderingMode.STROKE||Qt===a.TextRenderingMode.FILL_STROKE)&&St.stroke(),St.restore()):((Qt===a.TextRenderingMode.FILL||Qt===a.TextRenderingMode.FILL_STROKE)&&St.fillText(rt,at,gt),(Qt===a.TextRenderingMode.STROKE||Qt===a.TextRenderingMode.FILL_STROKE)&&St.strokeText(rt,at,gt)),rn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(St),x:at,y:gt,fontSize:en,addToPath:ln})}get isFontSubpixelAAEnabled(){const{context:rt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);rt.scale(1.5,1),rt.fillText("I",0,10);const at=rt.getImageData(0,0,10,10).data;let gt=!1;for(let wt=3;wt<at.length;wt+=4)if(at[wt]>0&&at[wt]<255){gt=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",gt)}showText(rt){const at=this.current,gt=at.font;if(gt.isType3Font)return this.showType3Text(rt);const wt=at.fontSize;if(wt===0)return;const St=this.ctx,Tt=at.fontSizeScale,Lt=at.charSpacing,Kt=at.wordSpacing,en=at.fontDirection,Qt=at.textHScale*en,rn=rt.length,on=gt.vertical,ln=on?1:-1,Wt=gt.defaultVMetrics,Ht=wt*at.fontMatrix[0],yt=at.textRenderingMode===a.TextRenderingMode.FILL&&!gt.disableFontFace&&!at.patternFill;St.save(),St.transform(...at.textMatrix),St.translate(at.x,at.y+at.textRise),en>0?St.scale(Qt,-1):St.scale(Qt,1);let Ct;if(at.patternFill){St.save();const zt=at.fillColor.getPattern(St,this,(0,o.getCurrentTransformInverse)(St),c.PathType.FILL);Ct=(0,o.getCurrentTransform)(St),St.restore(),St.fillStyle=zt}let Ut=at.lineWidth;const Vt=at.textMatrixScale;if(Vt===0||Ut===0){const zt=at.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(zt===a.TextRenderingMode.STROKE||zt===a.TextRenderingMode.FILL_STROKE)&&(Ut=this.getSinglePixelWidth())}else Ut/=Vt;if(Tt!==1&&(St.scale(Tt,Tt),Ut/=Tt),St.lineWidth=Ut,gt.isInvalidPDFjsFont){const zt=[];let It=0;for(const dn of rt)zt.push(dn.unicode),It+=dn.width;St.fillText(zt.join(""),0,0),at.x+=It*Ht*Qt,St.restore(),this.compose();return}let tn=0,cn;for(cn=0;cn<rn;++cn){const zt=rt[cn];if(typeof zt=="number"){tn+=ln*zt*wt/1e3;continue}let It=!1;const dn=(zt.isSpace?Kt:0)+Lt,un=zt.fontChar,Sn=zt.accent;let kn,Pn,vn=zt.width;if(on){const Rn=zt.vmetric||Wt,Mn=-(zt.vmetric?Rn[1]:vn*.5)*Ht,sn=Rn[2]*Ht;vn=Rn?-Rn[0]:vn,kn=Mn/Tt,Pn=(tn+sn)/Tt}else kn=tn/Tt,Pn=0;if(gt.remeasure&&vn>0){const Rn=St.measureText(un).width*1e3/wt*Tt;if(vn<Rn&&this.isFontSubpixelAAEnabled){const Mn=vn/Rn;It=!0,St.save(),St.scale(Mn,1),kn/=Mn}else vn!==Rn&&(kn+=(vn-Rn)/2e3*wt/Tt)}if(this.contentVisible&&(zt.isInFont||gt.missingFile)){if(yt&&!Sn)St.fillText(un,kn,Pn);else if(this.paintChar(un,kn,Pn,Ct),Sn){const Rn=kn+wt*Sn.offset.x/Tt,Mn=Pn-wt*Sn.offset.y/Tt;this.paintChar(Sn.fontChar,Rn,Mn,Ct)}}const wn=on?vn*Ht-dn*en:vn*Ht+dn*en;tn+=wn,It&&St.restore()}on?at.y-=tn:at.x+=tn*Qt,St.restore(),this.compose()}showType3Text(rt){const at=this.ctx,gt=this.current,wt=gt.font,St=gt.fontSize,Tt=gt.fontDirection,Lt=wt.vertical?1:-1,Kt=gt.charSpacing,en=gt.wordSpacing,Qt=gt.textHScale*Tt,rn=gt.fontMatrix||a.FONT_IDENTITY_MATRIX,on=rt.length,ln=gt.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Wt,Ht,yt,Ct;if(!(ln||St===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,at.save(),at.transform(...gt.textMatrix),at.translate(gt.x,gt.y),at.scale(Qt,Tt),Wt=0;Wt<on;++Wt){if(Ht=rt[Wt],typeof Ht=="number"){Ct=Lt*Ht*St/1e3,this.ctx.translate(Ct,0),gt.x+=Ct*Qt;continue}const Ut=(Ht.isSpace?en:0)+Kt,Vt=wt.charProcOperatorList[Ht.operatorListId];if(!Vt){(0,a.warn)(`Type3 character "${Ht.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ht,this.save(),at.scale(St,St),at.transform(...rn),this.executeOperatorList(Vt),this.restore()),yt=a.Util.applyTransform([Ht.width,0],rn)[0]*St+Ut,at.translate(yt,0),gt.x+=yt*Qt}at.restore(),this.processingType3=null}}setCharWidth(rt,at){}setCharWidthAndBounds(rt,at,gt,wt,St,Tt){this.ctx.rect(gt,wt,St-gt,Tt-wt),this.ctx.clip(),this.endPath()}getColorN_Pattern(rt){let at;if(rt[0]==="TilingPattern"){const gt=rt[1],wt=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),St={createCanvasGraphics:Tt=>new $t(Tt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};at=new c.TilingPattern(rt,gt,this.ctx,St,wt)}else at=this._getPattern(rt[1],rt[2]);return at}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(rt,at,gt){const wt=a.Util.makeHexColor(rt,at,gt);this.ctx.strokeStyle=wt,this.current.strokeColor=wt}setFillRGBColor(rt,at,gt){const wt=a.Util.makeHexColor(rt,at,gt);this.ctx.fillStyle=wt,this.current.fillColor=wt,this.current.patternFill=!1}_getPattern(rt,at=null){let gt;return this.cachedPatterns.has(rt)?gt=this.cachedPatterns.get(rt):(gt=(0,c.getShadingPattern)(this.getObject(rt)),this.cachedPatterns.set(rt,gt)),at&&(gt.matrix=at),gt}shadingFill(rt){if(!this.contentVisible)return;const at=this.ctx;this.save();const gt=this._getPattern(rt);at.fillStyle=gt.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.SHADING);const wt=(0,o.getCurrentTransformInverse)(at);if(wt){const{width:St,height:Tt}=at.canvas,[Lt,Kt,en,Qt]=a.Util.getAxialAlignedBoundingBox([0,0,St,Tt],wt);this.ctx.fillRect(Lt,Kt,en-Lt,Qt-Kt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(rt,at){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(rt)&&rt.length===6&&this.transform(...rt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),at)){const gt=at[2]-at[0],wt=at[3]-at[1];this.ctx.rect(at[0],at[1],gt,wt),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),at),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(rt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const at=this.ctx;rt.isolated||(0,a.info)("TODO: Support non-isolated groups."),rt.knockout&&(0,a.warn)("Knockout groups not supported.");const gt=(0,o.getCurrentTransform)(at);if(rt.matrix&&at.transform(...rt.matrix),!rt.bbox)throw new Error("Bounding box is required.");let wt=a.Util.getAxialAlignedBoundingBox(rt.bbox,(0,o.getCurrentTransform)(at));const St=[0,0,at.canvas.width,at.canvas.height];wt=a.Util.intersect(wt,St)||[0,0,0,0];const Tt=Math.floor(wt[0]),Lt=Math.floor(wt[1]);let Kt=Math.max(Math.ceil(wt[2])-Tt,1),en=Math.max(Math.ceil(wt[3])-Lt,1),Qt=1,rn=1;Kt>b&&(Qt=Kt/b,Kt=b),en>b&&(rn=en/b,en=b),this.current.startNewPathAndClipBox([0,0,Kt,en]);let on="groupAt"+this.groupLevel;rt.smask&&(on+="_smask_"+this.smaskCounter++%2);const ln=this.cachedCanvases.getCanvas(on,Kt,en),Wt=ln.context;Wt.scale(1/Qt,1/rn),Wt.translate(-Tt,-Lt),Wt.transform(...gt),rt.smask?this.smaskStack.push({canvas:ln.canvas,context:Wt,offsetX:Tt,offsetY:Lt,scaleX:Qt,scaleY:rn,subtype:rt.smask.subtype,backdrop:rt.smask.backdrop,transferMap:rt.smask.transferMap||null,startTransformInverse:null}):(at.setTransform(1,0,0,1,0,0),at.translate(Tt,Lt),at.scale(Qt,rn),at.save()),tt(at,Wt),this.ctx=Wt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(at),this.groupLevel++}endGroup(rt){if(!this.contentVisible)return;this.groupLevel--;const at=this.ctx,gt=this.groupStack.pop();if(this.ctx=gt,this.ctx.imageSmoothingEnabled=!1,rt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const wt=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...wt);const St=a.Util.getAxialAlignedBoundingBox([0,0,at.canvas.width,at.canvas.height],wt);this.ctx.drawImage(at.canvas,0,0),this.ctx.restore(),this.compose(St)}}beginAnnotation(rt,at,gt,wt,St){if(Nt(this,Mt,Fr).call(this),ut(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(at)&&at.length===4){const Tt=at[2]-at[0],Lt=at[3]-at[1];if(St&&this.annotationCanvasMap){gt=gt.slice(),gt[4]-=at[0],gt[5]-=at[1],at=at.slice(),at[0]=at[1]=0,at[2]=Tt,at[3]=Lt;const[Kt,en]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:Qt}=this,rn=Math.ceil(Tt*this.outputScaleX*Qt),on=Math.ceil(Lt*this.outputScaleY*Qt);this.annotationCanvas=this.canvasFactory.create(rn,on);const{canvas:ln,context:Wt}=this.annotationCanvas;this.annotationCanvasMap.set(rt,ln),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Wt,this.ctx.save(),this.ctx.setTransform(Kt,0,0,-en,0,Lt*en),ut(this.ctx)}else ut(this.ctx),this.ctx.rect(at[0],at[1],Tt,Lt),this.ctx.clip(),this.endPath()}this.current=new _e(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...gt),this.transform(...wt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Nt(this,Mt,Mr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(rt){if(!this.contentVisible)return;const at=rt.count;rt=this.getObject(rt.data,rt),rt.count=at;const gt=this.ctx,wt=this.processingType3;if(wt&&(wt.compiled===void 0&&(wt.compiled=$(rt)),wt.compiled)){wt.compiled(gt);return}const St=this._createMaskCanvas(rt),Tt=St.canvas;gt.save(),gt.setTransform(1,0,0,1,0,0),gt.drawImage(Tt,St.offsetX,St.offsetY),gt.restore(),this.compose()}paintImageMaskXObjectRepeat(rt,at,gt=0,wt=0,St,Tt){if(!this.contentVisible)return;rt=this.getObject(rt.data,rt);const Lt=this.ctx;Lt.save();const Kt=(0,o.getCurrentTransform)(Lt);Lt.transform(at,gt,wt,St,0,0);const en=this._createMaskCanvas(rt);Lt.setTransform(1,0,0,1,en.offsetX-Kt[4],en.offsetY-Kt[5]);for(let Qt=0,rn=Tt.length;Qt<rn;Qt+=2){const on=a.Util.transform(Kt,[at,gt,wt,St,Tt[Qt],Tt[Qt+1]]),[ln,Wt]=a.Util.applyTransform([0,0],on);Lt.drawImage(en.canvas,ln,Wt)}Lt.restore(),this.compose()}paintImageMaskXObjectGroup(rt){if(!this.contentVisible)return;const at=this.ctx,gt=this.current.fillColor,wt=this.current.patternFill;for(const St of rt){const{data:Tt,width:Lt,height:Kt,transform:en}=St,Qt=this.cachedCanvases.getCanvas("maskCanvas",Lt,Kt),rn=Qt.context;rn.save();const on=this.getObject(Tt,St);pt(rn,on),rn.globalCompositeOperation="source-in",rn.fillStyle=wt?gt.getPattern(rn,this,(0,o.getCurrentTransformInverse)(at),c.PathType.FILL):gt,rn.fillRect(0,0,Lt,Kt),rn.restore(),at.save(),at.transform(...en),at.scale(1,-1),dt(at,Qt.canvas,0,0,Lt,Kt,0,-1,1,1),at.restore()}this.compose()}paintImageXObject(rt){if(!this.contentVisible)return;const at=this.getObject(rt);if(!at){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(at)}paintImageXObjectRepeat(rt,at,gt,wt){if(!this.contentVisible)return;const St=this.getObject(rt);if(!St){(0,a.warn)("Dependent image isn't ready yet");return}const Tt=St.width,Lt=St.height,Kt=[];for(let en=0,Qt=wt.length;en<Qt;en+=2)Kt.push({transform:[at,0,0,gt,wt[en],wt[en+1]],x:0,y:0,w:Tt,h:Lt});this.paintInlineImageXObjectGroup(St,Kt)}applyTransferMapsToCanvas(rt){return this.current.transferMaps!=="none"&&(rt.filter=this.current.transferMaps,rt.drawImage(rt.canvas,0,0),rt.filter="none"),rt.canvas}applyTransferMapsToBitmap(rt){if(this.current.transferMaps==="none")return rt.bitmap;const{bitmap:at,width:gt,height:wt}=rt,St=this.cachedCanvases.getCanvas("inlineImage",gt,wt),Tt=St.context;return Tt.filter=this.current.transferMaps,Tt.drawImage(at,0,0),Tt.filter="none",St.canvas}paintInlineImageXObject(rt){if(!this.contentVisible)return;const at=rt.width,gt=rt.height,wt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Lt}=wt;Lt!=="none"&&Lt!==""&&(wt.filter="none")}wt.scale(1/at,-1/gt);let St;if(rt.bitmap)St=this.applyTransferMapsToBitmap(rt);else if(typeof HTMLElement=="function"&&rt instanceof HTMLElement||!rt.data)St=rt;else{const Kt=this.cachedCanvases.getCanvas("inlineImage",at,gt).context;ct(Kt,rt),St=this.applyTransferMapsToCanvas(Kt)}const Tt=this._scaleImage(St,(0,o.getCurrentTransformInverse)(wt));wt.imageSmoothingEnabled=xt((0,o.getCurrentTransform)(wt),rt.interpolate),dt(wt,Tt.img,0,0,Tt.paintWidth,Tt.paintHeight,0,-gt,at,gt),this.compose(),this.restore()}paintInlineImageXObjectGroup(rt,at){if(!this.contentVisible)return;const gt=this.ctx;let wt;if(rt.bitmap)wt=rt.bitmap;else{const St=rt.width,Tt=rt.height,Kt=this.cachedCanvases.getCanvas("inlineImage",St,Tt).context;ct(Kt,rt),wt=this.applyTransferMapsToCanvas(Kt)}for(const St of at)gt.save(),gt.transform(...St.transform),gt.scale(1,-1),dt(gt,wt,St.x,St.y,St.w,St.h,0,-1,1,1),gt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(rt){}markPointProps(rt,at){}beginMarkedContent(rt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(rt,at){rt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(at)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(rt){const at=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(rt);const gt=this.ctx;this.pendingClip&&(at||(this.pendingClip===Bt?gt.clip("evenodd"):gt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),gt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const rt=(0,o.getCurrentTransform)(this.ctx);if(rt[1]===0&&rt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(rt[0]),Math.abs(rt[3]));else{const at=Math.abs(rt[0]*rt[3]-rt[2]*rt[1]),gt=Math.hypot(rt[0],rt[2]),wt=Math.hypot(rt[1],rt[3]);this._cachedGetSinglePixelWidth=Math.max(gt,wt)/at}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:rt}=this.current,{a:at,b:gt,c:wt,d:St}=this.ctx.getTransform();let Tt,Lt;if(gt===0&&wt===0){const Kt=Math.abs(at),en=Math.abs(St);if(Kt===en)if(rt===0)Tt=Lt=1/Kt;else{const Qt=Kt*rt;Tt=Lt=Qt<1?1/Qt:1}else if(rt===0)Tt=1/Kt,Lt=1/en;else{const Qt=Kt*rt,rn=en*rt;Tt=Qt<1?1/Qt:1,Lt=rn<1?1/rn:1}}else{const Kt=Math.abs(at*St-gt*wt),en=Math.hypot(at,gt),Qt=Math.hypot(wt,St);if(rt===0)Tt=Qt/Kt,Lt=en/Kt;else{const rn=rt*Kt;Tt=Qt>rn?Qt/rn:1,Lt=en>rn?en/rn:1}}this._cachedScaleForStroking[0]=Tt,this._cachedScaleForStroking[1]=Lt}return this._cachedScaleForStroking}rescaleAndStroke(rt){const{ctx:at}=this,{lineWidth:gt}=this.current,[wt,St]=this.getScaleForStroking();if(at.lineWidth=gt||1,wt===1&&St===1){at.stroke();return}const Tt=at.getLineDash();if(rt&&at.save(),at.scale(wt,St),Tt.length>0){const Lt=Math.max(wt,St);at.setLineDash(Tt.map(Kt=>Kt/Lt)),at.lineDashOffset/=Lt}at.stroke(),rt&&at.restore()}isContentVisible(){for(let rt=this.markedContentStack.length-1;rt>=0;rt--)if(!this.markedContentStack[rt].visible)return!1;return!0}};Mt=new WeakSet,Fr=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Mr=function(){if(this.pageColors){const rt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(rt!=="none"){const at=this.ctx.filter;this.ctx.filter=rt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=at}}};let Ft=$t;i.CanvasGraphics=Ft;for(const _t in a.OPS)Ft.prototype[_t]!==void 0&&(Ft.prototype[a.OPS[_t]]=Ft.prototype[_t])},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=st;var a=s(1),o=s(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=c;function d($,_e){if(!_e)return;const ct=_e[2]-_e[0],pt=_e[3]-_e[1],tt=new Path2D;tt.rect(_e[0],_e[1],ct,pt),$.clip(tt)}class g{constructor(){this.constructor===g&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class h extends g{constructor(_e){super(),this._type=_e[1],this._bbox=_e[2],this._colorStops=_e[3],this._p0=_e[4],this._p1=_e[5],this._r0=_e[6],this._r1=_e[7],this.matrix=null}_createGradient(_e){let ct;this._type==="axial"?ct=_e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(ct=_e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const pt of this._colorStops)ct.addColorStop(pt[0],pt[1]);return ct}getPattern(_e,ct,pt,tt){let ut;if(tt===c.STROKE||tt===c.FILL){const it=ct.current.getClippedPathBoundingBox(tt,(0,o.getCurrentTransform)(_e))||[0,0,0,0],lt=Math.ceil(it[2]-it[0])||1,mt=Math.ceil(it[3]-it[1])||1,Et=ct.cachedCanvases.getCanvas("pattern",lt,mt,!0),ft=Et.context;ft.clearRect(0,0,ft.canvas.width,ft.canvas.height),ft.beginPath(),ft.rect(0,0,ft.canvas.width,ft.canvas.height),ft.translate(-it[0],-it[1]),pt=a.Util.transform(pt,[1,0,0,1,it[0],it[1]]),ft.transform(...ct.baseTransform),this.matrix&&ft.transform(...this.matrix),d(ft,this._bbox),ft.fillStyle=this._createGradient(ft),ft.fill(),ut=_e.createPattern(Et.canvas,"no-repeat");const xt=new DOMMatrix(pt);ut.setTransform(xt)}else d(_e,this._bbox),ut=this._createGradient(_e);return ut}}function b($,_e,ct,pt,tt,ut,it,lt){const mt=_e.coords,Et=_e.colors,ft=$.data,xt=$.width*4;let kt;mt[ct+1]>mt[pt+1]&&(kt=ct,ct=pt,pt=kt,kt=ut,ut=it,it=kt),mt[pt+1]>mt[tt+1]&&(kt=pt,pt=tt,tt=kt,kt=it,it=lt,lt=kt),mt[ct+1]>mt[pt+1]&&(kt=ct,ct=pt,pt=kt,kt=ut,ut=it,it=kt);const Dt=(mt[ct]+_e.offsetX)*_e.scaleX,Ot=(mt[ct+1]+_e.offsetY)*_e.scaleY,Bt=(mt[pt]+_e.offsetX)*_e.scaleX,Ft=(mt[pt+1]+_e.offsetY)*_e.scaleY,Mt=(mt[tt]+_e.offsetX)*_e.scaleX,vt=(mt[tt+1]+_e.offsetY)*_e.scaleY;if(Ot>=vt)return;const Rt=Et[ut],$t=Et[ut+1],_t=Et[ut+2],rt=Et[it],at=Et[it+1],gt=Et[it+2],wt=Et[lt],St=Et[lt+1],Tt=Et[lt+2],Lt=Math.round(Ot),Kt=Math.round(vt);let en,Qt,rn,on,ln,Wt,Ht,yt;for(let Ct=Lt;Ct<=Kt;Ct++){if(Ct<Ft){const zt=Ct<Ot?0:(Ot-Ct)/(Ot-Ft);en=Dt-(Dt-Bt)*zt,Qt=Rt-(Rt-rt)*zt,rn=$t-($t-at)*zt,on=_t-(_t-gt)*zt}else{let zt;Ct>vt?zt=1:Ft===vt?zt=0:zt=(Ft-Ct)/(Ft-vt),en=Bt-(Bt-Mt)*zt,Qt=rt-(rt-wt)*zt,rn=at-(at-St)*zt,on=gt-(gt-Tt)*zt}let Ut;Ct<Ot?Ut=0:Ct>vt?Ut=1:Ut=(Ot-Ct)/(Ot-vt),ln=Dt-(Dt-Mt)*Ut,Wt=Rt-(Rt-wt)*Ut,Ht=$t-($t-St)*Ut,yt=_t-(_t-Tt)*Ut;const Vt=Math.round(Math.min(en,ln)),tn=Math.round(Math.max(en,ln));let cn=xt*Ct+Vt*4;for(let zt=Vt;zt<=tn;zt++)Ut=(en-zt)/(en-ln),Ut<0?Ut=0:Ut>1&&(Ut=1),ft[cn++]=Qt-(Qt-Wt)*Ut|0,ft[cn++]=rn-(rn-Ht)*Ut|0,ft[cn++]=on-(on-yt)*Ut|0,ft[cn++]=255}}function _($,_e,ct){const pt=_e.coords,tt=_e.colors;let ut,it;switch(_e.type){case"lattice":const lt=_e.verticesPerRow,mt=Math.floor(pt.length/lt)-1,Et=lt-1;for(ut=0;ut<mt;ut++){let ft=ut*lt;for(let xt=0;xt<Et;xt++,ft++)b($,ct,pt[ft],pt[ft+1],pt[ft+lt],tt[ft],tt[ft+1],tt[ft+lt]),b($,ct,pt[ft+lt+1],pt[ft+1],pt[ft+lt],tt[ft+lt+1],tt[ft+1],tt[ft+lt])}break;case"triangles":for(ut=0,it=pt.length;ut<it;ut+=3)b($,ct,pt[ut],pt[ut+1],pt[ut+2],tt[ut],tt[ut+1],tt[ut+2]);break;default:throw new Error("illegal figure")}}class et extends g{constructor(_e){super(),this._coords=_e[2],this._colors=_e[3],this._figures=_e[4],this._bounds=_e[5],this._bbox=_e[7],this._background=_e[8],this.matrix=null}_createMeshCanvas(_e,ct,pt){const lt=Math.floor(this._bounds[0]),mt=Math.floor(this._bounds[1]),Et=Math.ceil(this._bounds[2])-lt,ft=Math.ceil(this._bounds[3])-mt,xt=Math.min(Math.ceil(Math.abs(Et*_e[0]*1.1)),3e3),kt=Math.min(Math.ceil(Math.abs(ft*_e[1]*1.1)),3e3),Dt=Et/xt,Ot=ft/kt,Bt={coords:this._coords,colors:this._colors,offsetX:-lt,offsetY:-mt,scaleX:1/Dt,scaleY:1/Ot},Ft=xt+2*2,Mt=kt+2*2,vt=pt.getCanvas("mesh",Ft,Mt,!1),Rt=vt.context,$t=Rt.createImageData(xt,kt);if(ct){const rt=$t.data;for(let at=0,gt=rt.length;at<gt;at+=4)rt[at]=ct[0],rt[at+1]=ct[1],rt[at+2]=ct[2],rt[at+3]=255}for(const rt of this._figures)_($t,rt,Bt);return Rt.putImageData($t,2,2),{canvas:vt.canvas,offsetX:lt-2*Dt,offsetY:mt-2*Ot,scaleX:Dt,scaleY:Ot}}getPattern(_e,ct,pt,tt){d(_e,this._bbox);let ut;if(tt===c.SHADING)ut=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(_e));else if(ut=a.Util.singularValueDecompose2dScale(ct.baseTransform),this.matrix){const lt=a.Util.singularValueDecompose2dScale(this.matrix);ut=[ut[0]*lt[0],ut[1]*lt[1]]}const it=this._createMeshCanvas(ut,tt===c.SHADING?null:this._background,ct.cachedCanvases);return tt!==c.SHADING&&(_e.setTransform(...ct.baseTransform),this.matrix&&_e.transform(...this.matrix)),_e.translate(it.offsetX,it.offsetY),_e.scale(it.scaleX,it.scaleY),_e.createPattern(it.canvas,"no-repeat")}}class nt extends g{getPattern(){return"hotpink"}}function st($){switch($[0]){case"RadialAxial":return new h($);case"Mesh":return new et($);case"Dummy":return new nt}throw new Error(`Unknown IR type: ${$[0]}`)}const ot={COLORED:1,UNCOLORED:2},dt=class dt{constructor(_e,ct,pt,tt,ut){this.operatorList=_e[2],this.matrix=_e[3]||[1,0,0,1,0,0],this.bbox=_e[4],this.xstep=_e[5],this.ystep=_e[6],this.paintType=_e[7],this.tilingType=_e[8],this.color=ct,this.ctx=pt,this.canvasGraphicsFactory=tt,this.baseTransform=ut}createPatternCanvas(_e){const ct=this.operatorList,pt=this.bbox,tt=this.xstep,ut=this.ystep,it=this.paintType,lt=this.tilingType,mt=this.color,Et=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+lt);const ft=pt[0],xt=pt[1],kt=pt[2],Dt=pt[3],Ot=a.Util.singularValueDecompose2dScale(this.matrix),Bt=a.Util.singularValueDecompose2dScale(this.baseTransform),Ft=[Ot[0]*Bt[0],Ot[1]*Bt[1]],Mt=this.getSizeAndScale(tt,this.ctx.canvas.width,Ft[0]),vt=this.getSizeAndScale(ut,this.ctx.canvas.height,Ft[1]),Rt=_e.cachedCanvases.getCanvas("pattern",Mt.size,vt.size,!0),$t=Rt.context,_t=Et.createCanvasGraphics($t);_t.groupLevel=_e.groupLevel,this.setFillAndStrokeStyleToContext(_t,it,mt);let rt=ft,at=xt,gt=kt,wt=Dt;return ft<0&&(rt=0,gt+=Math.abs(ft)),xt<0&&(at=0,wt+=Math.abs(xt)),$t.translate(-(Mt.scale*rt),-(vt.scale*at)),_t.transform(Mt.scale,0,0,vt.scale,0,0),$t.save(),this.clipBbox(_t,rt,at,gt,wt),_t.baseTransform=(0,o.getCurrentTransform)(_t.ctx),_t.executeOperatorList(ct),_t.endDrawing(),{canvas:Rt.canvas,scaleX:Mt.scale,scaleY:vt.scale,offsetX:rt,offsetY:at}}getSizeAndScale(_e,ct,pt){_e=Math.abs(_e);const tt=Math.max(dt.MAX_PATTERN_SIZE,ct);let ut=Math.ceil(_e*pt);return ut>=tt?ut=tt:pt=ut/_e,{scale:pt,size:ut}}clipBbox(_e,ct,pt,tt,ut){const it=tt-ct,lt=ut-pt;_e.ctx.rect(ct,pt,it,lt),_e.current.updateRectMinMax((0,o.getCurrentTransform)(_e.ctx),[ct,pt,tt,ut]),_e.clip(),_e.endPath()}setFillAndStrokeStyleToContext(_e,ct,pt){const tt=_e.ctx,ut=_e.current;switch(ct){case ot.COLORED:const it=this.ctx;tt.fillStyle=it.fillStyle,tt.strokeStyle=it.strokeStyle,ut.fillColor=it.fillStyle,ut.strokeColor=it.strokeStyle;break;case ot.UNCOLORED:const lt=a.Util.makeHexColor(pt[0],pt[1],pt[2]);tt.fillStyle=lt,tt.strokeStyle=lt,ut.fillColor=lt,ut.strokeColor=lt;break;default:throw new a.FormatError(`Unsupported paint type: ${ct}`)}}getPattern(_e,ct,pt,tt){let ut=pt;tt!==c.SHADING&&(ut=a.Util.transform(ut,ct.baseTransform),this.matrix&&(ut=a.Util.transform(ut,this.matrix)));const it=this.createPatternCanvas(ct);let lt=new DOMMatrix(ut);lt=lt.translate(it.offsetX,it.offsetY),lt=lt.scale(1/it.scaleX,1/it.scaleY);const mt=_e.createPattern(it.canvas,"repeat");return mt.setTransform(lt),mt}};Ln(dt,"MAX_PATTERN_SIZE",3e3);let ht=dt;i.TilingPattern=ht},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.convertBlackAndWhiteToRGBA=c,i.convertToRGBA=o,i.grayToRGBA=g;var a=s(1);function o(h){switch(h.kind){case a.ImageKind.GRAYSCALE_1BPP:return c(h);case a.ImageKind.RGB_24BPP:return d(h)}return null}function c({src:h,srcPos:b=0,dest:_,width:et,height:nt,nonBlackColor:st=4294967295,inverseDecode:ot=!1}){const ht=a.FeatureTest.isLittleEndian?4278190080:255,[dt,$]=ot?[st,ht]:[ht,st],_e=et>>3,ct=et&7,pt=h.length;_=new Uint32Array(_.buffer);let tt=0;for(let ut=0;ut<nt;ut++){for(const lt=b+_e;b<lt;b++){const mt=b<pt?h[b]:255;_[tt++]=mt&128?$:dt,_[tt++]=mt&64?$:dt,_[tt++]=mt&32?$:dt,_[tt++]=mt&16?$:dt,_[tt++]=mt&8?$:dt,_[tt++]=mt&4?$:dt,_[tt++]=mt&2?$:dt,_[tt++]=mt&1?$:dt}if(ct===0)continue;const it=b<pt?h[b++]:255;for(let lt=0;lt<ct;lt++)_[tt++]=it&1<<7-lt?$:dt}return{srcPos:b,destPos:tt}}function d({src:h,srcPos:b=0,dest:_,destPos:et=0,width:nt,height:st}){let ot=0;const ht=h.length>>2,dt=new Uint32Array(h.buffer,b,ht);if(a.FeatureTest.isLittleEndian){for(;ot<ht-2;ot+=3,et+=4){const $=dt[ot],_e=dt[ot+1],ct=dt[ot+2];_[et]=$|4278190080,_[et+1]=$>>>24|_e<<8|4278190080,_[et+2]=_e>>>16|ct<<16|4278190080,_[et+3]=ct>>>8|4278190080}for(let $=ot*4,_e=h.length;$<_e;$+=3)_[et++]=h[$]|h[$+1]<<8|h[$+2]<<16|4278190080}else{for(;ot<ht-2;ot+=3,et+=4){const $=dt[ot],_e=dt[ot+1],ct=dt[ot+2];_[et]=$|255,_[et+1]=$<<24|_e>>>8|255,_[et+2]=_e<<16|ct>>>16|255,_[et+3]=ct<<8|255}for(let $=ot*4,_e=h.length;$<_e;$+=3)_[et++]=h[$]<<24|h[$+1]<<16|h[$+2]<<8|255}return{srcPos:b,destPos:et}}function g(h,b){if(a.FeatureTest.isLittleEndian)for(let _=0,et=h.length;_<et;_++)b[_]=h[_]*65793|4278190080;else for(let _=0,et=h.length;_<et;_++)b[_]=h[_]*16843008|255}},(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const s=Object.create(null);i.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(e,i,s)=>{var h,ds,hs,cr;Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var a=s(1);const o={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(nt){switch(nt instanceof Error||typeof nt=="object"&&nt!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),nt.name){case"AbortException":return new a.AbortException(nt.message);case"MissingPDFException":return new a.MissingPDFException(nt.message);case"PasswordException":return new a.PasswordException(nt.message,nt.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(nt.message,nt.status);case"UnknownErrorException":return new a.UnknownErrorException(nt.message,nt.details);default:return new a.UnknownErrorException(nt.message,nt.toString())}}class g{constructor(st,ot,ht){qt(this,h);this.sourceName=st,this.targetName=ot,this.comObj=ht,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=dt=>{const $=dt.data;if($.targetName!==this.sourceName)return;if($.stream){Nt(this,h,hs).call(this,$);return}if($.callback){const ct=$.callbackId,pt=this.callbackCapabilities[ct];if(!pt)throw new Error(`Cannot resolve callback ${ct}`);if(delete this.callbackCapabilities[ct],$.callback===o.DATA)pt.resolve($.data);else if($.callback===o.ERROR)pt.reject(d($.reason));else throw new Error("Unexpected callback case");return}const _e=this.actionHandler[$.action];if(!_e)throw new Error(`Unknown action from worker: ${$.action}`);if($.callbackId){const ct=this.sourceName,pt=$.sourceName;new Promise(function(tt){tt(_e($.data))}).then(function(tt){ht.postMessage({sourceName:ct,targetName:pt,callback:o.DATA,callbackId:$.callbackId,data:tt})},function(tt){ht.postMessage({sourceName:ct,targetName:pt,callback:o.ERROR,callbackId:$.callbackId,reason:d(tt)})});return}if($.streamId){Nt(this,h,ds).call(this,$);return}_e($.data)},ht.addEventListener("message",this._onComObjOnMessage)}on(st,ot){const ht=this.actionHandler;if(ht[st])throw new Error(`There is already an actionName called "${st}"`);ht[st]=ot}send(st,ot,ht){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:st,data:ot},ht)}sendWithPromise(st,ot,ht){const dt=this.callbackId++,$=new a.PromiseCapability;this.callbackCapabilities[dt]=$;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:st,callbackId:dt,data:ot},ht)}catch(_e){$.reject(_e)}return $.promise}sendWithStream(st,ot,ht,dt){const $=this.streamId++,_e=this.sourceName,ct=this.targetName,pt=this.comObj;return new ReadableStream({start:tt=>{const ut=new a.PromiseCapability;return this.streamControllers[$]={controller:tt,startCall:ut,pullCall:null,cancelCall:null,isClosed:!1},pt.postMessage({sourceName:_e,targetName:ct,action:st,streamId:$,data:ot,desiredSize:tt.desiredSize},dt),ut.promise},pull:tt=>{const ut=new a.PromiseCapability;return this.streamControllers[$].pullCall=ut,pt.postMessage({sourceName:_e,targetName:ct,stream:c.PULL,streamId:$,desiredSize:tt.desiredSize}),ut.promise},cancel:tt=>{(0,a.assert)(tt instanceof Error,"cancel must have a valid reason");const ut=new a.PromiseCapability;return this.streamControllers[$].cancelCall=ut,this.streamControllers[$].isClosed=!0,pt.postMessage({sourceName:_e,targetName:ct,stream:c.CANCEL,streamId:$,reason:d(tt)}),ut.promise}},ht)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,ds=function(st){const ot=st.streamId,ht=this.sourceName,dt=st.sourceName,$=this.comObj,_e=this,ct=this.actionHandler[st.action],pt={enqueue(tt,ut=1,it){if(this.isCancelled)return;const lt=this.desiredSize;this.desiredSize-=ut,lt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),$.postMessage({sourceName:ht,targetName:dt,stream:c.ENQUEUE,streamId:ot,chunk:tt},it)},close(){this.isCancelled||(this.isCancelled=!0,$.postMessage({sourceName:ht,targetName:dt,stream:c.CLOSE,streamId:ot}),delete _e.streamSinks[ot])},error(tt){(0,a.assert)(tt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,$.postMessage({sourceName:ht,targetName:dt,stream:c.ERROR,streamId:ot,reason:d(tt)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:st.desiredSize,ready:null};pt.sinkCapability.resolve(),pt.ready=pt.sinkCapability.promise,this.streamSinks[ot]=pt,new Promise(function(tt){tt(ct(st.data,pt))}).then(function(){$.postMessage({sourceName:ht,targetName:dt,stream:c.START_COMPLETE,streamId:ot,success:!0})},function(tt){$.postMessage({sourceName:ht,targetName:dt,stream:c.START_COMPLETE,streamId:ot,reason:d(tt)})})},hs=function(st){const ot=st.streamId,ht=this.sourceName,dt=st.sourceName,$=this.comObj,_e=this.streamControllers[ot],ct=this.streamSinks[ot];switch(st.stream){case c.START_COMPLETE:st.success?_e.startCall.resolve():_e.startCall.reject(d(st.reason));break;case c.PULL_COMPLETE:st.success?_e.pullCall.resolve():_e.pullCall.reject(d(st.reason));break;case c.PULL:if(!ct){$.postMessage({sourceName:ht,targetName:dt,stream:c.PULL_COMPLETE,streamId:ot,success:!0});break}ct.desiredSize<=0&&st.desiredSize>0&&ct.sinkCapability.resolve(),ct.desiredSize=st.desiredSize,new Promise(function(pt){var tt;pt((tt=ct.onPull)==null?void 0:tt.call(ct))}).then(function(){$.postMessage({sourceName:ht,targetName:dt,stream:c.PULL_COMPLETE,streamId:ot,success:!0})},function(pt){$.postMessage({sourceName:ht,targetName:dt,stream:c.PULL_COMPLETE,streamId:ot,reason:d(pt)})});break;case c.ENQUEUE:if((0,a.assert)(_e,"enqueue should have stream controller"),_e.isClosed)break;_e.controller.enqueue(st.chunk);break;case c.CLOSE:if((0,a.assert)(_e,"close should have stream controller"),_e.isClosed)break;_e.isClosed=!0,_e.controller.close(),Nt(this,h,cr).call(this,_e,ot);break;case c.ERROR:(0,a.assert)(_e,"error should have stream controller"),_e.controller.error(d(st.reason)),Nt(this,h,cr).call(this,_e,ot);break;case c.CANCEL_COMPLETE:st.success?_e.cancelCall.resolve():_e.cancelCall.reject(d(st.reason)),Nt(this,h,cr).call(this,_e,ot);break;case c.CANCEL:if(!ct)break;new Promise(function(pt){var tt;pt((tt=ct.onCancel)==null?void 0:tt.call(ct,d(st.reason)))}).then(function(){$.postMessage({sourceName:ht,targetName:dt,stream:c.CANCEL_COMPLETE,streamId:ot,success:!0})},function(pt){$.postMessage({sourceName:ht,targetName:dt,stream:c.CANCEL_COMPLETE,streamId:ot,reason:d(pt)})}),ct.sinkCapability.reject(d(st.reason)),ct.isCancelled=!0,delete this.streamSinks[ot];break;default:throw new Error("Unexpected stream case")}},cr=async function(st,ot){var ht,dt,$;await Promise.allSettled([(ht=st.startCall)==null?void 0:ht.promise,(dt=st.pullCall)==null?void 0:dt.promise,($=st.cancelCall)==null?void 0:$.promise]),delete this.streamControllers[ot]},i.MessageHandler=g},(e,i,s)=>{var c,d;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var a=s(1);class o{constructor({parsedData:h,rawData:b}){qt(this,c);qt(this,d);Yt(this,c,h),Yt(this,d,b)}getRaw(){return j(this,d)}get(h){return j(this,c).get(h)??null}getAll(){return(0,a.objectFromMap)(j(this,c))}has(h){return j(this,c).has(h)}}c=new WeakMap,d=new WeakMap,i.Metadata=o},(e,i,s)=>{var h,b,_,et,nt,st,Dr;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var a=s(1),o=s(8);const c=Symbol("INTERNAL");class d{constructor(dt,$){qt(this,h,!0);this.name=dt,this.intent=$}get visible(){return j(this,h)}_setVisible(dt,$){dt!==c&&(0,a.unreachable)("Internal method `_setVisible` called."),Yt(this,h,$)}}h=new WeakMap;class g{constructor(dt){qt(this,st);qt(this,b,null);qt(this,_,new Map);qt(this,et,null);qt(this,nt,null);if(this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,Yt(this,nt,dt.order);for(const $ of dt.groups)j(this,_).set($.id,new d($.name,$.intent));if(dt.baseState==="OFF")for(const $ of j(this,_).values())$._setVisible(c,!1);for(const $ of dt.on)j(this,_).get($)._setVisible(c,!0);for(const $ of dt.off)j(this,_).get($)._setVisible(c,!1);Yt(this,et,this.getHash())}}isVisible(dt){if(j(this,_).size===0)return!0;if(!dt)return(0,a.warn)("Optional content group not defined."),!0;if(dt.type==="OCG")return j(this,_).has(dt.id)?j(this,_).get(dt.id).visible:((0,a.warn)(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return Nt(this,st,Dr).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const $ of dt.ids){if(!j(this,_).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(j(this,_).get($).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const $ of dt.ids){if(!j(this,_).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(!j(this,_).get($).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const $ of dt.ids){if(!j(this,_).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(!j(this,_).get($).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const $ of dt.ids){if(!j(this,_).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(j(this,_).get($).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${dt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${dt.type}.`),!0}setVisibility(dt,$=!0){if(!j(this,_).has(dt)){(0,a.warn)(`Optional content group not found: ${dt}`);return}j(this,_).get(dt)._setVisible(c,!!$),Yt(this,b,null)}get hasInitialVisibility(){return j(this,et)===null||this.getHash()===j(this,et)}getOrder(){return j(this,_).size?j(this,nt)?j(this,nt).slice():[...j(this,_).keys()]:null}getGroups(){return j(this,_).size>0?(0,a.objectFromMap)(j(this,_)):null}getGroup(dt){return j(this,_).get(dt)||null}getHash(){if(j(this,b)!==null)return j(this,b);const dt=new o.MurmurHash3_64;for(const[$,_e]of j(this,_))dt.update(`${$}:${_e.visible}`);return Yt(this,b,dt.hexdigest())}}b=new WeakMap,_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakSet,Dr=function(dt){const $=dt.length;if($<2)return!0;const _e=dt[0];for(let ct=1;ct<$;ct++){const pt=dt[ct];let tt;if(Array.isArray(pt))tt=Nt(this,st,Dr).call(this,pt);else if(j(this,_).has(pt))tt=j(this,_).get(pt).visible;else return(0,a.warn)(`Optional content group not found: ${pt}`),!0;switch(_e){case"And":if(!tt)return!1;break;case"Or":if(tt)return!0;break;case"Not":return!tt;default:return!0}}return _e==="And"},i.OptionalContentConfig=g},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var a=s(1),o=s(6);class c{constructor({length:b,initialData:_,progressiveDone:et=!1,contentDispositionFilename:nt=null,disableRange:st=!1,disableStream:ot=!1},ht){if((0,a.assert)(ht,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=et,this._contentDispositionFilename=nt,(_==null?void 0:_.length)>0){const dt=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(dt)}this._pdfDataRangeTransport=ht,this._isStreamingSupported=!ot,this._isRangeSupported=!st,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((dt,$)=>{this._onReceiveData({begin:dt,chunk:$})}),this._pdfDataRangeTransport.addProgressListener((dt,$)=>{this._onProgress({loaded:dt,total:$})}),this._pdfDataRangeTransport.addProgressiveReadListener(dt=>{this._onReceiveData({chunk:dt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:_}){const et=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(et):this._queuedChunks.push(et);else{const nt=this._rangeReaders.some(function(st){return st._begin!==b?!1:(st._enqueue(et),!0)});(0,a.assert)(nt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}_onProgress(b){var _,et,nt,st;b.total===void 0?(et=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||et.call(_,{loaded:b.loaded}):(st=(nt=this._fullRequestReader)==null?void 0:nt.onProgress)==null||st.call(nt,{loaded:b.loaded,total:b.total})}_onProgressiveDone(){var b;(b=this._fullRequestReader)==null||b.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const _=this._rangeReaders.indexOf(b);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new d(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,_){if(_<=this._progressiveDataLength)return null;const et=new g(this,b,_);return this._pdfDataRangeTransport.requestDataRange(b,_),this._rangeReaders.push(et),et}cancelAllRequests(b){var _;(_=this._fullRequestReader)==null||_.cancel(b);for(const et of this._rangeReaders.slice(0))et.cancel(b);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=c;class d{constructor(b,_,et=!1,nt=null){this._stream=b,this._done=et||!1,this._filename=(0,o.isPdfFile)(nt)?nt:null,this._queuedChunks=_||[],this._loaded=0;for(const st of this._queuedChunks)this._loaded+=st.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new a.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g{constructor(b,_,et){this._stream=b,this._begin=_,this._end=et,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new a.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var a=s(1),o=s(20);function c(et,nt,st){return{method:"GET",headers:et,signal:st.signal,mode:"cors",credentials:nt?"include":"same-origin",redirect:"follow"}}function d(et){const nt=new Headers;for(const st in et){const ot=et[st];ot!==void 0&&nt.append(st,ot)}return nt}function g(et){return et instanceof Uint8Array?et.buffer:et instanceof ArrayBuffer?et:((0,a.warn)(`getArrayBuffer - unexpected data format: ${et}`),new Uint8Array(et).buffer)}class h{constructor(nt){this.source=nt,this.isHttp=/^https?:/i.test(nt.url),this.httpHeaders=this.isHttp&&nt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var nt;return((nt=this._fullRequestReader)==null?void 0:nt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(nt,st){if(st<=this._progressiveDataLength)return null;const ot=new _(this,nt,st);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(nt){var st;(st=this._fullRequestReader)==null||st.cancel(nt);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(nt)}}i.PDFFetchStream=h;class b{constructor(nt){this._stream=nt,this._reader=null,this._loaded=0,this._filename=null;const st=nt.source;this._withCredentials=st.withCredentials||!1,this._contentLength=st.length,this._headersCapability=new a.PromiseCapability,this._disableRange=st.disableRange||!1,this._rangeChunkSize=st.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!st.disableStream,this._isRangeSupported=!st.disableRange,this._headers=d(this._stream.httpHeaders);const ot=st.url;fetch(ot,c(this._headers,this._withCredentials,this._abortController)).then(ht=>{if(!(0,o.validateResponseStatus)(ht.status))throw(0,o.createResponseStatusError)(ht.status,ot);this._reader=ht.body.getReader(),this._headersCapability.resolve();const dt=ct=>ht.headers.get(ct),{allowRangeRequests:$,suggestedLength:_e}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=_e||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:nt,done:st}=await this._reader.read();return st?{value:nt,done:st}:(this._loaded+=nt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:g(nt),done:!1})}cancel(nt){var st;(st=this._reader)==null||st.cancel(nt),this._abortController.abort()}}class _{constructor(nt,st,ot){this._stream=nt,this._reader=null,this._loaded=0;const ht=nt.source;this._withCredentials=ht.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ht.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${st}-${ot-1}`);const dt=ht.url;fetch(dt,c(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,o.validateResponseStatus)($.status))throw(0,o.createResponseStatusError)($.status,dt);this._readCapability.resolve(),this._reader=$.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:nt,done:st}=await this._reader.read();return st?{value:nt,done:st}:(this._loaded+=nt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:g(nt),done:!1})}cancel(nt){var st;(st=this._reader)==null||st.cancel(nt),this._abortController.abort()}}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=h,i.extractFilenameFromHeader=g,i.validateRangeRequestCapabilities=d,i.validateResponseStatus=b;var a=s(1),o=s(21),c=s(6);function d({getResponseHeader:_,isHttp:et,rangeChunkSize:nt,disableRange:st}){const ot={allowRangeRequests:!1,suggestedLength:void 0},ht=parseInt(_("Content-Length"),10);return!Number.isInteger(ht)||(ot.suggestedLength=ht,ht<=2*nt)||st||!et||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(ot.allowRangeRequests=!0),ot}function g(_){const et=_("Content-Disposition");if(et){let nt=(0,o.getFilenameFromContentDispositionHeader)(et);if(nt.includes("%"))try{nt=decodeURIComponent(nt)}catch{}if((0,c.isPdfFile)(nt))return nt}return null}function h(_,et){return _===404||_===0&&et.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+et+'".'):new a.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${et}".`,_)}function b(_){return _===200||_===206}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=o;var a=s(1);function o(c){let d=!0,g=h("filename\\*","i").exec(c);if(g){g=g[1];let ht=nt(g);return ht=unescape(ht),ht=st(ht),ht=ot(ht),_(ht)}if(g=et(c),g){const ht=ot(g);return _(ht)}if(g=h("filename","i").exec(c),g){g=g[1];let ht=nt(g);return ht=ot(ht),_(ht)}function h(ht,dt){return new RegExp("(?:^|;)\\s*"+ht+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',dt)}function b(ht,dt){if(ht){if(!/^[\x00-\xFF]+$/.test(dt))return dt;try{const $=new TextDecoder(ht,{fatal:!0}),_e=(0,a.stringToBytes)(dt);dt=$.decode(_e),d=!1}catch{}}return dt}function _(ht){return d&&/[\x80-\xff]/.test(ht)&&(ht=b("utf-8",ht),d&&(ht=b("iso-8859-1",ht))),ht}function et(ht){const dt=[];let $;const _e=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;($=_e.exec(ht))!==null;){let[,pt,tt,ut]=$;if(pt=parseInt(pt,10),pt in dt){if(pt===0)break;continue}dt[pt]=[tt,ut]}const ct=[];for(let pt=0;pt<dt.length&&pt in dt;++pt){let[tt,ut]=dt[pt];ut=nt(ut),tt&&(ut=unescape(ut),pt===0&&(ut=st(ut))),ct.push(ut)}return ct.join("")}function nt(ht){if(ht.startsWith('"')){const dt=ht.slice(1).split('\\"');for(let $=0;$<dt.length;++$){const _e=dt[$].indexOf('"');_e!==-1&&(dt[$]=dt[$].slice(0,_e),dt.length=$+1),dt[$]=dt[$].replaceAll(/\\(.)/g,"$1")}ht=dt.join('"')}return ht}function st(ht){const dt=ht.indexOf("'");if(dt===-1)return ht;const $=ht.slice(0,dt),ct=ht.slice(dt+1).replace(/^[^']*'/,"");return b($,ct)}function ot(ht){return!ht.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ht)?ht:ht.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(dt,$,_e,ct){if(_e==="q"||_e==="Q")return ct=ct.replaceAll("_"," "),ct=ct.replaceAll(/=([0-9a-fA-F]{2})/g,function(pt,tt){return String.fromCharCode(parseInt(tt,16))}),b($,ct);try{ct=atob(ct)}catch{}return b($,ct)})}return""}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var a=s(1),o=s(20);const c=200,d=206;function g(nt){const st=nt.response;return typeof st!="string"?st:(0,a.stringToBytes)(st).buffer}class h{constructor(st,ot={}){this.url=st,this.isHttp=/^https?:/i.test(st),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(st,ot,ht){const dt={begin:st,end:ot};for(const $ in ht)dt[$]=ht[$];return this.request(dt)}requestFull(st){return this.request(st)}request(st){const ot=new XMLHttpRequest,ht=this.currXhrId++,dt=this.pendingRequests[ht]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const $ in this.httpHeaders){const _e=this.httpHeaders[$];_e!==void 0&&ot.setRequestHeader($,_e)}return this.isHttp&&"begin"in st&&"end"in st?(ot.setRequestHeader("Range",`bytes=${st.begin}-${st.end-1}`),dt.expectedStatus=d):dt.expectedStatus=c,ot.responseType="arraybuffer",st.onError&&(ot.onerror=function($){st.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,ht),ot.onprogress=this.onProgress.bind(this,ht),dt.onHeadersReceived=st.onHeadersReceived,dt.onDone=st.onDone,dt.onError=st.onError,dt.onProgress=st.onProgress,ot.send(null),ht}onProgress(st,ot){var dt;const ht=this.pendingRequests[st];ht&&((dt=ht.onProgress)==null||dt.call(ht,ot))}onStateChange(st,ot){var pt,tt,ut;const ht=this.pendingRequests[st];if(!ht)return;const dt=ht.xhr;if(dt.readyState>=2&&ht.onHeadersReceived&&(ht.onHeadersReceived(),delete ht.onHeadersReceived),dt.readyState!==4||!(st in this.pendingRequests))return;if(delete this.pendingRequests[st],dt.status===0&&this.isHttp){(pt=ht.onError)==null||pt.call(ht,dt.status);return}const $=dt.status||c;if(!($===c&&ht.expectedStatus===d)&&$!==ht.expectedStatus){(tt=ht.onError)==null||tt.call(ht,dt.status);return}const ct=g(dt);if($===d){const it=dt.getResponseHeader("Content-Range"),lt=/bytes (\d+)-(\d+)\/(\d+)/.exec(it);ht.onDone({begin:parseInt(lt[1],10),chunk:ct})}else ct?ht.onDone({begin:0,chunk:ct}):(ut=ht.onError)==null||ut.call(ht,dt.status)}getRequestXhr(st){return this.pendingRequests[st].xhr}isPendingRequest(st){return st in this.pendingRequests}abortRequest(st){const ot=this.pendingRequests[st].xhr;delete this.pendingRequests[st],ot.abort()}}class b{constructor(st){this._source=st,this._manager=new h(st.url,{httpHeaders:st.httpHeaders,withCredentials:st.withCredentials}),this._rangeChunkSize=st.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(st){const ot=this._rangeRequestReaders.indexOf(st);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(st,ot){const ht=new et(this._manager,st,ot);return ht.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ht),ht}cancelAllRequests(st){var ot;(ot=this._fullRequestReader)==null||ot.cancel(st);for(const ht of this._rangeRequestReaders.slice(0))ht.cancel(st)}}i.PDFNetworkStream=b;class _{constructor(st,ot){this._manager=st;const ht={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=st.requestFull(ht),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const st=this._fullRequestId,ot=this._manager.getRequestXhr(st),ht=_e=>ot.getResponseHeader(_e),{allowRangeRequests:dt,suggestedLength:$}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ht,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});dt&&(this._isRangeSupported=!0),this._contentLength=$||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ht),this._isRangeSupported&&this._manager.abortRequest(st),this._headersReceivedCapability.resolve()}_onDone(st){if(st&&(this._requests.length>0?this._requests.shift().resolve({value:st.chunk,done:!1}):this._cachedChunks.push(st.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(st){this._storedError=(0,o.createResponseStatusError)(st,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(st){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:st.loaded,total:st.lengthComputable?st.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0,this._headersReceivedCapability.reject(st);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class et{constructor(st,ot,ht){this._manager=st;const dt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=st.url,this._requestId=st.requestRange(ot,ht,dt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var st;(st=this.onClosed)==null||st.call(this,this)}_onDone(st){const ot=st.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(st){this._storedError=(0,o.createResponseStatusError)(st,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(st){var ot;this.isStreamingSupported||(ot=this.onProgress)==null||ot.call(this,{loaded:st.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var a=s(1),o=s(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(ht){const dt=require$$5,$=dt.parse(ht);return $.protocol==="file:"||$.host?$:/^[a-z]:[/\\]/i.test(ht)?dt.parse(`file:///${ht}`):($.host||($.protocol="file:"),$)}class g{constructor(dt){this.source=dt,this.url=d(dt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new st(this):new et(this),this._fullRequestReader}getRangeReader(dt,$){if($<=this._progressiveDataLength)return null;const _e=this.isFsUrl?new ot(this,dt,$):new nt(this,dt,$);return this._rangeRequestReaders.push(_e),_e}cancelAllRequests(dt){var $;($=this._fullRequestReader)==null||$.cancel(dt);for(const _e of this._rangeRequestReaders.slice(0))_e.cancel(dt)}}i.PDFNodeStream=g;class h{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const $=dt.source;this._contentLength=$.length,this._loaded=0,this._filename=null,this._disableRange=$.disableRange||!1,this._rangeChunkSize=$.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!$.disableStream,this._isRangeSupported=!$.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(_e=this.onProgress)==null||_e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",$=>{this._error($)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const $=dt.source;this._isStreamingSupported=!$.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(_e=this.onProgress)==null||_e.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",$=>{this._error($)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _(ht,dt){return{protocol:ht.protocol,auth:ht.auth,host:ht.hostname,port:ht.port,path:ht.path,method:"GET",headers:dt}}class et extends h{constructor(dt){super(dt);const $=_e=>{if(_e.statusCode===404){const ut=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ut,this._headersCapability.reject(ut);return}this._headersCapability.resolve(),this._setReadableStream(_e);const ct=ut=>this._readableStream.headers[ut.toLowerCase()],{allowRangeRequests:pt,suggestedLength:tt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ct,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=pt,this._contentLength=tt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ct)};if(this._request=null,this._url.protocol==="http:"){const _e=require$$5;this._request=_e.request(_(this._url,dt.httpHeaders),$)}else{const _e=require$$5;this._request=_e.request(_(this._url,dt.httpHeaders),$)}this._request.on("error",_e=>{this._storedError=_e,this._headersCapability.reject(_e)}),this._request.end()}}class nt extends b{constructor(dt,$,_e){super(dt),this._httpHeaders={};for(const pt in dt.httpHeaders){const tt=dt.httpHeaders[pt];tt!==void 0&&(this._httpHeaders[pt]=tt)}this._httpHeaders.Range=`bytes=${$}-${_e-1}`;const ct=pt=>{if(pt.statusCode===404){const tt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=tt;return}this._setReadableStream(pt)};if(this._request=null,this._url.protocol==="http:"){const pt=require$$5;this._request=pt.request(_(this._url,this._httpHeaders),ct)}else{const pt=require$$5;this._request=pt.request(_(this._url,this._httpHeaders),ct)}this._request.on("error",pt=>{this._storedError=pt}),this._request.end()}}class st extends h{constructor(dt){super(dt);let $=decodeURIComponent(this._url.path);c.test(this._url.href)&&($=$.replace(/^\//,""));const _e=require$$5;_e.lstat($,(ct,pt)=>{if(ct){ct.code==="ENOENT"&&(ct=new a.MissingPDFException(`Missing PDF "${$}".`)),this._storedError=ct,this._headersCapability.reject(ct);return}this._contentLength=pt.size,this._setReadableStream(_e.createReadStream($)),this._headersCapability.resolve()})}}class ot extends b{constructor(dt,$,_e){super(dt);let ct=decodeURIComponent(this._url.path);c.test(this._url.href)&&(ct=ct.replace(/^\//,""));const pt=require$$5;this._setReadableStream(pt.createReadStream(ct,{start:$,end:_e-1}))}}},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var a=s(6),o=s(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",h=["butt","round","square"],b=["miter","round","bevel"],_=function(pt,tt="",ut=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ut)return URL.createObjectURL(new Blob([pt],{type:tt}));const it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let lt=`data:${tt};base64,`;for(let mt=0,Et=pt.length;mt<Et;mt+=3){const ft=pt[mt]&255,xt=pt[mt+1]&255,kt=pt[mt+2]&255,Dt=ft>>2,Ot=(ft&3)<<4|xt>>4,Bt=mt+1<Et?(xt&15)<<2|kt>>6:64,Ft=mt+2<Et?kt&63:64;lt+=it[Dt]+it[Ot]+it[Bt]+it[Ft]}return lt},et=function(){const pt=new Uint8Array([137,80,78,71,13,10,26,10]),tt=12,ut=new Int32Array(256);for(let kt=0;kt<256;kt++){let Dt=kt;for(let Ot=0;Ot<8;Ot++)Dt=Dt&1?3988292384^Dt>>1&2147483647:Dt>>1&2147483647;ut[kt]=Dt}function it(kt,Dt,Ot){let Bt=-1;for(let Ft=Dt;Ft<Ot;Ft++){const Mt=(Bt^kt[Ft])&255,vt=ut[Mt];Bt=Bt>>>8^vt}return Bt^-1}function lt(kt,Dt,Ot,Bt){let Ft=Bt;const Mt=Dt.length;Ot[Ft]=Mt>>24&255,Ot[Ft+1]=Mt>>16&255,Ot[Ft+2]=Mt>>8&255,Ot[Ft+3]=Mt&255,Ft+=4,Ot[Ft]=kt.charCodeAt(0)&255,Ot[Ft+1]=kt.charCodeAt(1)&255,Ot[Ft+2]=kt.charCodeAt(2)&255,Ot[Ft+3]=kt.charCodeAt(3)&255,Ft+=4,Ot.set(Dt,Ft),Ft+=Dt.length;const vt=it(Ot,Bt+4,Ft);Ot[Ft]=vt>>24&255,Ot[Ft+1]=vt>>16&255,Ot[Ft+2]=vt>>8&255,Ot[Ft+3]=vt&255}function mt(kt,Dt,Ot){let Bt=1,Ft=0;for(let Mt=Dt;Mt<Ot;++Mt)Bt=(Bt+(kt[Mt]&255))%65521,Ft=(Ft+Bt)%65521;return Ft<<16|Bt}function Et(kt){if(!o.isNodeJS)return ft(kt);try{const Dt=parseInt(process.versions.node)>=8?kt:Buffer.from(kt),Ot=require$$5.deflateSync(Dt,{level:9});return Ot instanceof Uint8Array?Ot:new Uint8Array(Ot)}catch(Dt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Dt)}return ft(kt)}function ft(kt){let Dt=kt.length;const Ot=65535,Bt=Math.ceil(Dt/Ot),Ft=new Uint8Array(2+Dt+Bt*5+4);let Mt=0;Ft[Mt++]=120,Ft[Mt++]=156;let vt=0;for(;Dt>Ot;)Ft[Mt++]=0,Ft[Mt++]=255,Ft[Mt++]=255,Ft[Mt++]=0,Ft[Mt++]=0,Ft.set(kt.subarray(vt,vt+Ot),Mt),Mt+=Ot,vt+=Ot,Dt-=Ot;Ft[Mt++]=1,Ft[Mt++]=Dt&255,Ft[Mt++]=Dt>>8&255,Ft[Mt++]=~Dt&65535&255,Ft[Mt++]=(~Dt&65535)>>8&255,Ft.set(kt.subarray(vt),Mt),Mt+=kt.length-vt;const Rt=mt(kt,0,kt.length);return Ft[Mt++]=Rt>>24&255,Ft[Mt++]=Rt>>16&255,Ft[Mt++]=Rt>>8&255,Ft[Mt++]=Rt&255,Ft}function xt(kt,Dt,Ot,Bt){const Ft=kt.width,Mt=kt.height;let vt,Rt,$t;const _t=kt.data;switch(Dt){case o.ImageKind.GRAYSCALE_1BPP:Rt=0,vt=1,$t=Ft+7>>3;break;case o.ImageKind.RGB_24BPP:Rt=2,vt=8,$t=Ft*3;break;case o.ImageKind.RGBA_32BPP:Rt=6,vt=8,$t=Ft*4;break;default:throw new Error("invalid format")}const rt=new Uint8Array((1+$t)*Mt);let at=0,gt=0;for(let en=0;en<Mt;++en)rt[at++]=0,rt.set(_t.subarray(gt,gt+$t),at),gt+=$t,at+=$t;if(Dt===o.ImageKind.GRAYSCALE_1BPP&&Bt){at=0;for(let en=0;en<Mt;en++){at++;for(let Qt=0;Qt<$t;Qt++)rt[at++]^=255}}const wt=new Uint8Array([Ft>>24&255,Ft>>16&255,Ft>>8&255,Ft&255,Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255,vt,Rt,0,0,0]),St=Et(rt),Tt=pt.length+tt*3+wt.length+St.length,Lt=new Uint8Array(Tt);let Kt=0;return Lt.set(pt,Kt),Kt+=pt.length,lt("IHDR",wt,Lt,Kt),Kt+=tt+wt.length,lt("IDATA",St,Lt,Kt),Kt+=tt+St.length,lt("IEND",new Uint8Array(0),Lt,Kt),_(Lt,"image/png",Ot)}return function(Dt,Ot,Bt){const Ft=Dt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:Dt.kind;return xt(Dt,Ft,Ot,Bt)}}();class nt{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(tt,ut){this.x=tt,this.y=ut}}function st(pt){let tt=[];const ut=[];for(const it of pt){if(it.fn==="save"){tt.push({fnId:92,fn:"group",items:[]}),ut.push(tt),tt=tt.at(-1).items;continue}it.fn==="restore"?tt=ut.pop():tt.push(it)}return tt}function ot(pt){if(Number.isInteger(pt))return pt.toString();const tt=pt.toFixed(10);let ut=tt.length-1;if(tt[ut]!=="0")return tt;do ut--;while(tt[ut]==="0");return tt.substring(0,tt[ut]==="."?ut:ut+1)}function ht(pt){if(pt[4]===0&&pt[5]===0){if(pt[1]===0&&pt[2]===0)return pt[0]===1&&pt[3]===1?"":`scale(${ot(pt[0])} ${ot(pt[3])})`;if(pt[0]===pt[3]&&pt[1]===-pt[2]){const tt=Math.acos(pt[0])*180/Math.PI;return`rotate(${ot(tt)})`}}else if(pt[0]===1&&pt[1]===0&&pt[2]===0&&pt[3]===1)return`translate(${ot(pt[4])} ${ot(pt[5])})`;return`matrix(${ot(pt[0])} ${ot(pt[1])} ${ot(pt[2])} ${ot(pt[3])} ${ot(pt[4])} ${ot(pt[5])})`}let dt=0,$=0,_e=0;class ct{constructor(tt,ut,it=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new nt,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=tt,this.objs=ut,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!it,this._operatorIdMapping=[];for(const lt in o.OPS)this._operatorIdMapping[o.OPS[lt]]=lt}getObject(tt,ut=null){return typeof tt=="string"?tt.startsWith("g_")?this.commonObjs.get(tt):this.objs.get(tt):ut}save(){this.transformStack.push(this.transformMatrix);const tt=this.current;this.extraStack.push(tt),this.current=tt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(tt){this.save(),this.executeOpTree(tt),this.restore()}loadDependencies(tt){const ut=tt.fnArray,it=tt.argsArray;for(let lt=0,mt=ut.length;lt<mt;lt++)if(ut[lt]===o.OPS.dependency)for(const Et of it[lt]){const ft=Et.startsWith("g_")?this.commonObjs:this.objs,xt=new Promise(kt=>{ft.get(Et,kt)});this.current.dependencies.push(xt)}return Promise.all(this.current.dependencies)}transform(tt,ut,it,lt,mt,Et){const ft=[tt,ut,it,lt,mt,Et];this.transformMatrix=o.Util.transform(this.transformMatrix,ft),this.tgrp=null}getSVG(tt,ut){this.viewport=ut;const it=this._initialize(ut);return this.loadDependencies(tt).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(tt)),it))}convertOpList(tt){const ut=this._operatorIdMapping,it=tt.argsArray,lt=tt.fnArray,mt=[];for(let Et=0,ft=lt.length;Et<ft;Et++){const xt=lt[Et];mt.push({fnId:xt,fn:ut[xt],args:it[Et]})}return st(mt)}executeOpTree(tt){for(const ut of tt){const it=ut.fn,lt=ut.fnId,mt=ut.args;switch(lt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(mt);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(mt[0],mt[1]);break;case o.OPS.setFont:this.setFont(mt);break;case o.OPS.showText:this.showText(mt[0]);break;case o.OPS.showSpacedText:this.showText(mt[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(mt[0],mt[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(mt[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(mt[0]);break;case o.OPS.setHScale:this.setHScale(mt[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5]);break;case o.OPS.setTextRise:this.setTextRise(mt[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(mt[0]);break;case o.OPS.setLineWidth:this.setLineWidth(mt[0]);break;case o.OPS.setLineJoin:this.setLineJoin(mt[0]);break;case o.OPS.setLineCap:this.setLineCap(mt[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(mt[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(mt[0],mt[1],mt[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(mt[0],mt[1],mt[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(mt);break;case o.OPS.setFillColorN:this.setFillColorN(mt);break;case o.OPS.shadingFill:this.shadingFill(mt[0]);break;case o.OPS.setDash:this.setDash(mt[0],mt[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(mt[0]);break;case o.OPS.setFlatness:this.setFlatness(mt[0]);break;case o.OPS.setGState:this.setGState(mt[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(mt[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(mt[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(mt[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(mt[0],mt[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5]);break;case o.OPS.constructPath:this.constructPath(mt[0],mt[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(ut.items);break;default:(0,o.warn)(`Unimplemented operator ${it}`);break}}}setWordSpacing(tt){this.current.wordSpacing=tt}setCharSpacing(tt){this.current.charSpacing=tt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(tt,ut,it,lt,mt,Et){const ft=this.current;ft.textMatrix=ft.lineMatrix=[tt,ut,it,lt,mt,Et],ft.textMatrixScale=Math.hypot(tt,ut),ft.x=ft.lineX=0,ft.y=ft.lineY=0,ft.xcoords=[],ft.ycoords=[],ft.tspan=this.svgFactory.createElement("svg:tspan"),ft.tspan.setAttributeNS(null,"font-family",ft.fontFamily),ft.tspan.setAttributeNS(null,"font-size",`${ot(ft.fontSize)}px`),ft.tspan.setAttributeNS(null,"y",ot(-ft.y)),ft.txtElement=this.svgFactory.createElement("svg:text"),ft.txtElement.append(ft.tspan)}beginText(){const tt=this.current;tt.x=tt.lineX=0,tt.y=tt.lineY=0,tt.textMatrix=o.IDENTITY_MATRIX,tt.lineMatrix=o.IDENTITY_MATRIX,tt.textMatrixScale=1,tt.tspan=this.svgFactory.createElement("svg:tspan"),tt.txtElement=this.svgFactory.createElement("svg:text"),tt.txtgrp=this.svgFactory.createElement("svg:g"),tt.xcoords=[],tt.ycoords=[]}moveText(tt,ut){const it=this.current;it.x=it.lineX+=tt,it.y=it.lineY+=ut,it.xcoords=[],it.ycoords=[],it.tspan=this.svgFactory.createElement("svg:tspan"),it.tspan.setAttributeNS(null,"font-family",it.fontFamily),it.tspan.setAttributeNS(null,"font-size",`${ot(it.fontSize)}px`),it.tspan.setAttributeNS(null,"y",ot(-it.y))}showText(tt){const ut=this.current,it=ut.font,lt=ut.fontSize;if(lt===0)return;const mt=ut.fontSizeScale,Et=ut.charSpacing,ft=ut.wordSpacing,xt=ut.fontDirection,kt=ut.textHScale*xt,Dt=it.vertical,Ot=Dt?1:-1,Bt=it.defaultVMetrics,Ft=lt*ut.fontMatrix[0];let Mt=0;for(const $t of tt){if($t===null){Mt+=xt*ft;continue}else if(typeof $t=="number"){Mt+=Ot*$t*lt/1e3;continue}const _t=($t.isSpace?ft:0)+Et,rt=$t.fontChar;let at,gt,wt=$t.width;if(Dt){let Tt;const Lt=$t.vmetric||Bt;Tt=$t.vmetric?Lt[1]:wt*.5,Tt=-Tt*Ft;const Kt=Lt[2]*Ft;wt=Lt?-Lt[0]:wt,at=Tt/mt,gt=(Mt+Kt)/mt}else at=Mt/mt,gt=0;($t.isInFont||it.missingFile)&&(ut.xcoords.push(ut.x+at),Dt&&ut.ycoords.push(-ut.y+gt),ut.tspan.textContent+=rt);const St=Dt?wt*Ft-_t*xt:wt*Ft+_t*xt;Mt+=St}ut.tspan.setAttributeNS(null,"x",ut.xcoords.map(ot).join(" ")),Dt?ut.tspan.setAttributeNS(null,"y",ut.ycoords.map(ot).join(" ")):ut.tspan.setAttributeNS(null,"y",ot(-ut.y)),Dt?ut.y-=Mt:ut.x+=Mt*kt,ut.tspan.setAttributeNS(null,"font-family",ut.fontFamily),ut.tspan.setAttributeNS(null,"font-size",`${ot(ut.fontSize)}px`),ut.fontStyle!==c.fontStyle&&ut.tspan.setAttributeNS(null,"font-style",ut.fontStyle),ut.fontWeight!==c.fontWeight&&ut.tspan.setAttributeNS(null,"font-weight",ut.fontWeight);const vt=ut.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(vt===o.TextRenderingMode.FILL||vt===o.TextRenderingMode.FILL_STROKE?(ut.fillColor!==c.fillColor&&ut.tspan.setAttributeNS(null,"fill",ut.fillColor),ut.fillAlpha<1&&ut.tspan.setAttributeNS(null,"fill-opacity",ut.fillAlpha)):ut.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?ut.tspan.setAttributeNS(null,"fill","transparent"):ut.tspan.setAttributeNS(null,"fill","none"),vt===o.TextRenderingMode.STROKE||vt===o.TextRenderingMode.FILL_STROKE){const $t=1/(ut.textMatrixScale||1);this._setStrokeAttributes(ut.tspan,$t)}let Rt=ut.textMatrix;ut.textRise!==0&&(Rt=Rt.slice(),Rt[5]+=ut.textRise),ut.txtElement.setAttributeNS(null,"transform",`${ht(Rt)} scale(${ot(kt)}, -1)`),ut.txtElement.setAttributeNS(d,"xml:space","preserve"),ut.txtElement.append(ut.tspan),ut.txtgrp.append(ut.txtElement),this._ensureTransformGroup().append(ut.txtElement)}setLeadingMoveText(tt,ut){this.setLeading(-ut),this.moveText(tt,ut)}addFontStyle(tt){if(!tt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ut=_(tt.data,tt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${tt.loadedName}"; src: url(${ut}); }
`}setFont(tt){const ut=this.current,it=this.commonObjs.get(tt[0]);let lt=tt[1];ut.font=it,this.embedFonts&&!it.missingFile&&!this.embeddedFonts[it.loadedName]&&(this.addFontStyle(it),this.embeddedFonts[it.loadedName]=it),ut.fontMatrix=it.fontMatrix||o.FONT_IDENTITY_MATRIX;let mt="normal";it.black?mt="900":it.bold&&(mt="bold");const Et=it.italic?"italic":"normal";lt<0?(lt=-lt,ut.fontDirection=-1):ut.fontDirection=1,ut.fontSize=lt,ut.fontFamily=it.loadedName,ut.fontWeight=mt,ut.fontStyle=Et,ut.tspan=this.svgFactory.createElement("svg:tspan"),ut.tspan.setAttributeNS(null,"y",ot(-ut.y)),ut.xcoords=[],ut.ycoords=[]}endText(){var ut;const tt=this.current;tt.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((ut=tt.txtElement)!=null&&ut.hasChildNodes())&&(tt.element=tt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(tt){tt>0&&(this.current.lineWidth=tt)}setLineCap(tt){this.current.lineCap=h[tt]}setLineJoin(tt){this.current.lineJoin=b[tt]}setMiterLimit(tt){this.current.miterLimit=tt}setStrokeAlpha(tt){this.current.strokeAlpha=tt}setStrokeRGBColor(tt,ut,it){this.current.strokeColor=o.Util.makeHexColor(tt,ut,it)}setFillAlpha(tt){this.current.fillAlpha=tt}setFillRGBColor(tt,ut,it){this.current.fillColor=o.Util.makeHexColor(tt,ut,it),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(tt){this.current.strokeColor=this._makeColorN_Pattern(tt)}setFillColorN(tt){this.current.fillColor=this._makeColorN_Pattern(tt)}shadingFill(tt){const{width:ut,height:it}=this.viewport,lt=o.Util.inverseTransform(this.transformMatrix),[mt,Et,ft,xt]=o.Util.getAxialAlignedBoundingBox([0,0,ut,it],lt),kt=this.svgFactory.createElement("svg:rect");kt.setAttributeNS(null,"x",mt),kt.setAttributeNS(null,"y",Et),kt.setAttributeNS(null,"width",ft-mt),kt.setAttributeNS(null,"height",xt-Et),kt.setAttributeNS(null,"fill",this._makeShadingPattern(tt)),this.current.fillAlpha<1&&kt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(kt)}_makeColorN_Pattern(tt){return tt[0]==="TilingPattern"?this._makeTilingPattern(tt):this._makeShadingPattern(tt)}_makeTilingPattern(tt){const ut=tt[1],it=tt[2],lt=tt[3]||o.IDENTITY_MATRIX,[mt,Et,ft,xt]=tt[4],kt=tt[5],Dt=tt[6],Ot=tt[7],Bt=`shading${_e++}`,[Ft,Mt,vt,Rt]=o.Util.normalizeRect([...o.Util.applyTransform([mt,Et],lt),...o.Util.applyTransform([ft,xt],lt)]),[$t,_t]=o.Util.singularValueDecompose2dScale(lt),rt=kt*$t,at=Dt*_t,gt=this.svgFactory.createElement("svg:pattern");gt.setAttributeNS(null,"id",Bt),gt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),gt.setAttributeNS(null,"width",rt),gt.setAttributeNS(null,"height",at),gt.setAttributeNS(null,"x",`${Ft}`),gt.setAttributeNS(null,"y",`${Mt}`);const wt=this.svg,St=this.transformMatrix,Tt=this.current.fillColor,Lt=this.current.strokeColor,Kt=this.svgFactory.create(vt-Ft,Rt-Mt);if(this.svg=Kt,this.transformMatrix=lt,Ot===2){const en=o.Util.makeHexColor(...ut);this.current.fillColor=en,this.current.strokeColor=en}return this.executeOpTree(this.convertOpList(it)),this.svg=wt,this.transformMatrix=St,this.current.fillColor=Tt,this.current.strokeColor=Lt,gt.append(Kt.childNodes[0]),this.defs.append(gt),`url(#${Bt})`}_makeShadingPattern(tt){switch(typeof tt=="string"&&(tt=this.objs.get(tt)),tt[0]){case"RadialAxial":const ut=`shading${_e++}`,it=tt[3];let lt;switch(tt[1]){case"axial":const mt=tt[4],Et=tt[5];lt=this.svgFactory.createElement("svg:linearGradient"),lt.setAttributeNS(null,"id",ut),lt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),lt.setAttributeNS(null,"x1",mt[0]),lt.setAttributeNS(null,"y1",mt[1]),lt.setAttributeNS(null,"x2",Et[0]),lt.setAttributeNS(null,"y2",Et[1]);break;case"radial":const ft=tt[4],xt=tt[5],kt=tt[6],Dt=tt[7];lt=this.svgFactory.createElement("svg:radialGradient"),lt.setAttributeNS(null,"id",ut),lt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),lt.setAttributeNS(null,"cx",xt[0]),lt.setAttributeNS(null,"cy",xt[1]),lt.setAttributeNS(null,"r",Dt),lt.setAttributeNS(null,"fx",ft[0]),lt.setAttributeNS(null,"fy",ft[1]),lt.setAttributeNS(null,"fr",kt);break;default:throw new Error(`Unknown RadialAxial type: ${tt[1]}`)}for(const mt of it){const Et=this.svgFactory.createElement("svg:stop");Et.setAttributeNS(null,"offset",mt[0]),Et.setAttributeNS(null,"stop-color",mt[1]),lt.append(Et)}return this.defs.append(lt),`url(#${ut})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${tt[0]}`)}}setDash(tt,ut){this.current.dashArray=tt,this.current.dashPhase=ut}constructPath(tt,ut){const it=this.current;let lt=it.x,mt=it.y,Et=[],ft=0;for(const xt of tt)switch(xt|0){case o.OPS.rectangle:lt=ut[ft++],mt=ut[ft++];const kt=ut[ft++],Dt=ut[ft++],Ot=lt+kt,Bt=mt+Dt;Et.push("M",ot(lt),ot(mt),"L",ot(Ot),ot(mt),"L",ot(Ot),ot(Bt),"L",ot(lt),ot(Bt),"Z");break;case o.OPS.moveTo:lt=ut[ft++],mt=ut[ft++],Et.push("M",ot(lt),ot(mt));break;case o.OPS.lineTo:lt=ut[ft++],mt=ut[ft++],Et.push("L",ot(lt),ot(mt));break;case o.OPS.curveTo:lt=ut[ft+4],mt=ut[ft+5],Et.push("C",ot(ut[ft]),ot(ut[ft+1]),ot(ut[ft+2]),ot(ut[ft+3]),ot(lt),ot(mt)),ft+=6;break;case o.OPS.curveTo2:Et.push("C",ot(lt),ot(mt),ot(ut[ft]),ot(ut[ft+1]),ot(ut[ft+2]),ot(ut[ft+3])),lt=ut[ft+2],mt=ut[ft+3],ft+=4;break;case o.OPS.curveTo3:lt=ut[ft+2],mt=ut[ft+3],Et.push("C",ot(ut[ft]),ot(ut[ft+1]),ot(lt),ot(mt),ot(lt),ot(mt)),ft+=4;break;case o.OPS.closePath:Et.push("Z");break}Et=Et.join(" "),it.path&&tt.length>0&&tt[0]!==o.OPS.rectangle&&tt[0]!==o.OPS.moveTo?Et=it.path.getAttributeNS(null,"d")+Et:(it.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(it.path)),it.path.setAttributeNS(null,"d",Et),it.path.setAttributeNS(null,"fill","none"),it.element=it.path,it.setCurrentPoint(lt,mt)}endPath(){const tt=this.current;if(tt.path=null,!this.pendingClip)return;if(!tt.element){this.pendingClip=null;return}const ut=`clippath${dt++}`,it=this.svgFactory.createElement("svg:clipPath");it.setAttributeNS(null,"id",ut),it.setAttributeNS(null,"transform",ht(this.transformMatrix));const lt=tt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?lt.setAttributeNS(null,"clip-rule","evenodd"):lt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,it.append(lt),this.defs.append(it),tt.activeClipUrl){tt.clipGroup=null;for(const mt of this.extraStack)mt.clipGroup=null;it.setAttributeNS(null,"clip-path",tt.activeClipUrl)}tt.activeClipUrl=`url(#${ut})`,this.tgrp=null}clip(tt){this.pendingClip=tt}closePath(){const tt=this.current;if(tt.path){const ut=`${tt.path.getAttributeNS(null,"d")}Z`;tt.path.setAttributeNS(null,"d",ut)}}setLeading(tt){this.current.leading=-tt}setTextRise(tt){this.current.textRise=tt}setTextRenderingMode(tt){this.current.textRenderingMode=tt}setHScale(tt){this.current.textHScale=tt/100}setRenderingIntent(tt){}setFlatness(tt){}setGState(tt){for(const[ut,it]of tt)switch(ut){case"LW":this.setLineWidth(it);break;case"LC":this.setLineCap(it);break;case"LJ":this.setLineJoin(it);break;case"ML":this.setMiterLimit(it);break;case"D":this.setDash(it[0],it[1]);break;case"RI":this.setRenderingIntent(it);break;case"FL":this.setFlatness(it);break;case"Font":this.setFont(it);break;case"CA":this.setStrokeAlpha(it);break;case"ca":this.setFillAlpha(it);break;default:(0,o.warn)(`Unimplemented graphic state operator ${ut}`);break}}fill(){const tt=this.current;tt.element&&(tt.element.setAttributeNS(null,"fill",tt.fillColor),tt.element.setAttributeNS(null,"fill-opacity",tt.fillAlpha),this.endPath())}stroke(){const tt=this.current;tt.element&&(this._setStrokeAttributes(tt.element),tt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(tt,ut=1){const it=this.current;let lt=it.dashArray;ut!==1&&lt.length>0&&(lt=lt.map(function(mt){return ut*mt})),tt.setAttributeNS(null,"stroke",it.strokeColor),tt.setAttributeNS(null,"stroke-opacity",it.strokeAlpha),tt.setAttributeNS(null,"stroke-miterlimit",ot(it.miterLimit)),tt.setAttributeNS(null,"stroke-linecap",it.lineCap),tt.setAttributeNS(null,"stroke-linejoin",it.lineJoin),tt.setAttributeNS(null,"stroke-width",ot(ut*it.lineWidth)+"px"),tt.setAttributeNS(null,"stroke-dasharray",lt.map(ot).join(" ")),tt.setAttributeNS(null,"stroke-dashoffset",ot(ut*it.dashPhase)+"px")}eoFill(){var tt;(tt=this.current.element)==null||tt.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var tt;(tt=this.current.element)==null||tt.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const tt=this.svgFactory.createElement("svg:rect");tt.setAttributeNS(null,"x","0"),tt.setAttributeNS(null,"y","0"),tt.setAttributeNS(null,"width","1px"),tt.setAttributeNS(null,"height","1px"),tt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(tt)}paintImageXObject(tt){const ut=this.getObject(tt);if(!ut){(0,o.warn)(`Dependent image with object ID ${tt} is not ready yet`);return}this.paintInlineImageXObject(ut)}paintInlineImageXObject(tt,ut){const it=tt.width,lt=tt.height,mt=et(tt,this.forceDataSchema,!!ut),Et=this.svgFactory.createElement("svg:rect");Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y","0"),Et.setAttributeNS(null,"width",ot(it)),Et.setAttributeNS(null,"height",ot(lt)),this.current.element=Et,this.clip("nonzero");const ft=this.svgFactory.createElement("svg:image");ft.setAttributeNS(g,"xlink:href",mt),ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y",ot(-lt)),ft.setAttributeNS(null,"width",ot(it)+"px"),ft.setAttributeNS(null,"height",ot(lt)+"px"),ft.setAttributeNS(null,"transform",`scale(${ot(1/it)} ${ot(-1/lt)})`),ut?ut.append(ft):this._ensureTransformGroup().append(ft)}paintImageMaskXObject(tt){const ut=this.getObject(tt.data,tt);if(ut.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const it=this.current,lt=ut.width,mt=ut.height,Et=it.fillColor;it.maskId=`mask${$++}`;const ft=this.svgFactory.createElement("svg:mask");ft.setAttributeNS(null,"id",it.maskId);const xt=this.svgFactory.createElement("svg:rect");xt.setAttributeNS(null,"x","0"),xt.setAttributeNS(null,"y","0"),xt.setAttributeNS(null,"width",ot(lt)),xt.setAttributeNS(null,"height",ot(mt)),xt.setAttributeNS(null,"fill",Et),xt.setAttributeNS(null,"mask",`url(#${it.maskId})`),this.defs.append(ft),this._ensureTransformGroup().append(xt),this.paintInlineImageXObject(ut,ft)}paintFormXObjectBegin(tt,ut){if(Array.isArray(tt)&&tt.length===6&&this.transform(tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]),ut){const it=ut[2]-ut[0],lt=ut[3]-ut[1],mt=this.svgFactory.createElement("svg:rect");mt.setAttributeNS(null,"x",ut[0]),mt.setAttributeNS(null,"y",ut[1]),mt.setAttributeNS(null,"width",ot(it)),mt.setAttributeNS(null,"height",ot(lt)),this.current.element=mt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(tt){const ut=this.svgFactory.create(tt.width,tt.height),it=this.svgFactory.createElement("svg:defs");ut.append(it),this.defs=it;const lt=this.svgFactory.createElement("svg:g");return lt.setAttributeNS(null,"transform",ht(tt.transform)),ut.append(lt),this.svg=lt,ut}_ensureClipGroup(){if(!this.current.clipGroup){const tt=this.svgFactory.createElement("svg:g");tt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(tt),this.current.clipGroup=tt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ht(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}i.SVGGraphics=ct},(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class s{static textContent(o){const c=[],d={items:c,styles:Object.create(null)};function g(h){var et;if(!h)return;let b=null;const _=h.name;if(_==="#text")b=h.value;else if(s.shouldBuildText(_))(et=h==null?void 0:h.attributes)!=null&&et.textContent?b=h.attributes.textContent:h.value&&(b=h.value);else return;if(b!==null&&c.push({str:b}),!!h.children)for(const nt of h.children)g(nt)}return g(o),d}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}i.XfaText=s},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=ht,i.updateTextLayer=dt;var a=s(1),o=s(6);const c=1e5,d=30,g=.8,h=new Map;function b($,_e){let ct;if(_e&&a.FeatureTest.isOffscreenCanvasSupported)ct=new OffscreenCanvas($,$).getContext("2d",{alpha:!1});else{const pt=document.createElement("canvas");pt.width=pt.height=$,ct=pt.getContext("2d",{alpha:!1})}return ct}function _($,_e){const ct=h.get($);if(ct)return ct;const pt=b(d,_e);pt.font=`${d}px ${$}`;const tt=pt.measureText("");let ut=tt.fontBoundingBoxAscent,it=Math.abs(tt.fontBoundingBoxDescent);if(ut){const mt=ut/(ut+it);return h.set($,mt),pt.canvas.width=pt.canvas.height=0,mt}pt.strokeStyle="red",pt.clearRect(0,0,d,d),pt.strokeText("g",0,0);let lt=pt.getImageData(0,0,d,d).data;it=0;for(let mt=lt.length-1-3;mt>=0;mt-=4)if(lt[mt]>0){it=Math.ceil(mt/4/d);break}pt.clearRect(0,0,d,d),pt.strokeText("A",0,d),lt=pt.getImageData(0,0,d,d).data,ut=0;for(let mt=0,Et=lt.length;mt<Et;mt+=4)if(lt[mt]>0){ut=d-Math.floor(mt/4/d);break}if(pt.canvas.width=pt.canvas.height=0,ut){const mt=ut/(ut+it);return h.set($,mt),mt}return h.set($,g),g}function et($,_e,ct){const pt=document.createElement("span"),tt={angle:0,canvasWidth:0,hasText:_e.str!=="",hasEOL:_e.hasEOL,fontSize:0};$._textDivs.push(pt);const ut=a.Util.transform($._transform,_e.transform);let it=Math.atan2(ut[1],ut[0]);const lt=ct[_e.fontName];lt.vertical&&(it+=Math.PI/2);const mt=Math.hypot(ut[2],ut[3]),Et=mt*_(lt.fontFamily,$._isOffscreenCanvasSupported);let ft,xt;it===0?(ft=ut[4],xt=ut[5]-Et):(ft=ut[4]+Et*Math.sin(it),xt=ut[5]-Et*Math.cos(it));const kt="calc(var(--scale-factor)*",Dt=pt.style;$._container===$._rootContainer?(Dt.left=`${(100*ft/$._pageWidth).toFixed(2)}%`,Dt.top=`${(100*xt/$._pageHeight).toFixed(2)}%`):(Dt.left=`${kt}${ft.toFixed(2)}px)`,Dt.top=`${kt}${xt.toFixed(2)}px)`),Dt.fontSize=`${kt}${mt.toFixed(2)}px)`,Dt.fontFamily=lt.fontFamily,tt.fontSize=mt,pt.setAttribute("role","presentation"),pt.textContent=_e.str,pt.dir=_e.dir,$._fontInspectorEnabled&&(pt.dataset.fontName=_e.fontName),it!==0&&(tt.angle=it*(180/Math.PI));let Ot=!1;if(_e.str.length>1)Ot=!0;else if(_e.str!==" "&&_e.transform[0]!==_e.transform[3]){const Bt=Math.abs(_e.transform[0]),Ft=Math.abs(_e.transform[3]);Bt!==Ft&&Math.max(Bt,Ft)/Math.min(Bt,Ft)>1.5&&(Ot=!0)}Ot&&(tt.canvasWidth=lt.vertical?_e.height:_e.width),$._textDivProperties.set(pt,tt),$._isReadableStream&&$._layoutText(pt)}function nt($){const{div:_e,scale:ct,properties:pt,ctx:tt,prevFontSize:ut,prevFontFamily:it}=$,{style:lt}=_e;let mt="";if(pt.canvasWidth!==0&&pt.hasText){const{fontFamily:Et}=lt,{canvasWidth:ft,fontSize:xt}=pt;(ut!==xt||it!==Et)&&(tt.font=`${xt*ct}px ${Et}`,$.prevFontSize=xt,$.prevFontFamily=Et);const{width:kt}=tt.measureText(_e.textContent);kt>0&&(mt=`scaleX(${ft*ct/kt})`)}pt.angle!==0&&(mt=`rotate(${pt.angle}deg) ${mt}`),mt.length>0&&(lt.transform=mt)}function st($){if($._canceled)return;const _e=$._textDivs,ct=$._capability;if(_e.length>c){ct.resolve();return}if(!$._isReadableStream)for(const tt of _e)$._layoutText(tt);ct.resolve()}class ot{constructor({textContentSource:_e,container:ct,viewport:pt,textDivs:tt,textDivProperties:ut,textContentItemsStr:it,isOffscreenCanvasSupported:lt}){var kt;this._textContentSource=_e,this._isReadableStream=_e instanceof ReadableStream,this._container=this._rootContainer=ct,this._textDivs=tt||[],this._textContentItemsStr=it||[],this._isOffscreenCanvasSupported=lt,this._fontInspectorEnabled=!!((kt=globalThis.FontInspector)!=null&&kt.enabled),this._reader=null,this._textDivProperties=ut||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:pt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,lt)};const{pageWidth:mt,pageHeight:Et,pageX:ft,pageY:xt}=pt.rawDims;this._transform=[1,0,0,-1,-ft,xt+Et],this._pageWidth=mt,this._pageHeight=Et,(0,o.setLayerDimensions)(ct,pt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(_e,ct){for(const pt of _e){if(pt.str===void 0){if(pt.type==="beginMarkedContentProps"||pt.type==="beginMarkedContent"){const tt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),pt.id!==null&&this._container.setAttribute("id",`${pt.id}`),tt.append(this._container)}else pt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(pt.str),et(this,pt,ct)}}_layoutText(_e){const ct=this._layoutTextParams.properties=this._textDivProperties.get(_e);if(this._layoutTextParams.div=_e,nt(this._layoutTextParams),ct.hasText&&this._container.append(_e),ct.hasEOL){const pt=document.createElement("br");pt.setAttribute("role","presentation"),this._container.append(pt)}}_render(){const _e=new a.PromiseCapability;let ct=Object.create(null);if(this._isReadableStream){const pt=()=>{this._reader.read().then(({value:tt,done:ut})=>{if(ut){_e.resolve();return}Object.assign(ct,tt.styles),this._processItems(tt.items,ct),pt()},_e.reject)};this._reader=this._textContentSource.getReader(),pt()}else if(this._textContentSource){const{items:pt,styles:tt}=this._textContentSource;this._processItems(pt,tt),_e.resolve()}else throw new Error('No "textContentSource" parameter specified.');_e.promise.then(()=>{ct=null,st(this)},this._capability.reject)}}i.TextLayerRenderTask=ot;function ht($){!$.textContentSource&&($.textContent||$.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),$.textContentSource=$.textContent||$.textContentStream);const{container:_e,viewport:ct}=$,pt=getComputedStyle(_e),tt=pt.getPropertyValue("visibility"),ut=parseFloat(pt.getPropertyValue("--scale-factor"));tt==="visible"&&(!ut||Math.abs(ut-ct.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const it=new ot($);return it._render(),it}function dt({container:$,viewport:_e,textDivs:ct,textDivProperties:pt,isOffscreenCanvasSupported:tt,mustRotate:ut=!0,mustRescale:it=!0}){if(ut&&(0,o.setLayerDimensions)($,{rotation:_e.rotation}),it){const lt=b(0,tt),Et={prevFontSize:null,prevFontFamily:null,div:null,scale:_e.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:lt};for(const ft of ct)Et.properties=pt.get(ft),Et.div=ft,nt(Et)}}},(e,i,s)=>{var _,et,nt,st,ot,ht,dt,$,_e,ct,pt,jr,ur,Lr,Nr;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var a=s(1),o=s(4),c=s(28),d=s(33),g=s(6),h=s(34);const mt=class mt{constructor({uiManager:ft,pageIndex:xt,div:kt,accessibilityManager:Dt,annotationLayer:Ot,viewport:Bt,l10n:Ft}){qt(this,pt);qt(this,_);qt(this,et,!1);qt(this,nt,null);qt(this,st,this.pointerup.bind(this));qt(this,ot,this.pointerdown.bind(this));qt(this,ht,new Map);qt(this,dt,!1);qt(this,$,!1);qt(this,_e,!1);qt(this,ct);const Mt=[c.FreeTextEditor,d.InkEditor,h.StampEditor];if(!mt._initialized){mt._initialized=!0;for(const vt of Mt)vt.initialize(Ft)}ft.registerEditorTypes(Mt),Yt(this,ct,ft),this.pageIndex=xt,this.div=kt,Yt(this,_,Dt),Yt(this,nt,Ot),this.viewport=Bt,j(this,ct).addLayer(this)}get isEmpty(){return j(this,ht).size===0}updateToolbar(ft){j(this,ct).updateToolbar(ft)}updateMode(ft=j(this,ct).getMode()){Nt(this,pt,Nr).call(this),ft===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ft!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ft===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ft===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ft===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ft){if(!ft&&j(this,ct).getMode()!==a.AnnotationEditorType.INK)return;if(!ft){for(const kt of j(this,ht).values())if(kt.isEmpty()){kt.setInBackground();return}}Nt(this,pt,ur).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ft){j(this,ct).setEditingState(ft)}addCommands(ft){j(this,ct).addCommands(ft)}enable(){this.div.style.pointerEvents="auto";const ft=new Set;for(const kt of j(this,ht).values())kt.enableEditing(),kt.annotationElementId&&ft.add(kt.annotationElementId);if(!j(this,nt))return;const xt=j(this,nt).getEditableAnnotations();for(const kt of xt){if(kt.hide(),j(this,ct).isDeletedAnnotationElement(kt.data.id)||ft.has(kt.data.id))continue;const Dt=this.deserialize(kt);Dt&&(this.addOrRebuild(Dt),Dt.enableEditing())}}disable(){var xt;Yt(this,_e,!0),this.div.style.pointerEvents="none";const ft=new Set;for(const kt of j(this,ht).values()){if(kt.disableEditing(),!kt.annotationElementId||kt.serialize()!==null){ft.add(kt.annotationElementId);continue}(xt=this.getEditableAnnotation(kt.annotationElementId))==null||xt.show(),kt.remove()}if(j(this,nt)){const kt=j(this,nt).getEditableAnnotations();for(const Dt of kt){const{id:Ot}=Dt.data;ft.has(Ot)||j(this,ct).isDeletedAnnotationElement(Ot)||Dt.show()}}Nt(this,pt,Nr).call(this),this.isEmpty&&(this.div.hidden=!0),Yt(this,_e,!1)}getEditableAnnotation(ft){var xt;return((xt=j(this,nt))==null?void 0:xt.getEditableAnnotation(ft))||null}setActiveEditor(ft){j(this,ct).getActive()!==ft&&j(this,ct).setActiveEditor(ft)}enableClick(){this.div.addEventListener("pointerdown",j(this,ot)),this.div.addEventListener("pointerup",j(this,st))}disableClick(){this.div.removeEventListener("pointerdown",j(this,ot)),this.div.removeEventListener("pointerup",j(this,st))}attach(ft){j(this,ht).set(ft.id,ft);const{annotationElementId:xt}=ft;xt&&j(this,ct).isDeletedAnnotationElement(xt)&&j(this,ct).removeDeletedAnnotationElement(ft)}detach(ft){var xt;j(this,ht).delete(ft.id),(xt=j(this,_))==null||xt.removePointerInTextLayer(ft.contentDiv),!j(this,_e)&&ft.annotationElementId&&j(this,ct).addDeletedAnnotationElement(ft)}remove(ft){this.detach(ft),j(this,ct).removeEditor(ft),ft.div.contains(document.activeElement)&&setTimeout(()=>{j(this,ct).focusMainContainer()},0),ft.div.remove(),ft.isAttachedToDOM=!1,j(this,$)||this.addInkEditorIfNeeded(!1)}changeParent(ft){var xt;ft.parent!==this&&(ft.annotationElementId&&(j(this,ct).addDeletedAnnotationElement(ft.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(ft),ft.annotationElementId=null),this.attach(ft),(xt=ft.parent)==null||xt.detach(ft),ft.setParent(this),ft.div&&ft.isAttachedToDOM&&(ft.div.remove(),this.div.append(ft.div)))}add(ft){if(this.changeParent(ft),j(this,ct).addEditor(ft),this.attach(ft),!ft.isAttachedToDOM){const xt=ft.render();this.div.append(xt),ft.isAttachedToDOM=!0}ft.fixAndSetPosition(),ft.onceAdded(),j(this,ct).addToAnnotationStorage(ft)}moveEditorInDOM(ft){var kt;if(!ft.isAttachedToDOM)return;const{activeElement:xt}=document;ft.div.contains(xt)&&(ft._focusEventsAllowed=!1,setTimeout(()=>{ft.div.contains(document.activeElement)?ft._focusEventsAllowed=!0:(ft.div.addEventListener("focusin",()=>{ft._focusEventsAllowed=!0},{once:!0}),xt.focus())},0)),ft._structTreeParentId=(kt=j(this,_))==null?void 0:kt.moveElementInDOM(this.div,ft.div,ft.contentDiv,!0)}addOrRebuild(ft){ft.needsToBeRebuilt()?ft.rebuild():this.add(ft)}addUndoableEditor(ft){const xt=()=>ft._uiManager.rebuild(ft),kt=()=>{ft.remove()};this.addCommands({cmd:xt,undo:kt,mustExec:!1})}getNextId(){return j(this,ct).getId()}pasteEditor(ft,xt){j(this,ct).updateToolbar(ft),j(this,ct).updateMode(ft);const{offsetX:kt,offsetY:Dt}=Nt(this,pt,Lr).call(this),Ot=this.getNextId(),Bt=Nt(this,pt,jr).call(this,{parent:this,id:Ot,x:kt,y:Dt,uiManager:j(this,ct),isCentered:!0,...xt});Bt&&this.add(Bt)}deserialize(ft){switch(ft.annotationType??ft.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(ft,this,j(this,ct));case a.AnnotationEditorType.INK:return d.InkEditor.deserialize(ft,this,j(this,ct));case a.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(ft,this,j(this,ct))}return null}addNewEditor(){Nt(this,pt,ur).call(this,Nt(this,pt,Lr).call(this),!0)}setSelected(ft){j(this,ct).setSelected(ft)}toggleSelected(ft){j(this,ct).toggleSelected(ft)}isSelected(ft){return j(this,ct).isSelected(ft)}unselect(ft){j(this,ct).unselect(ft)}pointerup(ft){const{isMac:xt}=a.FeatureTest.platform;if(!(ft.button!==0||ft.ctrlKey&&xt)&&ft.target===this.div&&j(this,dt)){if(Yt(this,dt,!1),!j(this,et)){Yt(this,et,!0);return}if(j(this,ct).getMode()===a.AnnotationEditorType.STAMP){j(this,ct).unselectAll();return}Nt(this,pt,ur).call(this,ft,!1)}}pointerdown(ft){if(j(this,dt)){Yt(this,dt,!1);return}const{isMac:xt}=a.FeatureTest.platform;if(ft.button!==0||ft.ctrlKey&&xt||ft.target!==this.div)return;Yt(this,dt,!0);const kt=j(this,ct).getActive();Yt(this,et,!kt||kt.isEmpty())}findNewParent(ft,xt,kt){const Dt=j(this,ct).findParent(xt,kt);return Dt===null||Dt===this?!1:(Dt.changeParent(ft),!0)}destroy(){var ft,xt;((ft=j(this,ct).getActive())==null?void 0:ft.parent)===this&&(j(this,ct).commitOrRemove(),j(this,ct).setActiveEditor(null));for(const kt of j(this,ht).values())(xt=j(this,_))==null||xt.removePointerInTextLayer(kt.contentDiv),kt.setParent(null),kt.isAttachedToDOM=!1,kt.div.remove();this.div=null,j(this,ht).clear(),j(this,ct).removeLayer(this)}render({viewport:ft}){this.viewport=ft,(0,g.setLayerDimensions)(this.div,ft);for(const xt of j(this,ct).getEditors(this.pageIndex))this.add(xt);this.updateMode()}update({viewport:ft}){j(this,ct).commitOrRemove(),this.viewport=ft,(0,g.setLayerDimensions)(this.div,{rotation:ft.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ft,pageHeight:xt}=this.viewport.rawDims;return[ft,xt]}};_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,pt=new WeakSet,jr=function(ft){switch(j(this,ct).getMode()){case a.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(ft);case a.AnnotationEditorType.INK:return new d.InkEditor(ft);case a.AnnotationEditorType.STAMP:return new h.StampEditor(ft)}return null},ur=function(ft,xt){const kt=this.getNextId(),Dt=Nt(this,pt,jr).call(this,{parent:this,id:kt,x:ft.offsetX,y:ft.offsetY,uiManager:j(this,ct),isCentered:xt});return Dt&&this.add(Dt),Dt},Lr=function(){const{x:ft,y:xt,width:kt,height:Dt}=this.div.getBoundingClientRect(),Ot=Math.max(0,ft),Bt=Math.max(0,xt),Ft=Math.min(window.innerWidth,ft+kt),Mt=Math.min(window.innerHeight,xt+Dt),vt=(Ot+Ft)/2-ft,Rt=(Bt+Mt)/2-xt,[$t,_t]=this.viewport.rotation%180===0?[vt,Rt]:[Rt,vt];return{offsetX:$t,offsetY:_t}},Nr=function(){Yt(this,$,!0);for(const ft of j(this,ht).values())ft.isEmpty()&&ft.remove();Yt(this,$,!1)},Ln(mt,"_initialized",!1);let b=mt;i.AnnotationEditorLayer=b},(e,i,s)=>{var h,b,_,et,nt,st,ot,ht,dt,$,ps,fs,ms,tr,$r,gs,Ur;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var a=s(1),o=s(5),c=s(4),d=s(29);const mt=class mt extends c.AnnotationEditor{constructor(xt){super({...xt,name:"freeTextEditor"});qt(this,$);qt(this,h,this.editorDivBlur.bind(this));qt(this,b,this.editorDivFocus.bind(this));qt(this,_,this.editorDivInput.bind(this));qt(this,et,this.editorDivKeydown.bind(this));qt(this,nt);qt(this,st,"");qt(this,ot,`${this.id}-editor`);qt(this,ht);qt(this,dt,null);Yt(this,nt,xt.color||mt._defaultColor||c.AnnotationEditor._defaultLineColor),Yt(this,ht,xt.fontSize||mt._defaultFontSize)}static get _keyboardManager(){const xt=mt.prototype,kt=Bt=>Bt.isEmpty(),Dt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,Ot=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],xt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],xt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],xt._translateEmpty,{args:[-Dt,0],checker:kt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],xt._translateEmpty,{args:[-Ot,0],checker:kt}],[["ArrowRight","mac+ArrowRight"],xt._translateEmpty,{args:[Dt,0],checker:kt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],xt._translateEmpty,{args:[Ot,0],checker:kt}],[["ArrowUp","mac+ArrowUp"],xt._translateEmpty,{args:[0,-Dt],checker:kt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],xt._translateEmpty,{args:[0,-Ot],checker:kt}],[["ArrowDown","mac+ArrowDown"],xt._translateEmpty,{args:[0,Dt],checker:kt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],xt._translateEmpty,{args:[0,Ot],checker:kt}]]))}static initialize(xt){c.AnnotationEditor.initialize(xt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const kt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(kt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(xt,kt){switch(xt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:mt._defaultFontSize=kt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:mt._defaultColor=kt;break}}updateParams(xt,kt){switch(xt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Nt(this,$,ps).call(this,kt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Nt(this,$,fs).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,mt._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,mt._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,j(this,ht)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,j(this,nt)]]}_translateEmpty(xt,kt){this._uiManager.translateSelectedEditors(xt,kt,!0)}getInitialTranslation(){const xt=this.parentScale;return[-mt._internalPadding*xt,-(mt._internalPadding+j(this,ht))*xt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",j(this,et)),this.editorDiv.addEventListener("focus",j(this,b)),this.editorDiv.addEventListener("blur",j(this,h)),this.editorDiv.addEventListener("input",j(this,_)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",j(this,ot)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",j(this,et)),this.editorDiv.removeEventListener("focus",j(this,b)),this.editorDiv.removeEventListener("blur",j(this,h)),this.editorDiv.removeEventListener("input",j(this,_)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(xt){this._focusEventsAllowed&&(super.focusin(xt),xt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var xt;if(this.width){Nt(this,$,Ur).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(xt=this._initialOptions)!=null&&xt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const xt=j(this,st),kt=Yt(this,st,Nt(this,$,ms).call(this).trimEnd());if(xt===kt)return;const Dt=Ot=>{if(Yt(this,st,Ot),!Ot){this.remove();return}Nt(this,$,$r).call(this),this._uiManager.rebuild(this),Nt(this,$,tr).call(this)};this.addCommands({cmd:()=>{Dt(kt)},undo:()=>{Dt(xt)},mustExec:!1}),Nt(this,$,tr).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(xt){this.enterInEditMode()}keydown(xt){xt.target===this.div&&xt.key==="Enter"&&(this.enterInEditMode(),xt.preventDefault())}editorDivKeydown(xt){mt._keyboardManager.exec(this,xt)}editorDivFocus(xt){this.isEditing=!0}editorDivBlur(xt){this.isEditing=!1}editorDivInput(xt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let xt,kt;this.width&&(xt=this.x,kt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",j(this,ot)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ot=>{var Bt;return(Bt=this.editorDiv)==null?void 0:Bt.setAttribute("aria-label",Ot)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ot=>{var Bt;return(Bt=this.editorDiv)==null?void 0:Bt.setAttribute("default-content",Ot)}),this.editorDiv.contentEditable=!0;const{style:Dt}=this.editorDiv;if(Dt.fontSize=`calc(${j(this,ht)}px * var(--scale-factor))`,Dt.color=j(this,nt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ot,Bt]=this.parentDimensions;if(this.annotationElementId){const{position:Ft}=j(this,dt);let[Mt,vt]=this.getInitialTranslation();[Mt,vt]=this.pageTranslationToScreen(Mt,vt);const[Rt,$t]=this.pageDimensions,[_t,rt]=this.pageTranslation;let at,gt;switch(this.rotation){case 0:at=xt+(Ft[0]-_t)/Rt,gt=kt+this.height-(Ft[1]-rt)/$t;break;case 90:at=xt+(Ft[0]-_t)/Rt,gt=kt-(Ft[1]-rt)/$t,[Mt,vt]=[vt,-Mt];break;case 180:at=xt-this.width+(Ft[0]-_t)/Rt,gt=kt-(Ft[1]-rt)/$t,[Mt,vt]=[-Mt,-vt];break;case 270:at=xt+(Ft[0]-_t-this.height*$t)/Rt,gt=kt+(Ft[1]-rt-this.width*Rt)/$t,[Mt,vt]=[-vt,Mt];break}this.setAt(at*Ot,gt*Bt,Mt,vt)}else this.setAt(xt*Ot,kt*Bt,this.width*Ot,this.height*Bt);Nt(this,$,$r).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(xt,kt,Dt){let Ot=null;if(xt instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ft,fontColor:Mt},rect:vt,rotation:Rt,id:$t},textContent:_t,textPosition:rt,parent:{page:{pageNumber:at}}}=xt;if(!_t||_t.length===0)return null;Ot=xt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(Mt),fontSize:Ft,value:_t.join(`
`),position:rt,pageIndex:at-1,rect:vt,rotation:Rt,id:$t,deleted:!1}}const Bt=super.deserialize(xt,kt,Dt);return Yt(Bt,ht,xt.fontSize),Yt(Bt,nt,a.Util.makeHexColor(...xt.color)),Yt(Bt,st,xt.value),Bt.annotationElementId=xt.id||null,Yt(Bt,dt,Ot),Bt}serialize(xt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const kt=mt._internalPadding*this.parentScale,Dt=this.getRect(kt,kt),Ot=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:j(this,nt)),Bt={annotationType:a.AnnotationEditorType.FREETEXT,color:Ot,fontSize:j(this,ht),value:j(this,st),pageIndex:this.pageIndex,rect:Dt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return xt?Bt:this.annotationElementId&&!Nt(this,$,gs).call(this,Bt)?null:(Bt.id=this.annotationElementId,Bt)}};h=new WeakMap,b=new WeakMap,_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakSet,ps=function(xt){const kt=Ot=>{this.editorDiv.style.fontSize=`calc(${Ot}px * var(--scale-factor))`,this.translate(0,-(Ot-j(this,ht))*this.parentScale),Yt(this,ht,Ot),Nt(this,$,tr).call(this)},Dt=j(this,ht);this.addCommands({cmd:()=>{kt(xt)},undo:()=>{kt(Dt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},fs=function(xt){const kt=j(this,nt);this.addCommands({cmd:()=>{Yt(this,nt,this.editorDiv.style.color=xt)},undo:()=>{Yt(this,nt,this.editorDiv.style.color=kt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ms=function(){const xt=this.editorDiv.getElementsByTagName("div");if(xt.length===0)return this.editorDiv.innerText;const kt=[];for(const Dt of xt)kt.push(Dt.innerText.replace(/\r\n?|\n/,""));return kt.join(`
`)},tr=function(){const[xt,kt]=this.parentDimensions;let Dt;if(this.isAttachedToDOM)Dt=this.div.getBoundingClientRect();else{const{currentLayer:Ot,div:Bt}=this,Ft=Bt.style.display;Bt.style.display="hidden",Ot.div.append(this.div),Dt=Bt.getBoundingClientRect(),Bt.remove(),Bt.style.display=Ft}this.rotation%180===this.parentRotation%180?(this.width=Dt.width/xt,this.height=Dt.height/kt):(this.width=Dt.height/xt,this.height=Dt.width/kt),this.fixAndSetPosition()},$r=function(){if(this.editorDiv.replaceChildren(),!!j(this,st))for(const xt of j(this,st).split(`
`)){const kt=document.createElement("div");kt.append(xt?document.createTextNode(xt):document.createElement("br")),this.editorDiv.append(kt)}},gs=function(xt){const{value:kt,fontSize:Dt,color:Ot,rect:Bt,pageIndex:Ft}=j(this,dt);return xt.value!==kt||xt.fontSize!==Dt||xt.rect.some((Mt,vt)=>Math.abs(Mt-Bt[vt])>=1)||xt.color.some((Mt,vt)=>Mt!==Ot[vt])||xt.pageIndex!==Ft},Ur=function(xt=!1){if(!this.annotationElementId)return;if(Nt(this,$,tr).call(this),!xt&&(this.width===0||this.height===0)){setTimeout(()=>Nt(this,$,Ur).call(this,!0),0);return}const kt=mt._internalPadding*this.parentScale;j(this,dt).rect=this.getRect(kt,kt)},Ln(mt,"_freeTextDefaultContent",""),Ln(mt,"_internalPadding",0),Ln(mt,"_defaultColor",null),Ln(mt,"_defaultFontSize",10),Ln(mt,"_type","freetext");let g=mt;i.FreeTextEditor=g},(e,i,s)=>{var gt,St,Vn,vs,Kt,en,Qt,rn,on,ln,Wt,Ht,yt,Ct,Ut,Vt,tn,cn,zt,It,dn,un,ys,dr,Br,zr,wn,Rn,Mn,sn,Gt,Xt,mn,Hr,Fn,Pt,nn,pn,_s,Wr;Object.defineProperty(i,"__esModule",{value:!0}),i.StampAnnotationElement=i.InkAnnotationElement=i.FreeTextAnnotationElement=i.AnnotationLayer=void 0;var a=s(1),o=s(6),c=s(3),d=s(30),g=s(31),h=s(32);const b=1e3,_=9,et=new WeakSet;function nt(gn){return{width:gn[2]-gn[0],height:gn[3]-gn[1]}}class st{static create(At){switch(At.data.annotationType){case a.AnnotationType.LINK:return new ht(At);case a.AnnotationType.TEXT:return new dt(At);case a.AnnotationType.WIDGET:switch(At.data.fieldType){case"Tx":return new _e(At);case"Btn":return At.data.radioButton?new tt(At):At.data.checkBox?new pt(At):new ut(At);case"Ch":return new it(At);case"Sig":return new ct(At)}return new $(At);case a.AnnotationType.POPUP:return new lt(At);case a.AnnotationType.FREETEXT:return new Et(At);case a.AnnotationType.LINE:return new ft(At);case a.AnnotationType.SQUARE:return new xt(At);case a.AnnotationType.CIRCLE:return new kt(At);case a.AnnotationType.POLYLINE:return new Dt(At);case a.AnnotationType.CARET:return new Bt(At);case a.AnnotationType.INK:return new Ft(At);case a.AnnotationType.POLYGON:return new Ot(At);case a.AnnotationType.HIGHLIGHT:return new Mt(At);case a.AnnotationType.UNDERLINE:return new vt(At);case a.AnnotationType.SQUIGGLY:return new Rt(At);case a.AnnotationType.STRIKEOUT:return new $t(At);case a.AnnotationType.STAMP:return new _t(At);case a.AnnotationType.FILEATTACHMENT:return new rt(At);default:return new ot(At)}}}const wt=class wt{constructor(At,{isRenderable:bt=!1,ignoreBorder:jt=!1,createQuadrilaterals:Jt=!1}={}){qt(this,gt,!1);this.isRenderable=bt,this.data=At.data,this.layer=At.layer,this.linkService=At.linkService,this.downloadManager=At.downloadManager,this.imageResourcesPath=At.imageResourcesPath,this.renderForms=At.renderForms,this.svgFactory=At.svgFactory,this.annotationStorage=At.annotationStorage,this.enableScripting=At.enableScripting,this.hasJSActions=At.hasJSActions,this._fieldObjects=At.fieldObjects,this.parent=At.parent,bt&&(this.container=this._createContainer(jt)),Jt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:At,contentsObj:bt,richText:jt}){return!!(At!=null&&At.str||bt!=null&&bt.str||jt!=null&&jt.str)}get hasPopupData(){return wt._hasPopupData(this.data)}_createContainer(At){const{data:bt,parent:{page:jt,viewport:Jt}}=this,Zt=document.createElement("section");Zt.setAttribute("data-annotation-id",bt.id),this instanceof $||(Zt.tabIndex=b),Zt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Zt.setAttribute("aria-haspopup","dialog"),bt.noRotate&&Zt.classList.add("norotate");const{pageWidth:an,pageHeight:hn,pageX:bn,pageY:yn}=Jt.rawDims;if(!bt.rect||this instanceof lt){const{rotation:Tn}=bt;return!bt.hasOwnCanvas&&Tn!==0&&this.setRotation(Tn,Zt),Zt}const{width:fn,height:Cn}=nt(bt.rect),_n=a.Util.normalizeRect([bt.rect[0],jt.view[3]-bt.rect[1]+jt.view[1],bt.rect[2],jt.view[3]-bt.rect[3]+jt.view[1]]);if(!At&&bt.borderStyle.width>0){Zt.style.borderWidth=`${bt.borderStyle.width}px`;const Tn=bt.borderStyle.horizontalCornerRadius,On=bt.borderStyle.verticalCornerRadius;if(Tn>0||On>0){const jn=`calc(${Tn}px * var(--scale-factor)) / calc(${On}px * var(--scale-factor))`;Zt.style.borderRadius=jn}else if(this instanceof tt){const jn=`calc(${fn}px * var(--scale-factor)) / calc(${Cn}px * var(--scale-factor))`;Zt.style.borderRadius=jn}switch(bt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:Zt.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:Zt.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:Zt.style.borderBottomStyle="solid";break}const Dn=bt.borderColor||null;Dn?(Yt(this,gt,!0),Zt.style.borderColor=a.Util.makeHexColor(Dn[0]|0,Dn[1]|0,Dn[2]|0)):Zt.style.borderWidth=0}Zt.style.left=`${100*(_n[0]-bn)/an}%`,Zt.style.top=`${100*(_n[1]-yn)/hn}%`;const{rotation:En}=bt;return bt.hasOwnCanvas||En===0?(Zt.style.width=`${100*fn/an}%`,Zt.style.height=`${100*Cn/hn}%`):this.setRotation(En,Zt),Zt}setRotation(At,bt=this.container){if(!this.data.rect)return;const{pageWidth:jt,pageHeight:Jt}=this.parent.viewport.rawDims,{width:Zt,height:an}=nt(this.data.rect);let hn,bn;At%180===0?(hn=100*Zt/jt,bn=100*an/Jt):(hn=100*an/jt,bn=100*Zt/Jt),bt.style.width=`${hn}%`,bt.style.height=`${bn}%`,bt.setAttribute("data-main-rotation",(360-At)%360)}get _commonActions(){const At=(bt,jt,Jt)=>{const Zt=Jt.detail[bt],an=Zt[0],hn=Zt.slice(1);Jt.target.style[jt]=d.ColorConverters[`${an}_HTML`](hn),this.annotationStorage.setValue(this.data.id,{[jt]:d.ColorConverters[`${an}_rgb`](hn)})};return(0,a.shadow)(this,"_commonActions",{display:bt=>{const{display:jt}=bt.detail,Jt=jt%2===1;this.container.style.visibility=Jt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Jt,noPrint:jt===1||jt===2})},print:bt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!bt.detail.print})},hidden:bt=>{const{hidden:jt}=bt.detail;this.container.style.visibility=jt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:jt,noView:jt})},focus:bt=>{setTimeout(()=>bt.target.focus({preventScroll:!1}),0)},userName:bt=>{bt.target.title=bt.detail.userName},readonly:bt=>{bt.target.disabled=bt.detail.readonly},required:bt=>{this._setRequired(bt.target,bt.detail.required)},bgColor:bt=>{At("bgColor","backgroundColor",bt)},fillColor:bt=>{At("fillColor","backgroundColor",bt)},fgColor:bt=>{At("fgColor","color",bt)},textColor:bt=>{At("textColor","color",bt)},borderColor:bt=>{At("borderColor","borderColor",bt)},strokeColor:bt=>{At("strokeColor","borderColor",bt)},rotation:bt=>{const jt=bt.detail.rotation;this.setRotation(jt),this.annotationStorage.setValue(this.data.id,{rotation:jt})}})}_dispatchEventFromSandbox(At,bt){const jt=this._commonActions;for(const Jt of Object.keys(bt.detail)){const Zt=At[Jt]||jt[Jt];Zt==null||Zt(bt)}}_setDefaultPropertiesFromJS(At){if(!this.enableScripting)return;const bt=this.annotationStorage.getRawValue(this.data.id);if(!bt)return;const jt=this._commonActions;for(const[Jt,Zt]of Object.entries(bt)){const an=jt[Jt];if(an){const hn={detail:{[Jt]:Zt},target:At};an(hn),delete bt[Jt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:At}=this.data;if(!At)return;const[bt,jt,Jt,Zt]=this.data.rect;if(At.length===1){const[,{x:On,y:Dn},{x:jn,y:$n}]=At[0];if(Jt===On&&Zt===Dn&&bt===jn&&jt===$n)return}const{style:an}=this.container;let hn;if(j(this,gt)){const{borderColor:On,borderWidth:Dn}=an;an.borderWidth=0,hn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${On}" stroke-width="${Dn}">`],this.container.classList.add("hasBorder")}const bn=Jt-bt,yn=Zt-jt,{svgFactory:fn}=this,Cn=fn.createElement("svg");Cn.classList.add("quadrilateralsContainer"),Cn.setAttribute("width",0),Cn.setAttribute("height",0);const _n=fn.createElement("defs");Cn.append(_n);const En=fn.createElement("clipPath"),Tn=`clippath_${this.data.id}`;En.setAttribute("id",Tn),En.setAttribute("clipPathUnits","objectBoundingBox"),_n.append(En);for(const[,{x:On,y:Dn},{x:jn,y:$n}]of At){const Nn=fn.createElement("rect"),Bn=(jn-bt)/bn,Hn=(Zt-Dn)/yn,Wn=(On-jn)/bn,Zr=(Dn-$n)/yn;Nn.setAttribute("x",Bn),Nn.setAttribute("y",Hn),Nn.setAttribute("width",Wn),Nn.setAttribute("height",Zr),En.append(Nn),hn==null||hn.push(`<rect vector-effect="non-scaling-stroke" x="${Bn}" y="${Hn}" width="${Wn}" height="${Zr}"/>`)}j(this,gt)&&(hn.push("</g></svg>')"),an.backgroundImage=hn.join("")),this.container.append(Cn),this.container.style.clipPath=`url(#${Tn})`}_createPopup(){const{container:At,data:bt}=this;At.setAttribute("aria-haspopup","dialog");const jt=new lt({data:{color:bt.color,titleObj:bt.titleObj,modificationDate:bt.modificationDate,contentsObj:bt.contentsObj,richText:bt.richText,parentRect:bt.rect,borderStyle:0,id:`popup_${bt.id}`,rotation:bt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(jt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(At,bt=null){const jt=[];if(this._fieldObjects){const Jt=this._fieldObjects[At];if(Jt)for(const{page:Zt,id:an,exportValues:hn}of Jt){if(Zt===-1||an===bt)continue;const bn=typeof hn=="string"?hn:null,yn=document.querySelector(`[data-element-id="${an}"]`);if(yn&&!et.has(yn)){(0,a.warn)(`_getElementsByName - element not allowed: ${an}`);continue}jt.push({id:an,exportValue:bn,domElement:yn})}return jt}for(const Jt of document.getElementsByName(At)){const{exportValue:Zt}=Jt,an=Jt.getAttribute("data-element-id");an!==bt&&et.has(Jt)&&jt.push({id:an,exportValue:Zt,domElement:Jt})}return jt}show(){var At;this.container&&(this.container.hidden=!1),(At=this.popup)==null||At.maybeShow()}hide(){var At;this.container&&(this.container.hidden=!0),(At=this.popup)==null||At.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const At=this.getElementsToTriggerPopup();if(Array.isArray(At))for(const bt of At)bt.classList.add("highlightArea");else At.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:At,data:{id:bt}}=this;this.container.addEventListener("dblclick",()=>{var jt;(jt=this.linkService.eventBus)==null||jt.dispatch("switchannotationeditormode",{source:this,mode:At,editId:bt})})}};gt=new WeakMap;let ot=wt;class ht extends ot{constructor(bt,jt=null){super(bt,{isRenderable:!0,ignoreBorder:!!(jt!=null&&jt.ignoreBorder),createQuadrilaterals:!0});qt(this,St);this.isTooltipOnly=bt.data.isTooltipOnly}render(){const{data:bt,linkService:jt}=this,Jt=document.createElement("a");Jt.setAttribute("data-element-id",bt.id);let Zt=!1;return bt.url?(jt.addLinkAttributes(Jt,bt.url,bt.newWindow),Zt=!0):bt.action?(this._bindNamedAction(Jt,bt.action),Zt=!0):bt.attachment?(this._bindAttachment(Jt,bt.attachment),Zt=!0):bt.setOCGState?(Nt(this,St,vs).call(this,Jt,bt.setOCGState),Zt=!0):bt.dest?(this._bindLink(Jt,bt.dest),Zt=!0):(bt.actions&&(bt.actions.Action||bt.actions["Mouse Up"]||bt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Jt,bt),Zt=!0),bt.resetForm?(this._bindResetFormAction(Jt,bt.resetForm),Zt=!0):this.isTooltipOnly&&!Zt&&(this._bindLink(Jt,""),Zt=!0)),this.container.classList.add("linkAnnotation"),Zt&&this.container.append(Jt),this.container}_bindLink(bt,jt){bt.href=this.linkService.getDestinationHash(jt),bt.onclick=()=>(jt&&this.linkService.goToDestination(jt),!1),(jt||jt==="")&&Nt(this,St,Vn).call(this)}_bindNamedAction(bt,jt){bt.href=this.linkService.getAnchorUrl(""),bt.onclick=()=>(this.linkService.executeNamedAction(jt),!1),Nt(this,St,Vn).call(this)}_bindAttachment(bt,jt){bt.href=this.linkService.getAnchorUrl(""),bt.onclick=()=>{var Jt;return(Jt=this.downloadManager)==null||Jt.openOrDownloadData(this.container,jt.content,jt.filename),!1},Nt(this,St,Vn).call(this)}_bindJSAction(bt,jt){bt.href=this.linkService.getAnchorUrl("");const Jt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Zt of Object.keys(jt.actions)){const an=Jt.get(Zt);an&&(bt[an]=()=>{var hn;return(hn=this.linkService.eventBus)==null||hn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt.id,name:Zt}}),!1})}bt.onclick||(bt.onclick=()=>!1),Nt(this,St,Vn).call(this)}_bindResetFormAction(bt,jt){const Jt=bt.onclick;if(Jt||(bt.href=this.linkService.getAnchorUrl("")),Nt(this,St,Vn).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Jt||(bt.onclick=()=>!1);return}bt.onclick=()=>{var Cn;Jt==null||Jt();const{fields:Zt,refs:an,include:hn}=jt,bn=[];if(Zt.length!==0||an.length!==0){const _n=new Set(an);for(const En of Zt){const Tn=this._fieldObjects[En]||[];for(const{id:On}of Tn)_n.add(On)}for(const En of Object.values(this._fieldObjects))for(const Tn of En)_n.has(Tn.id)===hn&&bn.push(Tn)}else for(const _n of Object.values(this._fieldObjects))bn.push(..._n);const yn=this.annotationStorage,fn=[];for(const _n of bn){const{id:En}=_n;switch(fn.push(En),_n.type){case"text":{const On=_n.defaultValue||"";yn.setValue(En,{value:On});break}case"checkbox":case"radiobutton":{const On=_n.defaultValue===_n.exportValues;yn.setValue(En,{value:On});break}case"combobox":case"listbox":{const On=_n.defaultValue||"";yn.setValue(En,{value:On});break}default:continue}const Tn=document.querySelector(`[data-element-id="${En}"]`);if(Tn){if(!et.has(Tn)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${En}`);continue}}else continue;Tn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:fn,name:"ResetForm"}})),!1}}}St=new WeakSet,Vn=function(){this.container.setAttribute("data-internal-link","")},vs=function(bt,jt){bt.href=this.linkService.getAnchorUrl(""),bt.onclick=()=>(this.linkService.executeSetOCGState(jt),!1),Nt(this,St,Vn).call(this)};class dt extends ot{constructor(At){super(At,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const At=document.createElement("img");return At.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",At.alt="[{{type}} Annotation]",At.dataset.l10nId="text_annotation_type",At.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(At),this.container}}class $ extends ot{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(At){var bt;this.data.hasOwnCanvas&&(((bt=At.previousSibling)==null?void 0:bt.nodeName)==="CANVAS"&&(At.previousSibling.hidden=!0),At.hidden=!1)}_getKeyModifier(At){const{isWin:bt,isMac:jt}=a.FeatureTest.platform;return bt&&At.ctrlKey||jt&&At.metaKey}_setEventListener(At,bt,jt,Jt,Zt){jt.includes("mouse")?At.addEventListener(jt,an=>{var hn;(hn=this.linkService.eventBus)==null||hn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Jt,value:Zt(an),shift:an.shiftKey,modifier:this._getKeyModifier(an)}})}):At.addEventListener(jt,an=>{var hn;if(jt==="blur"){if(!bt.focused||!an.relatedTarget)return;bt.focused=!1}else if(jt==="focus"){if(bt.focused)return;bt.focused=!0}Zt&&((hn=this.linkService.eventBus)==null||hn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Jt,value:Zt(an)}}))})}_setEventListeners(At,bt,jt,Jt){var Zt,an,hn;for(const[bn,yn]of jt)(yn==="Action"||(Zt=this.data.actions)!=null&&Zt[yn])&&((yn==="Focus"||yn==="Blur")&&(bt||(bt={focused:!1})),this._setEventListener(At,bt,bn,yn,Jt),yn==="Focus"&&!((an=this.data.actions)!=null&&an.Blur)?this._setEventListener(At,bt,"blur","Blur",null):yn==="Blur"&&!((hn=this.data.actions)!=null&&hn.Focus)&&this._setEventListener(At,bt,"focus","Focus",null))}_setBackgroundColor(At){const bt=this.data.backgroundColor||null;At.style.backgroundColor=bt===null?"transparent":a.Util.makeHexColor(bt[0],bt[1],bt[2])}_setTextStyle(At){const bt=["left","center","right"],{fontColor:jt}=this.data.defaultAppearanceData,Jt=this.data.defaultAppearanceData.fontSize||_,Zt=At.style;let an;const hn=2,bn=yn=>Math.round(10*yn)/10;if(this.data.multiLine){const yn=Math.abs(this.data.rect[3]-this.data.rect[1]-hn),fn=Math.round(yn/(a.LINE_FACTOR*Jt))||1,Cn=yn/fn;an=Math.min(Jt,bn(Cn/a.LINE_FACTOR))}else{const yn=Math.abs(this.data.rect[3]-this.data.rect[1]-hn);an=Math.min(Jt,bn(yn/a.LINE_FACTOR))}Zt.fontSize=`calc(${an}px * var(--scale-factor))`,Zt.color=a.Util.makeHexColor(jt[0],jt[1],jt[2]),this.data.textAlignment!==null&&(Zt.textAlign=bt[this.data.textAlignment])}_setRequired(At,bt){bt?At.setAttribute("required",!0):At.removeAttribute("required"),At.setAttribute("aria-required",bt)}}class _e extends ${constructor(At){const bt=At.renderForms||!At.data.hasAppearance&&!!At.data.fieldValue;super(At,{isRenderable:bt})}setPropertyOnSiblings(At,bt,jt,Jt){const Zt=this.annotationStorage;for(const an of this._getElementsByName(At.name,At.id))an.domElement&&(an.domElement[bt]=jt),Zt.setValue(an.id,{[Jt]:jt})}render(){var Jt,Zt;const At=this.annotationStorage,bt=this.data.id;this.container.classList.add("textWidgetAnnotation");let jt=null;if(this.renderForms){const an=At.getValue(bt,{value:this.data.fieldValue});let hn=an.value||"";const bn=At.getValue(bt,{charLimit:this.data.maxLen}).charLimit;bn&&hn.length>bn&&(hn=hn.slice(0,bn));let yn=an.formattedValue||((Jt=this.data.textContent)==null?void 0:Jt.join(`
`))||null;yn&&this.data.comb&&(yn=yn.replaceAll(/\s+/g,""));const fn={userValue:hn,formattedValue:yn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(jt=document.createElement("textarea"),jt.textContent=yn??hn,this.data.doNotScroll&&(jt.style.overflowY="hidden")):(jt=document.createElement("input"),jt.type="text",jt.setAttribute("value",yn??hn),this.data.doNotScroll&&(jt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(jt.hidden=!0),et.add(jt),jt.setAttribute("data-element-id",bt),jt.disabled=this.data.readOnly,jt.name=this.data.fieldName,jt.tabIndex=b,this._setRequired(jt,this.data.required),bn&&(jt.maxLength=bn),jt.addEventListener("input",_n=>{At.setValue(bt,{value:_n.target.value}),this.setPropertyOnSiblings(jt,"value",_n.target.value,"value"),fn.formattedValue=null}),jt.addEventListener("resetform",_n=>{const En=this.data.defaultFieldValue??"";jt.value=fn.userValue=En,fn.formattedValue=null});let Cn=_n=>{const{formattedValue:En}=fn;En!=null&&(_n.target.value=En),_n.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){jt.addEventListener("focus",En=>{if(fn.focused)return;const{target:Tn}=En;fn.userValue&&(Tn.value=fn.userValue),fn.lastCommittedValue=Tn.value,fn.commitKey=1,fn.focused=!0}),jt.addEventListener("updatefromsandbox",En=>{this.showElementAndHideCanvas(En.target);const Tn={value(On){fn.userValue=On.detail.value??"",At.setValue(bt,{value:fn.userValue.toString()}),On.target.value=fn.userValue},formattedValue(On){const{formattedValue:Dn}=On.detail;fn.formattedValue=Dn,Dn!=null&&On.target!==document.activeElement&&(On.target.value=Dn),At.setValue(bt,{formattedValue:Dn})},selRange(On){On.target.setSelectionRange(...On.detail.selRange)},charLimit:On=>{var Nn;const{charLimit:Dn}=On.detail,{target:jn}=On;if(Dn===0){jn.removeAttribute("maxLength");return}jn.setAttribute("maxLength",Dn);let $n=fn.userValue;!$n||$n.length<=Dn||($n=$n.slice(0,Dn),jn.value=fn.userValue=$n,At.setValue(bt,{value:$n}),(Nn=this.linkService.eventBus)==null||Nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bt,name:"Keystroke",value:$n,willCommit:!0,commitKey:1,selStart:jn.selectionStart,selEnd:jn.selectionEnd}}))}};this._dispatchEventFromSandbox(Tn,En)}),jt.addEventListener("keydown",En=>{var Dn;fn.commitKey=1;let Tn=-1;if(En.key==="Escape"?Tn=0:En.key==="Enter"&&!this.data.multiLine?Tn=2:En.key==="Tab"&&(fn.commitKey=3),Tn===-1)return;const{value:On}=En.target;fn.lastCommittedValue!==On&&(fn.lastCommittedValue=On,fn.userValue=On,(Dn=this.linkService.eventBus)==null||Dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bt,name:"Keystroke",value:On,willCommit:!0,commitKey:Tn,selStart:En.target.selectionStart,selEnd:En.target.selectionEnd}}))});const _n=Cn;Cn=null,jt.addEventListener("blur",En=>{var On;if(!fn.focused||!En.relatedTarget)return;fn.focused=!1;const{value:Tn}=En.target;fn.userValue=Tn,fn.lastCommittedValue!==Tn&&((On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bt,name:"Keystroke",value:Tn,willCommit:!0,commitKey:fn.commitKey,selStart:En.target.selectionStart,selEnd:En.target.selectionEnd}})),_n(En)}),(Zt=this.data.actions)!=null&&Zt.Keystroke&&jt.addEventListener("beforeinput",En=>{var Hn;fn.lastCommittedValue=null;const{data:Tn,target:On}=En,{value:Dn,selectionStart:jn,selectionEnd:$n}=On;let Nn=jn,Bn=$n;switch(En.inputType){case"deleteWordBackward":{const Wn=Dn.substring(0,jn).match(/\w*[^\w]*$/);Wn&&(Nn-=Wn[0].length);break}case"deleteWordForward":{const Wn=Dn.substring(jn).match(/^[^\w]*\w*/);Wn&&(Bn+=Wn[0].length);break}case"deleteContentBackward":jn===$n&&(Nn-=1);break;case"deleteContentForward":jn===$n&&(Bn+=1);break}En.preventDefault(),(Hn=this.linkService.eventBus)==null||Hn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bt,name:"Keystroke",value:Dn,change:Tn||"",willCommit:!1,selStart:Nn,selEnd:Bn}})}),this._setEventListeners(jt,fn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],En=>En.target.value)}if(Cn&&jt.addEventListener("blur",Cn),this.data.comb){const En=(this.data.rect[2]-this.data.rect[0])/bn;jt.classList.add("comb"),jt.style.letterSpacing=`calc(${En}px * var(--scale-factor) - 1ch)`}}else jt=document.createElement("div"),jt.textContent=this.data.fieldValue,jt.style.verticalAlign="middle",jt.style.display="table-cell";return this._setTextStyle(jt),this._setBackgroundColor(jt),this._setDefaultPropertiesFromJS(jt),this.container.append(jt),this.container}}class ct extends ${constructor(At){super(At,{isRenderable:!!At.data.hasOwnCanvas})}}class pt extends ${constructor(At){super(At,{isRenderable:At.renderForms})}render(){const At=this.annotationStorage,bt=this.data,jt=bt.id;let Jt=At.getValue(jt,{value:bt.exportValue===bt.fieldValue}).value;typeof Jt=="string"&&(Jt=Jt!=="Off",At.setValue(jt,{value:Jt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Zt=document.createElement("input");return et.add(Zt),Zt.setAttribute("data-element-id",jt),Zt.disabled=bt.readOnly,this._setRequired(Zt,this.data.required),Zt.type="checkbox",Zt.name=bt.fieldName,Jt&&Zt.setAttribute("checked",!0),Zt.setAttribute("exportValue",bt.exportValue),Zt.tabIndex=b,Zt.addEventListener("change",an=>{const{name:hn,checked:bn}=an.target;for(const yn of this._getElementsByName(hn,jt)){const fn=bn&&yn.exportValue===bt.exportValue;yn.domElement&&(yn.domElement.checked=fn),At.setValue(yn.id,{value:fn})}At.setValue(jt,{value:bn})}),Zt.addEventListener("resetform",an=>{const hn=bt.defaultFieldValue||"Off";an.target.checked=hn===bt.exportValue}),this.enableScripting&&this.hasJSActions&&(Zt.addEventListener("updatefromsandbox",an=>{const hn={value(bn){bn.target.checked=bn.detail.value!=="Off",At.setValue(jt,{value:bn.target.checked})}};this._dispatchEventFromSandbox(hn,an)}),this._setEventListeners(Zt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],an=>an.target.checked)),this._setBackgroundColor(Zt),this._setDefaultPropertiesFromJS(Zt),this.container.append(Zt),this.container}}class tt extends ${constructor(At){super(At,{isRenderable:At.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const At=this.annotationStorage,bt=this.data,jt=bt.id;let Jt=At.getValue(jt,{value:bt.fieldValue===bt.buttonValue}).value;typeof Jt=="string"&&(Jt=Jt!==bt.buttonValue,At.setValue(jt,{value:Jt}));const Zt=document.createElement("input");if(et.add(Zt),Zt.setAttribute("data-element-id",jt),Zt.disabled=bt.readOnly,this._setRequired(Zt,this.data.required),Zt.type="radio",Zt.name=bt.fieldName,Jt&&Zt.setAttribute("checked",!0),Zt.tabIndex=b,Zt.addEventListener("change",an=>{const{name:hn,checked:bn}=an.target;for(const yn of this._getElementsByName(hn,jt))At.setValue(yn.id,{value:!1});At.setValue(jt,{value:bn})}),Zt.addEventListener("resetform",an=>{const hn=bt.defaultFieldValue;an.target.checked=hn!=null&&hn===bt.buttonValue}),this.enableScripting&&this.hasJSActions){const an=bt.buttonValue;Zt.addEventListener("updatefromsandbox",hn=>{const bn={value:yn=>{const fn=an===yn.detail.value;for(const Cn of this._getElementsByName(yn.target.name)){const _n=fn&&Cn.id===jt;Cn.domElement&&(Cn.domElement.checked=_n),At.setValue(Cn.id,{value:_n})}}};this._dispatchEventFromSandbox(bn,hn)}),this._setEventListeners(Zt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],hn=>hn.target.checked)}return this._setBackgroundColor(Zt),this._setDefaultPropertiesFromJS(Zt),this.container.append(Zt),this.container}}class ut extends ht{constructor(At){super(At,{ignoreBorder:At.data.hasAppearance})}render(){const At=super.render();At.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(At.title=this.data.alternativeText);const bt=At.lastChild;return this.enableScripting&&this.hasJSActions&&bt&&(this._setDefaultPropertiesFromJS(bt),bt.addEventListener("updatefromsandbox",jt=>{this._dispatchEventFromSandbox({},jt)})),At}}class it extends ${constructor(At){super(At,{isRenderable:At.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const At=this.annotationStorage,bt=this.data.id,jt=At.getValue(bt,{value:this.data.fieldValue}),Jt=document.createElement("select");et.add(Jt),Jt.setAttribute("data-element-id",bt),Jt.disabled=this.data.readOnly,this._setRequired(Jt,this.data.required),Jt.name=this.data.fieldName,Jt.tabIndex=b;let Zt=this.data.combo&&this.data.options.length>0;this.data.combo||(Jt.size=this.data.options.length,this.data.multiSelect&&(Jt.multiple=!0)),Jt.addEventListener("resetform",fn=>{const Cn=this.data.defaultFieldValue;for(const _n of Jt.options)_n.selected=_n.value===Cn});for(const fn of this.data.options){const Cn=document.createElement("option");Cn.textContent=fn.displayValue,Cn.value=fn.exportValue,jt.value.includes(fn.exportValue)&&(Cn.setAttribute("selected",!0),Zt=!1),Jt.append(Cn)}let an=null;if(Zt){const fn=document.createElement("option");fn.value=" ",fn.setAttribute("hidden",!0),fn.setAttribute("selected",!0),Jt.prepend(fn),an=()=>{fn.remove(),Jt.removeEventListener("input",an),an=null},Jt.addEventListener("input",an)}const hn=fn=>{const Cn=fn?"value":"textContent",{options:_n,multiple:En}=Jt;return En?Array.prototype.filter.call(_n,Tn=>Tn.selected).map(Tn=>Tn[Cn]):_n.selectedIndex===-1?null:_n[_n.selectedIndex][Cn]};let bn=hn(!1);const yn=fn=>{const Cn=fn.target.options;return Array.prototype.map.call(Cn,_n=>({displayValue:_n.textContent,exportValue:_n.value}))};return this.enableScripting&&this.hasJSActions?(Jt.addEventListener("updatefromsandbox",fn=>{const Cn={value(_n){an==null||an();const En=_n.detail.value,Tn=new Set(Array.isArray(En)?En:[En]);for(const On of Jt.options)On.selected=Tn.has(On.value);At.setValue(bt,{value:hn(!0)}),bn=hn(!1)},multipleSelection(_n){Jt.multiple=!0},remove(_n){const En=Jt.options,Tn=_n.detail.remove;En[Tn].selected=!1,Jt.remove(Tn),En.length>0&&Array.prototype.findIndex.call(En,Dn=>Dn.selected)===-1&&(En[0].selected=!0),At.setValue(bt,{value:hn(!0),items:yn(_n)}),bn=hn(!1)},clear(_n){for(;Jt.length!==0;)Jt.remove(0);At.setValue(bt,{value:null,items:[]}),bn=hn(!1)},insert(_n){const{index:En,displayValue:Tn,exportValue:On}=_n.detail.insert,Dn=Jt.children[En],jn=document.createElement("option");jn.textContent=Tn,jn.value=On,Dn?Dn.before(jn):Jt.append(jn),At.setValue(bt,{value:hn(!0),items:yn(_n)}),bn=hn(!1)},items(_n){const{items:En}=_n.detail;for(;Jt.length!==0;)Jt.remove(0);for(const Tn of En){const{displayValue:On,exportValue:Dn}=Tn,jn=document.createElement("option");jn.textContent=On,jn.value=Dn,Jt.append(jn)}Jt.options.length>0&&(Jt.options[0].selected=!0),At.setValue(bt,{value:hn(!0),items:yn(_n)}),bn=hn(!1)},indices(_n){const En=new Set(_n.detail.indices);for(const Tn of _n.target.options)Tn.selected=En.has(Tn.index);At.setValue(bt,{value:hn(!0)}),bn=hn(!1)},editable(_n){_n.target.disabled=!_n.detail.editable}};this._dispatchEventFromSandbox(Cn,fn)}),Jt.addEventListener("input",fn=>{var _n;const Cn=hn(!0);At.setValue(bt,{value:Cn}),fn.preventDefault(),(_n=this.linkService.eventBus)==null||_n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bt,name:"Keystroke",value:bn,changeEx:Cn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Jt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],fn=>fn.target.value)):Jt.addEventListener("input",function(fn){At.setValue(bt,{value:hn(!0)})}),this.data.combo&&this._setTextStyle(Jt),this._setBackgroundColor(Jt),this._setDefaultPropertiesFromJS(Jt),this.container.append(Jt),this.container}}class lt extends ot{constructor(At){const{data:bt,elements:jt}=At;super(At,{isRenderable:ot._hasPopupData(bt)}),this.elements=jt}render(){this.container.classList.add("popupAnnotation");const At=new mt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),bt=[];for(const jt of this.elements)jt.popup=At,bt.push(jt.data.id),jt.addHighlightArea();return this.container.setAttribute("aria-controls",bt.map(jt=>`${a.AnnotationPrefix}${jt}`).join(",")),this.container}}class mt{constructor({container:At,color:bt,elements:jt,titleObj:Jt,modificationDate:Zt,contentsObj:an,richText:hn,parent:bn,rect:yn,parentRect:fn,open:Cn}){qt(this,un);qt(this,Kt,null);qt(this,en,Nt(this,un,ys).bind(this));qt(this,Qt,Nt(this,un,zr).bind(this));qt(this,rn,Nt(this,un,Br).bind(this));qt(this,on,Nt(this,un,dr).bind(this));qt(this,ln,null);qt(this,Wt,null);qt(this,Ht,null);qt(this,yt,null);qt(this,Ct,null);qt(this,Ut,null);qt(this,Vt,!1);qt(this,tn,null);qt(this,cn,null);qt(this,zt,null);qt(this,It,null);qt(this,dn,!1);var En;Yt(this,Wt,At),Yt(this,It,Jt),Yt(this,Ht,an),Yt(this,zt,hn),Yt(this,Ct,bn),Yt(this,ln,bt),Yt(this,cn,yn),Yt(this,Ut,fn),Yt(this,yt,jt);const _n=o.PDFDateString.toDateObject(Zt);_n&&Yt(this,Kt,bn.l10n.get("annotation_date_string",{date:_n.toLocaleDateString(),time:_n.toLocaleTimeString()})),this.trigger=jt.flatMap(Tn=>Tn.getElementsToTriggerPopup());for(const Tn of this.trigger)Tn.addEventListener("click",j(this,on)),Tn.addEventListener("mouseenter",j(this,rn)),Tn.addEventListener("mouseleave",j(this,Qt)),Tn.classList.add("popupTriggerArea");for(const Tn of jt)(En=Tn.container)==null||En.addEventListener("keydown",j(this,en));j(this,Wt).hidden=!0,Cn&&Nt(this,un,dr).call(this)}render(){if(j(this,tn))return;const{page:{view:At},viewport:{rawDims:{pageWidth:bt,pageHeight:jt,pageX:Jt,pageY:Zt}}}=j(this,Ct),an=Yt(this,tn,document.createElement("div"));if(an.className="popup",j(this,ln)){const Nn=an.style.outlineColor=a.Util.makeHexColor(...j(this,ln));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?an.style.backgroundColor=`color-mix(in srgb, ${Nn} 30%, white)`:an.style.backgroundColor=a.Util.makeHexColor(...j(this,ln).map(Hn=>Math.floor(.7*(255-Hn)+Hn)))}const hn=document.createElement("span");hn.className="header";const bn=document.createElement("h1");if(hn.append(bn),{dir:bn.dir,str:bn.textContent}=j(this,It),an.append(hn),j(this,Kt)){const Nn=document.createElement("span");Nn.classList.add("popupDate"),j(this,Kt).then(Bn=>{Nn.textContent=Bn}),hn.append(Nn)}const yn=j(this,Ht),fn=j(this,zt);if(fn!=null&&fn.str&&(!(yn!=null&&yn.str)||yn.str===fn.str))h.XfaLayer.render({xfaHtml:fn.html,intent:"richText",div:an}),an.lastChild.classList.add("richText","popupContent");else{const Nn=this._formatContents(yn);an.append(Nn)}let Cn=!!j(this,Ut),_n=Cn?j(this,Ut):j(this,cn);for(const Nn of j(this,yt))if(!_n||a.Util.intersect(Nn.data.rect,_n)!==null){_n=Nn.data.rect,Cn=!0;break}const En=a.Util.normalizeRect([_n[0],At[3]-_n[1]+At[1],_n[2],At[3]-_n[3]+At[1]]),On=Cn?_n[2]-_n[0]+5:0,Dn=En[0]+On,jn=En[1],{style:$n}=j(this,Wt);$n.left=`${100*(Dn-Jt)/bt}%`,$n.top=`${100*(jn-Zt)/jt}%`,j(this,Wt).append(an)}_formatContents({str:At,dir:bt}){const jt=document.createElement("p");jt.classList.add("popupContent"),jt.dir=bt;const Jt=At.split(/(?:\r\n?|\n)/);for(let Zt=0,an=Jt.length;Zt<an;++Zt){const hn=Jt[Zt];jt.append(document.createTextNode(hn)),Zt<an-1&&jt.append(document.createElement("br"))}return jt}forceHide(){Yt(this,dn,this.isVisible),j(this,dn)&&(j(this,Wt).hidden=!0)}maybeShow(){j(this,dn)&&(Yt(this,dn,!1),j(this,Wt).hidden=!1)}get isVisible(){return j(this,Wt).hidden===!1}}Kt=new WeakMap,en=new WeakMap,Qt=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,yt=new WeakMap,Ct=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,tn=new WeakMap,cn=new WeakMap,zt=new WeakMap,It=new WeakMap,dn=new WeakMap,un=new WeakSet,ys=function(At){At.altKey||At.shiftKey||At.ctrlKey||At.metaKey||(At.key==="Enter"||At.key==="Escape"&&j(this,Vt))&&Nt(this,un,dr).call(this)},dr=function(){Yt(this,Vt,!j(this,Vt)),j(this,Vt)?(Nt(this,un,Br).call(this),j(this,Wt).addEventListener("click",j(this,on)),j(this,Wt).addEventListener("keydown",j(this,en))):(Nt(this,un,zr).call(this),j(this,Wt).removeEventListener("click",j(this,on)),j(this,Wt).removeEventListener("keydown",j(this,en)))},Br=function(){j(this,tn)||this.render(),this.isVisible?j(this,Vt)&&j(this,Wt).classList.add("focused"):(j(this,Wt).hidden=!1,j(this,Wt).style.zIndex=parseInt(j(this,Wt).style.zIndex)+1e3)},zr=function(){j(this,Wt).classList.remove("focused"),!(j(this,Vt)||!this.isVisible)&&(j(this,Wt).hidden=!0,j(this,Wt).style.zIndex=parseInt(j(this,Wt).style.zIndex)-1e3)};class Et extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0}),this.textContent=At.data.textContent,this.textPosition=At.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const At=document.createElement("div");At.classList.add("annotationTextContent"),At.setAttribute("role","comment");for(const bt of this.textContent){const jt=document.createElement("span");jt.textContent=bt,At.append(jt)}this.container.append(At)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}i.FreeTextAnnotationElement=Et;class ft extends ot{constructor(bt){super(bt,{isRenderable:!0,ignoreBorder:!0});qt(this,wn,null)}render(){this.container.classList.add("lineAnnotation");const bt=this.data,{width:jt,height:Jt}=nt(bt.rect),Zt=this.svgFactory.create(jt,Jt,!0),an=Yt(this,wn,this.svgFactory.createElement("svg:line"));return an.setAttribute("x1",bt.rect[2]-bt.lineCoordinates[0]),an.setAttribute("y1",bt.rect[3]-bt.lineCoordinates[1]),an.setAttribute("x2",bt.rect[2]-bt.lineCoordinates[2]),an.setAttribute("y2",bt.rect[3]-bt.lineCoordinates[3]),an.setAttribute("stroke-width",bt.borderStyle.width||1),an.setAttribute("stroke","transparent"),an.setAttribute("fill","transparent"),Zt.append(an),this.container.append(Zt),!bt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return j(this,wn)}addHighlightArea(){this.container.classList.add("highlightArea")}}wn=new WeakMap;class xt extends ot{constructor(bt){super(bt,{isRenderable:!0,ignoreBorder:!0});qt(this,Rn,null)}render(){this.container.classList.add("squareAnnotation");const bt=this.data,{width:jt,height:Jt}=nt(bt.rect),Zt=this.svgFactory.create(jt,Jt,!0),an=bt.borderStyle.width,hn=Yt(this,Rn,this.svgFactory.createElement("svg:rect"));return hn.setAttribute("x",an/2),hn.setAttribute("y",an/2),hn.setAttribute("width",jt-an),hn.setAttribute("height",Jt-an),hn.setAttribute("stroke-width",an||1),hn.setAttribute("stroke","transparent"),hn.setAttribute("fill","transparent"),Zt.append(hn),this.container.append(Zt),!bt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return j(this,Rn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rn=new WeakMap;class kt extends ot{constructor(bt){super(bt,{isRenderable:!0,ignoreBorder:!0});qt(this,Mn,null)}render(){this.container.classList.add("circleAnnotation");const bt=this.data,{width:jt,height:Jt}=nt(bt.rect),Zt=this.svgFactory.create(jt,Jt,!0),an=bt.borderStyle.width,hn=Yt(this,Mn,this.svgFactory.createElement("svg:ellipse"));return hn.setAttribute("cx",jt/2),hn.setAttribute("cy",Jt/2),hn.setAttribute("rx",jt/2-an/2),hn.setAttribute("ry",Jt/2-an/2),hn.setAttribute("stroke-width",an||1),hn.setAttribute("stroke","transparent"),hn.setAttribute("fill","transparent"),Zt.append(hn),this.container.append(Zt),!bt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return j(this,Mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mn=new WeakMap;class Dt extends ot{constructor(bt){super(bt,{isRenderable:!0,ignoreBorder:!0});qt(this,sn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const bt=this.data,{width:jt,height:Jt}=nt(bt.rect),Zt=this.svgFactory.create(jt,Jt,!0);let an=[];for(const bn of bt.vertices){const yn=bn.x-bt.rect[0],fn=bt.rect[3]-bn.y;an.push(yn+","+fn)}an=an.join(" ");const hn=Yt(this,sn,this.svgFactory.createElement(this.svgElementName));return hn.setAttribute("points",an),hn.setAttribute("stroke-width",bt.borderStyle.width||1),hn.setAttribute("stroke","transparent"),hn.setAttribute("fill","transparent"),Zt.append(hn),this.container.append(Zt),!bt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return j(this,sn)}addHighlightArea(){this.container.classList.add("highlightArea")}}sn=new WeakMap;class Ot extends Dt{constructor(At){super(At),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bt extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ft extends ot{constructor(bt){super(bt,{isRenderable:!0,ignoreBorder:!0});qt(this,Gt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const bt=this.data,{width:jt,height:Jt}=nt(bt.rect),Zt=this.svgFactory.create(jt,Jt,!0);for(const an of bt.inkLists){let hn=[];for(const yn of an){const fn=yn.x-bt.rect[0],Cn=bt.rect[3]-yn.y;hn.push(`${fn},${Cn}`)}hn=hn.join(" ");const bn=this.svgFactory.createElement(this.svgElementName);j(this,Gt).push(bn),bn.setAttribute("points",hn),bn.setAttribute("stroke-width",bt.borderStyle.width||1),bn.setAttribute("stroke","transparent"),bn.setAttribute("fill","transparent"),!bt.popupRef&&this.hasPopupData&&this._createPopup(),Zt.append(bn)}return this.container.append(Zt),this.container}getElementsToTriggerPopup(){return j(this,Gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gt=new WeakMap,i.InkAnnotationElement=Ft;class Mt extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class vt extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Rt extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class $t extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _t extends ot{constructor(At){super(At,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}i.StampAnnotationElement=_t;class rt extends ot{constructor(bt){var Zt;super(bt,{isRenderable:!0});qt(this,mn);qt(this,Xt,null);const{filename:jt,content:Jt}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(jt,!0),this.content=Jt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("fileattachmentannotation",{source:this,filename:jt,content:Jt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:bt,data:jt}=this;let Jt;jt.hasAppearance||jt.fillAlpha===0?Jt=document.createElement("div"):(Jt=document.createElement("img"),Jt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(jt.name)?"paperclip":"pushpin"}.svg`,jt.fillAlpha&&jt.fillAlpha<1&&(Jt.style=`filter: opacity(${Math.round(jt.fillAlpha*100)}%);`)),Jt.addEventListener("dblclick",Nt(this,mn,Hr).bind(this)),Yt(this,Xt,Jt);const{isMac:Zt}=a.FeatureTest.platform;return bt.addEventListener("keydown",an=>{an.key==="Enter"&&(Zt?an.metaKey:an.ctrlKey)&&Nt(this,mn,Hr).call(this)}),!jt.popupRef&&this.hasPopupData?this._createPopup():Jt.classList.add("popupTriggerArea"),bt.append(Jt),bt}getElementsToTriggerPopup(){return j(this,Xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xt=new WeakMap,mn=new WeakSet,Hr=function(){var bt;(bt=this.downloadManager)==null||bt.openOrDownloadData(this.container,this.content,this.filename)};class at{constructor({div:At,accessibilityManager:bt,annotationCanvasMap:jt,l10n:Jt,page:Zt,viewport:an}){qt(this,pn);qt(this,Fn,null);qt(this,Pt,null);qt(this,nn,new Map);this.div=At,Yt(this,Fn,bt),Yt(this,Pt,jt),this.l10n=Jt,this.page=Zt,this.viewport=an,this.zIndex=0,this.l10n||(this.l10n=g.NullL10n)}async render(At){const{annotations:bt}=At,jt=this.div;(0,o.setLayerDimensions)(jt,this.viewport);const Jt=new Map,Zt={data:null,layer:jt,linkService:At.linkService,downloadManager:At.downloadManager,imageResourcesPath:At.imageResourcesPath||"",renderForms:At.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:At.annotationStorage||new c.AnnotationStorage,enableScripting:At.enableScripting===!0,hasJSActions:At.hasJSActions,fieldObjects:At.fieldObjects,parent:this,elements:null};for(const an of bt){if(an.noHTML)continue;const hn=an.annotationType===a.AnnotationType.POPUP;if(hn){const fn=Jt.get(an.id);if(!fn)continue;Zt.elements=fn}else{const{width:fn,height:Cn}=nt(an.rect);if(fn<=0||Cn<=0)continue}Zt.data=an;const bn=st.create(Zt);if(!bn.isRenderable)continue;if(!hn&&an.popupRef){const fn=Jt.get(an.popupRef);fn?fn.push(bn):Jt.set(an.popupRef,[bn])}bn.annotationEditorType>0&&j(this,nn).set(bn.data.id,bn);const yn=bn.render();an.hidden&&(yn.style.visibility="hidden"),Nt(this,pn,_s).call(this,yn,an.id)}Nt(this,pn,Wr).call(this),await this.l10n.translate(jt)}update({viewport:At}){const bt=this.div;this.viewport=At,(0,o.setLayerDimensions)(bt,{rotation:At.rotation}),Nt(this,pn,Wr).call(this),bt.hidden=!1}getEditableAnnotations(){return Array.from(j(this,nn).values())}getEditableAnnotation(At){return j(this,nn).get(At)}}Fn=new WeakMap,Pt=new WeakMap,nn=new WeakMap,pn=new WeakSet,_s=function(At,bt){var Jt;const jt=At.firstChild||At;jt.id=`${a.AnnotationPrefix}${bt}`,this.div.append(At),(Jt=j(this,Fn))==null||Jt.moveElementInDOM(this.div,At,jt,!1)},Wr=function(){if(!j(this,Pt))return;const At=this.div;for(const[bt,jt]of j(this,Pt)){const Jt=At.querySelector(`[data-annotation-id="${bt}"]`);if(!Jt)continue;const{firstChild:Zt}=Jt;Zt?Zt.nodeName==="CANVAS"?Zt.replaceWith(jt):Zt.before(jt):Jt.append(jt)}j(this,Pt).clear()},i.AnnotationLayer=at},(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function s(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function a(c){return Math.max(0,Math.min(255,255*c))}class o{static CMYK_G([d,g,h,b]){return["G",1-Math.min(1,.3*d+.59*h+.11*g+b)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=a(d),[d,d,d]}static G_HTML([d]){const g=s(d);return`#${g}${g}${g}`}static RGB_G([d,g,h]){return["G",.3*d+.59*g+.11*h]}static RGB_rgb(d){return d.map(a)}static RGB_HTML(d){return`#${d.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,g,h,b]){return["RGB",1-Math.min(1,d+b),1-Math.min(1,h+b),1-Math.min(1,g+b)]}static CMYK_rgb([d,g,h,b]){return[a(1-Math.min(1,d+b)),a(1-Math.min(1,h+b)),a(1-Math.min(1,g+b))]}static CMYK_HTML(d){const g=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(g)}static RGB_CMYK([d,g,h]){const b=1-d,_=1-g,et=1-h,nt=Math.min(b,_,et);return["CMYK",b,_,et,nt]}}i.ColorConverters=o},(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NullL10n=void 0,i.getL10nFallback=a;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function a(d,g){switch(d){case"find_match_count":d=`find_match_count[${g.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${g.limit===1?"one":"other"}]`;break}return s[d]||""}function o(d,g){return g?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,b)=>b in g?g[b]:"{{"+b+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,g=null,h=a(d,g)){return o(h,g)},async translate(d){}};i.NullL10n=c},(e,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var a=s(25);class o{static setupStorage(d,g,h,b,_){const et=b.getValue(g,{value:null});switch(h.name){case"textarea":if(et.value!==null&&(d.textContent=et.value),_==="print")break;d.addEventListener("input",nt=>{b.setValue(g,{value:nt.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(et.value===h.attributes.xfaOn?d.setAttribute("checked",!0):et.value===h.attributes.xfaOff&&d.removeAttribute("checked"),_==="print")break;d.addEventListener("change",nt=>{b.setValue(g,{value:nt.target.checked?nt.target.getAttribute("xfaOn"):nt.target.getAttribute("xfaOff")})})}else{if(et.value!==null&&d.setAttribute("value",et.value),_==="print")break;d.addEventListener("input",nt=>{b.setValue(g,{value:nt.target.value})})}break;case"select":if(et.value!==null){d.setAttribute("value",et.value);for(const nt of h.children)nt.attributes.value===et.value?nt.attributes.selected=!0:nt.attributes.hasOwnProperty("selected")&&delete nt.attributes.selected}d.addEventListener("input",nt=>{const st=nt.target.options,ot=st.selectedIndex===-1?"":st[st.selectedIndex].value;b.setValue(g,{value:ot})});break}}static setAttributes({html:d,element:g,storage:h=null,intent:b,linkService:_}){const{attributes:et}=g,nt=d instanceof HTMLAnchorElement;et.type==="radio"&&(et.name=`${et.name}-${b}`);for(const[st,ot]of Object.entries(et))if(ot!=null)switch(st){case"class":ot.length&&d.setAttribute(st,ot.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",ot);break;case"style":Object.assign(d.style,ot);break;case"textContent":d.textContent=ot;break;default:(!nt||st!=="href"&&st!=="newWindow")&&d.setAttribute(st,ot)}nt&&_.addLinkAttributes(d,et.href,et.newWindow),h&&et.dataId&&this.setupStorage(d,et.dataId,g,h)}static render(d){var ht;const g=d.annotationStorage,h=d.linkService,b=d.xfaHtml,_=d.intent||"display",et=document.createElement(b.name);b.attributes&&this.setAttributes({html:et,element:b,intent:_,linkService:h});const nt=[[b,-1,et]],st=d.div;if(st.append(et),d.viewport){const dt=`matrix(${d.viewport.transform.join(",")})`;st.style.transform=dt}_!=="richText"&&st.setAttribute("class","xfaLayer xfaFont");const ot=[];for(;nt.length>0;){const[dt,$,_e]=nt.at(-1);if($+1===dt.children.length){nt.pop();continue}const ct=dt.children[++nt.at(-1)[1]];if(ct===null)continue;const{name:pt}=ct;if(pt==="#text"){const ut=document.createTextNode(ct.value);ot.push(ut),_e.append(ut);continue}const tt=(ht=ct==null?void 0:ct.attributes)!=null&&ht.xmlns?document.createElementNS(ct.attributes.xmlns,pt):document.createElement(pt);if(_e.append(tt),ct.attributes&&this.setAttributes({html:tt,element:ct,storage:g,intent:_,linkService:h}),ct.children&&ct.children.length>0)nt.push([ct,-1,tt]);else if(ct.value){const ut=document.createTextNode(ct.value);a.XfaText.shouldBuildText(pt)&&ot.push(ut),tt.append(ut)}}for(const dt of st.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))dt.setAttribute("readOnly",!0);return{textDivs:ot}}static update(d){const g=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=g,d.div.hidden=!1}}i.XfaLayer=o},(e,i,s)=>{var b,_,et,nt,st,ot,ht,dt,$,_e,ct,pt,tt,ut,it,xs,bs,Es,ws,Vr,As,Gr,Ss,ks,Ts,Cs,Ps,zn,qr,hr,pr,Xn,Kr,fr,St,Rs,Xr,Os,Is,Yr,mr,Yn;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0;var a=s(1),o=s(4),c=s(29),d=s(6),g=s(5);const ln=class ln extends o.AnnotationEditor{constructor(yt){super({...yt,name:"inkEditor"});qt(this,it);qt(this,b,0);qt(this,_,0);qt(this,et,this.canvasPointermove.bind(this));qt(this,nt,this.canvasPointerleave.bind(this));qt(this,st,this.canvasPointerup.bind(this));qt(this,ot,this.canvasPointerdown.bind(this));qt(this,ht,new Path2D);qt(this,dt,!1);qt(this,$,!1);qt(this,_e,!1);qt(this,ct,null);qt(this,pt,0);qt(this,tt,0);qt(this,ut,null);this.color=yt.color||null,this.thickness=yt.thickness||null,this.opacity=yt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(yt){o.AnnotationEditor.initialize(yt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(yt,Ct){switch(yt){case a.AnnotationEditorParamsType.INK_THICKNESS:ln._defaultThickness=Ct;break;case a.AnnotationEditorParamsType.INK_COLOR:ln._defaultColor=Ct;break;case a.AnnotationEditorParamsType.INK_OPACITY:ln._defaultOpacity=Ct/100;break}}updateParams(yt,Ct){switch(yt){case a.AnnotationEditorParamsType.INK_THICKNESS:Nt(this,it,xs).call(this,Ct);break;case a.AnnotationEditorParamsType.INK_COLOR:Nt(this,it,bs).call(this,Ct);break;case a.AnnotationEditorParamsType.INK_OPACITY:Nt(this,it,Es).call(this,Ct);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,ln._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,ln._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(ln._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ln._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||ln._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ln._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Nt(this,it,hr).call(this),Nt(this,it,pr).call(this)),this.isAttachedToDOM||(this.parent.add(this),Nt(this,it,Xn).call(this)),Nt(this,it,Yn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,j(this,ct).disconnect(),Yt(this,ct,null),super.remove())}setParent(yt){!this.parent&&yt?this._uiManager.removeShouldRescale(this):this.parent&&yt===null&&this._uiManager.addShouldRescale(this),super.setParent(yt)}onScaleChanging(){const[yt,Ct]=this.parentDimensions,Ut=this.width*yt,Vt=this.height*Ct;this.setDimensions(Ut,Vt)}enableEditMode(){j(this,dt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",j(this,ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",j(this,ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){j(this,dt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Yt(this,dt,!0),this.div.classList.add("disabled"),Nt(this,it,Yn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(yt){this._focusEventsAllowed&&(super.focusin(yt),this.enableEditMode())}canvasPointerdown(yt){yt.button!==0||!this.isInEditMode()||j(this,dt)||(this.setInForeground(),yt.preventDefault(),yt.type!=="mouse"&&this.div.focus(),Nt(this,it,As).call(this,yt.offsetX,yt.offsetY))}canvasPointermove(yt){yt.preventDefault(),Nt(this,it,Gr).call(this,yt.offsetX,yt.offsetY)}canvasPointerup(yt){yt.preventDefault(),Nt(this,it,qr).call(this,yt)}canvasPointerleave(yt){Nt(this,it,qr).call(this,yt)}get isResizable(){return!this.isEmpty()&&j(this,dt)}render(){if(this.div)return this.div;let yt,Ct;this.width&&(yt=this.x,Ct=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(zt=>{var It;return(It=this.div)==null?void 0:It.setAttribute("aria-label",zt)});const[Ut,Vt,tn,cn]=Nt(this,it,ws).call(this);if(this.setAt(Ut,Vt,0,0),this.setDims(tn,cn),Nt(this,it,hr).call(this),this.width){const[zt,It]=this.parentDimensions;this.setAspectRatio(this.width*zt,this.height*It),this.setAt(yt*zt,Ct*It,this.width*zt,this.height*It),Yt(this,_e,!0),Nt(this,it,Xn).call(this),this.setDims(this.width*zt,this.height*It),Nt(this,it,zn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Nt(this,it,pr).call(this),this.div}setDimensions(yt,Ct){const Ut=Math.round(yt),Vt=Math.round(Ct);if(j(this,pt)===Ut&&j(this,tt)===Vt)return;Yt(this,pt,Ut),Yt(this,tt,Vt),this.canvas.style.visibility="hidden";const[tn,cn]=this.parentDimensions;this.width=yt/tn,this.height=Ct/cn,this.fixAndSetPosition(),j(this,dt)&&Nt(this,it,Kr).call(this,yt,Ct),Nt(this,it,Xn).call(this),Nt(this,it,zn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(yt,Ct,Ut){var wn,Rn,Mn;if(yt instanceof c.InkAnnotationElement)return null;const Vt=super.deserialize(yt,Ct,Ut);Vt.thickness=yt.thickness,Vt.color=a.Util.makeHexColor(...yt.color),Vt.opacity=yt.opacity;const[tn,cn]=Vt.pageDimensions,zt=Vt.width*tn,It=Vt.height*cn,dn=Vt.parentScale,un=yt.thickness/2;Yt(Vt,dt,!0),Yt(Vt,pt,Math.round(zt)),Yt(Vt,tt,Math.round(It));const{paths:Sn,rect:kn,rotation:Pn}=yt;for(let{bezier:sn}of Sn){sn=Nt(wn=ln,St,Os).call(wn,sn,kn,Pn);const Gt=[];Vt.paths.push(Gt);let Xt=dn*(sn[0]-un),mn=dn*(sn[1]-un);for(let Fn=2,Pt=sn.length;Fn<Pt;Fn+=6){const nn=dn*(sn[Fn]-un),pn=dn*(sn[Fn+1]-un),xn=dn*(sn[Fn+2]-un),An=dn*(sn[Fn+3]-un),gn=dn*(sn[Fn+4]-un),At=dn*(sn[Fn+5]-un);Gt.push([[Xt,mn],[nn,pn],[xn,An],[gn,At]]),Xt=gn,mn=At}const In=Nt(this,St,Rs).call(this,Gt);Vt.bezierPath2D.push(In)}const vn=Nt(Rn=Vt,it,Yr).call(Rn);return Yt(Vt,_,Math.max(o.AnnotationEditor.MIN_SIZE,vn[2]-vn[0])),Yt(Vt,b,Math.max(o.AnnotationEditor.MIN_SIZE,vn[3]-vn[1])),Nt(Mn=Vt,it,Kr).call(Mn,zt,It),Vt}serialize(){if(this.isEmpty())return null;const yt=this.getRect(0,0),Ct=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Ct,thickness:this.thickness,opacity:this.opacity,paths:Nt(this,it,Is).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,yt),pageIndex:this.pageIndex,rect:yt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};b=new WeakMap,_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,pt=new WeakMap,tt=new WeakMap,ut=new WeakMap,it=new WeakSet,xs=function(yt){const Ct=this.thickness;this.addCommands({cmd:()=>{this.thickness=yt,Nt(this,it,Yn).call(this)},undo:()=>{this.thickness=Ct,Nt(this,it,Yn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},bs=function(yt){const Ct=this.color;this.addCommands({cmd:()=>{this.color=yt,Nt(this,it,zn).call(this)},undo:()=>{this.color=Ct,Nt(this,it,zn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Es=function(yt){yt/=100;const Ct=this.opacity;this.addCommands({cmd:()=>{this.opacity=yt,Nt(this,it,zn).call(this)},undo:()=>{this.opacity=Ct,Nt(this,it,zn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ws=function(){const{parentRotation:yt,parentDimensions:[Ct,Ut]}=this;switch(yt){case 90:return[0,Ut,Ut,Ct];case 180:return[Ct,Ut,Ct,Ut];case 270:return[Ct,0,Ut,Ct];default:return[0,0,Ct,Ut]}},Vr=function(){const{ctx:yt,color:Ct,opacity:Ut,thickness:Vt,parentScale:tn,scaleFactor:cn}=this;yt.lineWidth=Vt*tn/cn,yt.lineCap="round",yt.lineJoin="round",yt.miterLimit=10,yt.strokeStyle=`${Ct}${(0,g.opacityToHex)(Ut)}`},As=function(yt,Ct){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",j(this,nt)),this.canvas.addEventListener("pointermove",j(this,et)),this.canvas.addEventListener("pointerup",j(this,st)),this.canvas.removeEventListener("pointerdown",j(this,ot)),this.isEditing=!0,j(this,_e)||(Yt(this,_e,!0),Nt(this,it,Xn).call(this),this.thickness||(this.thickness=ln._defaultThickness),this.color||(this.color=ln._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ln._defaultOpacity)),this.currentPath.push([yt,Ct]),Yt(this,$,!1),Nt(this,it,Vr).call(this),Yt(this,ut,()=>{Nt(this,it,Ts).call(this),j(this,ut)&&window.requestAnimationFrame(j(this,ut))}),window.requestAnimationFrame(j(this,ut))},Gr=function(yt,Ct){const[Ut,Vt]=this.currentPath.at(-1);if(this.currentPath.length>1&&yt===Ut&&Ct===Vt)return;const tn=this.currentPath;let cn=j(this,ht);if(tn.push([yt,Ct]),Yt(this,$,!0),tn.length<=2){cn.moveTo(...tn[0]),cn.lineTo(yt,Ct);return}tn.length===3&&(Yt(this,ht,cn=new Path2D),cn.moveTo(...tn[0])),Nt(this,it,Cs).call(this,cn,...tn.at(-3),...tn.at(-2),yt,Ct)},Ss=function(){if(this.currentPath.length===0)return;const yt=this.currentPath.at(-1);j(this,ht).lineTo(...yt)},ks=function(yt,Ct){Yt(this,ut,null),yt=Math.min(Math.max(yt,0),this.canvas.width),Ct=Math.min(Math.max(Ct,0),this.canvas.height),Nt(this,it,Gr).call(this,yt,Ct),Nt(this,it,Ss).call(this);let Ut;if(this.currentPath.length!==1)Ut=Nt(this,it,Ps).call(this);else{const It=[yt,Ct];Ut=[[It,It.slice(),It.slice(),It]]}const Vt=j(this,ht),tn=this.currentPath;this.currentPath=[],Yt(this,ht,new Path2D);const cn=()=>{this.allRawPaths.push(tn),this.paths.push(Ut),this.bezierPath2D.push(Vt),this.rebuild()},zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Nt(this,it,hr).call(this),Nt(this,it,pr).call(this)),Nt(this,it,Yn).call(this))};this.addCommands({cmd:cn,undo:zt,mustExec:!0})},Ts=function(){if(!j(this,$))return;Yt(this,$,!1);const yt=Math.ceil(this.thickness*this.parentScale),Ct=this.currentPath.slice(-3),Ut=Ct.map(cn=>cn[0]),Vt=Ct.map(cn=>cn[1]);Math.min(...Ut)-yt,Math.max(...Ut)+yt,Math.min(...Vt)-yt,Math.max(...Vt)+yt;const{ctx:tn}=this;tn.save(),tn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const cn of this.bezierPath2D)tn.stroke(cn);tn.stroke(j(this,ht)),tn.restore()},Cs=function(yt,Ct,Ut,Vt,tn,cn,zt){const It=(Ct+Vt)/2,dn=(Ut+tn)/2,un=(Vt+cn)/2,Sn=(tn+zt)/2;yt.bezierCurveTo(It+2*(Vt-It)/3,dn+2*(tn-dn)/3,un+2*(Vt-un)/3,Sn+2*(tn-Sn)/3,un,Sn)},Ps=function(){const yt=this.currentPath;if(yt.length<=2)return[[yt[0],yt[0],yt.at(-1),yt.at(-1)]];const Ct=[];let Ut,[Vt,tn]=yt[0];for(Ut=1;Ut<yt.length-2;Ut++){const[kn,Pn]=yt[Ut],[vn,wn]=yt[Ut+1],Rn=(kn+vn)/2,Mn=(Pn+wn)/2,sn=[Vt+2*(kn-Vt)/3,tn+2*(Pn-tn)/3],Gt=[Rn+2*(kn-Rn)/3,Mn+2*(Pn-Mn)/3];Ct.push([[Vt,tn],sn,Gt,[Rn,Mn]]),[Vt,tn]=[Rn,Mn]}const[cn,zt]=yt[Ut],[It,dn]=yt[Ut+1],un=[Vt+2*(cn-Vt)/3,tn+2*(zt-tn)/3],Sn=[It+2*(cn-It)/3,dn+2*(zt-dn)/3];return Ct.push([[Vt,tn],un,Sn,[It,dn]]),Ct},zn=function(){if(this.isEmpty()){Nt(this,it,fr).call(this);return}Nt(this,it,Vr).call(this);const{canvas:yt,ctx:Ct}=this;Ct.setTransform(1,0,0,1,0,0),Ct.clearRect(0,0,yt.width,yt.height),Nt(this,it,fr).call(this);for(const Ut of this.bezierPath2D)Ct.stroke(Ut)},qr=function(yt){this.canvas.removeEventListener("pointerleave",j(this,nt)),this.canvas.removeEventListener("pointermove",j(this,et)),this.canvas.removeEventListener("pointerup",j(this,st)),this.canvas.addEventListener("pointerdown",j(this,ot)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),Nt(this,it,ks).call(this,yt.offsetX,yt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},hr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(yt=>{var Ct;return(Ct=this.canvas)==null?void 0:Ct.setAttribute("aria-label",yt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},pr=function(){Yt(this,ct,new ResizeObserver(yt=>{const Ct=yt[0].contentRect;Ct.width&&Ct.height&&this.setDimensions(Ct.width,Ct.height)})),j(this,ct).observe(this.div)},Xn=function(){if(!j(this,_e))return;const[yt,Ct]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*yt),this.canvas.height=Math.ceil(this.height*Ct),Nt(this,it,fr).call(this)},Kr=function(yt,Ct){const Ut=Nt(this,it,mr).call(this),Vt=(yt-Ut)/j(this,_),tn=(Ct-Ut)/j(this,b);this.scaleFactor=Math.min(Vt,tn)},fr=function(){const yt=Nt(this,it,mr).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+yt,this.translationY*this.scaleFactor+yt)},St=new WeakSet,Rs=function(yt){const Ct=new Path2D;for(let Ut=0,Vt=yt.length;Ut<Vt;Ut++){const[tn,cn,zt,It]=yt[Ut];Ut===0&&Ct.moveTo(...tn),Ct.bezierCurveTo(cn[0],cn[1],zt[0],zt[1],It[0],It[1])}return Ct},Xr=function(yt,Ct,Ut){const[Vt,tn,cn,zt]=Ct;switch(Ut){case 0:for(let It=0,dn=yt.length;It<dn;It+=2)yt[It]+=Vt,yt[It+1]=zt-yt[It+1];break;case 90:for(let It=0,dn=yt.length;It<dn;It+=2){const un=yt[It];yt[It]=yt[It+1]+Vt,yt[It+1]=un+tn}break;case 180:for(let It=0,dn=yt.length;It<dn;It+=2)yt[It]=cn-yt[It],yt[It+1]+=tn;break;case 270:for(let It=0,dn=yt.length;It<dn;It+=2){const un=yt[It];yt[It]=cn-yt[It+1],yt[It+1]=zt-un}break;default:throw new Error("Invalid rotation")}return yt},Os=function(yt,Ct,Ut){const[Vt,tn,cn,zt]=Ct;switch(Ut){case 0:for(let It=0,dn=yt.length;It<dn;It+=2)yt[It]-=Vt,yt[It+1]=zt-yt[It+1];break;case 90:for(let It=0,dn=yt.length;It<dn;It+=2){const un=yt[It];yt[It]=yt[It+1]-tn,yt[It+1]=un-Vt}break;case 180:for(let It=0,dn=yt.length;It<dn;It+=2)yt[It]=cn-yt[It],yt[It+1]-=tn;break;case 270:for(let It=0,dn=yt.length;It<dn;It+=2){const un=yt[It];yt[It]=zt-yt[It+1],yt[It+1]=cn-un}break;default:throw new Error("Invalid rotation")}return yt},Is=function(yt,Ct,Ut,Vt){var dn,un;const tn=[],cn=this.thickness/2,zt=yt*Ct+cn,It=yt*Ut+cn;for(const Sn of this.paths){const kn=[],Pn=[];for(let vn=0,wn=Sn.length;vn<wn;vn++){const[Rn,Mn,sn,Gt]=Sn[vn],Xt=yt*Rn[0]+zt,mn=yt*Rn[1]+It,In=yt*Mn[0]+zt,Fn=yt*Mn[1]+It,Pt=yt*sn[0]+zt,nn=yt*sn[1]+It,pn=yt*Gt[0]+zt,xn=yt*Gt[1]+It;vn===0&&(kn.push(Xt,mn),Pn.push(Xt,mn)),kn.push(In,Fn,Pt,nn,pn,xn),Pn.push(In,Fn),vn===wn-1&&Pn.push(pn,xn)}tn.push({bezier:Nt(dn=ln,St,Xr).call(dn,kn,Vt,this.rotation),points:Nt(un=ln,St,Xr).call(un,Pn,Vt,this.rotation)})}return tn},Yr=function(){let yt=1/0,Ct=-1/0,Ut=1/0,Vt=-1/0;for(const tn of this.paths)for(const[cn,zt,It,dn]of tn){const un=a.Util.bezierBoundingBox(...cn,...zt,...It,...dn);yt=Math.min(yt,un[0]),Ut=Math.min(Ut,un[1]),Ct=Math.max(Ct,un[2]),Vt=Math.max(Vt,un[3])}return[yt,Ut,Ct,Vt]},mr=function(){return j(this,dt)?Math.ceil(this.thickness*this.parentScale):0},Yn=function(yt=!1){if(this.isEmpty())return;if(!j(this,dt)){Nt(this,it,zn).call(this);return}const Ct=Nt(this,it,Yr).call(this),Ut=Nt(this,it,mr).call(this);Yt(this,_,Math.max(o.AnnotationEditor.MIN_SIZE,Ct[2]-Ct[0])),Yt(this,b,Math.max(o.AnnotationEditor.MIN_SIZE,Ct[3]-Ct[1]));const Vt=Math.ceil(Ut+j(this,_)*this.scaleFactor),tn=Math.ceil(Ut+j(this,b)*this.scaleFactor),[cn,zt]=this.parentDimensions;this.width=Vt/cn,this.height=tn/zt,this.setAspectRatio(Vt,tn);const It=this.translationX,dn=this.translationY;this.translationX=-Ct[0],this.translationY=-Ct[1],Nt(this,it,Xn).call(this),Nt(this,it,zn).call(this),Yt(this,pt,Vt),Yt(this,tt,tn),this.setDims(Vt,tn);const un=yt?Ut/this.scaleFactor/2:0;this.translate(It-this.translationX-un,dn-this.translationY-un)},qt(ln,St),Ln(ln,"_defaultColor",null),Ln(ln,"_defaultOpacity",1),Ln(ln,"_defaultThickness",1),Ln(ln,"_type","ink");let h=ln;i.InkEditor=h},(e,i,s)=>{var h,b,_,et,nt,st,ot,ht,dt,$,_e,nr,ir,gr,Jr,Fs,Ms,Qr,vr,Ds;Object.defineProperty(i,"__esModule",{value:!0}),i.StampEditor=void 0;var a=s(1),o=s(4),c=s(6),d=s(29);const xt=class xt extends o.AnnotationEditor{constructor(Ot){super({...Ot,name:"stampEditor"});qt(this,_e);qt(this,h,null);qt(this,b,null);qt(this,_,null);qt(this,et,null);qt(this,nt,null);qt(this,st,null);qt(this,ot,null);qt(this,ht,null);qt(this,dt,!1);qt(this,$,!1);Yt(this,et,Ot.bitmapUrl),Yt(this,nt,Ot.bitmapFile)}static initialize(Ot){o.AnnotationEditor.initialize(Ot)}static get supportedTypes(){const Ot=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Ot.map(Bt=>`image/${Bt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Ot){return this.supportedTypes.includes(Ot)}static paste(Ot,Bt){Bt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Ot.getAsFile()})}remove(){var Ot,Bt;j(this,b)&&(Yt(this,h,null),this._uiManager.imageManager.deleteId(j(this,b)),(Ot=j(this,st))==null||Ot.remove(),Yt(this,st,null),(Bt=j(this,ot))==null||Bt.disconnect(),Yt(this,ot,null)),super.remove()}rebuild(){if(!this.parent){j(this,b)&&Nt(this,_e,gr).call(this);return}super.rebuild(),this.div!==null&&(j(this,b)&&Nt(this,_e,gr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(j(this,_)||j(this,h)||j(this,et)||j(this,nt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Ot,Bt;if(this.width&&(Ot=this.x,Bt=this.y),super.render(),this.div.hidden=!0,j(this,h)?Nt(this,_e,Jr).call(this):Nt(this,_e,gr).call(this),this.width){const[Ft,Mt]=this.parentDimensions;this.setAt(Ot*Ft,Bt*Mt,this.width*Ft,this.height*Mt)}return this.div}static deserialize(Ot,Bt,Ft){if(Ot instanceof d.StampAnnotationElement)return null;const Mt=super.deserialize(Ot,Bt,Ft),{rect:vt,bitmapUrl:Rt,bitmapId:$t,isSvg:_t,accessibilityData:rt}=Ot;$t&&Ft.imageManager.isValidId($t)?Yt(Mt,b,$t):Yt(Mt,et,Rt),Yt(Mt,dt,_t);const[at,gt]=Mt.pageDimensions;return Mt.width=(vt[2]-vt[0])/at,Mt.height=(vt[3]-vt[1])/gt,rt&&(Mt.altTextData=rt),Mt}serialize(Ot=!1,Bt=null){if(this.isEmpty())return null;const Ft={annotationType:a.AnnotationEditorType.STAMP,bitmapId:j(this,b),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:j(this,dt),structTreeParentId:this._structTreeParentId};if(Ot)return Ft.bitmapUrl=Nt(this,_e,vr).call(this,!0),Ft.accessibilityData=this.altTextData,Ft;const{decorative:Mt,altText:vt}=this.altTextData;if(!Mt&&vt&&(Ft.accessibilityData={type:"Figure",alt:vt}),Bt===null)return Ft;Bt.stamps||(Bt.stamps=new Map);const Rt=j(this,dt)?(Ft.rect[2]-Ft.rect[0])*(Ft.rect[3]-Ft.rect[1]):null;if(!Bt.stamps.has(j(this,b)))Bt.stamps.set(j(this,b),{area:Rt,serialized:Ft}),Ft.bitmap=Nt(this,_e,vr).call(this,!1);else if(j(this,dt)){const $t=Bt.stamps.get(j(this,b));Rt>$t.area&&($t.area=Rt,$t.serialized.bitmap.close(),$t.serialized.bitmap=Nt(this,_e,vr).call(this,!1))}return Ft}};h=new WeakMap,b=new WeakMap,_=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,ht=new WeakMap,dt=new WeakMap,$=new WeakMap,_e=new WeakSet,nr=function(Ot,Bt=!1){if(!Ot){this.remove();return}Yt(this,h,Ot.bitmap),Bt||(Yt(this,b,Ot.id),Yt(this,dt,Ot.isSvg)),Nt(this,_e,Jr).call(this)},ir=function(){Yt(this,_,null),this._uiManager.enableWaiting(!1),j(this,st)&&this.div.focus()},gr=function(){if(j(this,b)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(j(this,b)).then(Bt=>Nt(this,_e,nr).call(this,Bt,!0)).finally(()=>Nt(this,_e,ir).call(this));return}if(j(this,et)){const Bt=j(this,et);Yt(this,et,null),this._uiManager.enableWaiting(!0),Yt(this,_,this._uiManager.imageManager.getFromUrl(Bt).then(Ft=>Nt(this,_e,nr).call(this,Ft)).finally(()=>Nt(this,_e,ir).call(this)));return}if(j(this,nt)){const Bt=j(this,nt);Yt(this,nt,null),this._uiManager.enableWaiting(!0),Yt(this,_,this._uiManager.imageManager.getFromFile(Bt).then(Ft=>Nt(this,_e,nr).call(this,Ft)).finally(()=>Nt(this,_e,ir).call(this)));return}const Ot=document.createElement("input");Ot.type="file",Ot.accept=xt.supportedTypesStr,Yt(this,_,new Promise(Bt=>{Ot.addEventListener("change",async()=>{if(!Ot.files||Ot.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ft=await this._uiManager.imageManager.getFromFile(Ot.files[0]);Nt(this,_e,nr).call(this,Ft)}Bt()}),Ot.addEventListener("cancel",()=>{this.remove(),Bt()})}).finally(()=>Nt(this,_e,ir).call(this))),Ot.click()},Jr=function(){const{div:Ot}=this;let{width:Bt,height:Ft}=j(this,h);const[Mt,vt]=this.pageDimensions,Rt=.75;if(this.width)Bt=this.width*Mt,Ft=this.height*vt;else if(Bt>Rt*Mt||Ft>Rt*vt){const at=Math.min(Rt*Mt/Bt,Rt*vt/Ft);Bt*=at,Ft*=at}const[$t,_t]=this.parentDimensions;this.setDims(Bt*$t/Mt,Ft*_t/vt),this._uiManager.enableWaiting(!1);const rt=Yt(this,st,document.createElement("canvas"));Ot.append(rt),Ot.hidden=!1,Nt(this,_e,Qr).call(this,Bt,Ft),Nt(this,_e,Ds).call(this),j(this,$)||(this.parent.addUndoableEditor(this),Yt(this,$,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Fs=function(Ot,Bt){var Rt;const[Ft,Mt]=this.parentDimensions;this.width=Ot/Ft,this.height=Bt/Mt,this.setDims(Ot,Bt),(Rt=this._initialOptions)!=null&&Rt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,j(this,ht)!==null&&clearTimeout(j(this,ht)),Yt(this,ht,setTimeout(()=>{Yt(this,ht,null),Nt(this,_e,Qr).call(this,Ot,Bt)},200))},Ms=function(Ot,Bt){const{width:Ft,height:Mt}=j(this,h);let vt=Ft,Rt=Mt,$t=j(this,h);for(;vt>2*Ot||Rt>2*Bt;){const _t=vt,rt=Rt;vt>2*Ot&&(vt=vt>=16384?Math.floor(vt/2)-1:Math.ceil(vt/2)),Rt>2*Bt&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2));const at=new OffscreenCanvas(vt,Rt);at.getContext("2d").drawImage($t,0,0,_t,rt,0,0,vt,Rt),$t=at.transferToImageBitmap()}return $t},Qr=function(Ot,Bt){Ot=Math.ceil(Ot),Bt=Math.ceil(Bt);const Ft=j(this,st);if(!Ft||Ft.width===Ot&&Ft.height===Bt)return;Ft.width=Ot,Ft.height=Bt;const Mt=j(this,dt)?j(this,h):Nt(this,_e,Ms).call(this,Ot,Bt),vt=Ft.getContext("2d");vt.filter=this._uiManager.hcmFilter,vt.drawImage(Mt,0,0,Mt.width,Mt.height,0,0,Ot,Bt)},vr=function(Ot){if(Ot){if(j(this,dt)){const Mt=this._uiManager.imageManager.getSvgUrl(j(this,b));if(Mt)return Mt}const Bt=document.createElement("canvas");return{width:Bt.width,height:Bt.height}=j(this,h),Bt.getContext("2d").drawImage(j(this,h),0,0),Bt.toDataURL()}if(j(this,dt)){const[Bt,Ft]=this.pageDimensions,Mt=Math.round(this.width*Bt*c.PixelsPerInch.PDF_TO_CSS_UNITS),vt=Math.round(this.height*Ft*c.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=new OffscreenCanvas(Mt,vt);return Rt.getContext("2d").drawImage(j(this,h),0,0,j(this,h).width,j(this,h).height,0,0,Mt,vt),Rt.transferToImageBitmap()}return structuredClone(j(this,h))},Ds=function(){Yt(this,ot,new ResizeObserver(Ot=>{const Bt=Ot[0].contentRect;Bt.width&&Bt.height&&Nt(this,_e,Fs).call(this,Bt.width,Bt.height)})),j(this,ot).observe(this.div)},Ln(xt,"_type","stamp");let g=xt;i.StampEditor=g}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var i=__webpack_module_cache__[e];if(i!==void 0)return i.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return i.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return i.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return i.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return i.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return i.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.version}});var i=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),g=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),b=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:",allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HarmCategory;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmProbability;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var BlockReason;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(BlockReason||(BlockReason={}));var FinishReason;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"})(FinishReason||(FinishReason={}));var TaskType;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(TaskType||(TaskType={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAIError extends Error{constructor(i){super(`[GoogleGenerativeAI Error]: ${i}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(i,s){super(i),this.response=s}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_URL="https://generativelanguage.googleapis.com",API_VERSION="v1",PACKAGE_VERSION="0.2.1",PACKAGE_LOG_HEADER="genai-js";var Task;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Task||(Task={}));class RequestUrl{constructor(i,s,a,o){this.model=i,this.task=s,this.apiKey=a,this.stream=o}toString(){let i=`${BASE_URL}/${API_VERSION}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function getClientHeaders(){return`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`}async function makeRequest(e,i,s){let a;try{if(a=await fetch(e.toString(),Object.assign(Object.assign({},buildFetchOptions(s)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":getClientHeaders(),"x-goog-api-key":e.apiKey},body:i})),!a.ok){let o="";try{const c=await a.json();o=c.error.message,c.error.details&&(o+=` ${JSON.stringify(c.error.details)}`)}catch{}throw new Error(`[${a.status} ${a.statusText}] ${o}`)}}catch(o){const c=new GoogleGenerativeAIError(`Error fetching from ${e.toString()}: ${o.message}`);throw c.stack=o.stack,c}return a}function buildFetchOptions(e){const i={};if((e==null?void 0:e.timeout)>=0){const s=new AbortController,a=s.signal;setTimeout(()=>s.abort(),e.timeout),i.signal=a}return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return getText(e)}else if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(e)}`,e);return""},e}function getText(e){var i,s,a,o;return!((o=(a=(s=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a[0])===null||o===void 0)&&o.text?e.candidates[0].content.parts[0].text:""}const badFinishReasons=[FinishReason.RECITATION,FinishReason.SAFETY];function hadBadFinishReason(e){return!!e.finishReason&&badFinishReasons.includes(e.finishReason)}function formatBlockErrorMessage(e){var i,s,a;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((i=e.promptFeedback)===null||i===void 0)&&i.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const c=e.candidates[0];hadBadFinishReason(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(e,i||[]),o,c=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(nt){a[nt]&&(o[nt]=function(st){return new Promise(function(ot,ht){c.push([nt,st,ot,ht])>1||g(nt,st)})})}function g(nt,st){try{h(a[nt](st))}catch(ot){et(c[0][3],ot)}}function h(nt){nt.value instanceof __await?Promise.resolve(nt.value.v).then(b,_):et(c[0][2],nt)}function b(nt){g("next",nt)}function _(nt){g("throw",nt)}function et(nt,st){nt(st),c.shift(),c.length&&g(c[0][0],c[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const responseLineRE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(e){const i=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=getResponseStream(i),[a,o]=s.tee();return{stream:generateResponseSequence(a),response:getResponsePromise(o)}}async function getResponsePromise(e){const i=[],s=e.getReader();for(;;){const{done:a,value:o}=await s.read();if(a)return addHelpers(aggregateResponses(i));i.push(o)}}function generateResponseSequence(e){return __asyncGenerator(this,arguments,function*(){const s=e.getReader();for(;;){const{value:a,done:o}=yield __await(s.read());if(o)break;yield yield __await(addHelpers(a))}})}function getResponseStream(e){const i=e.getReader();return new ReadableStream({start(a){let o="";return c();function c(){return i.read().then(({value:d,done:g})=>{if(g){if(o.trim()){a.error(new GoogleGenerativeAIError("Failed to parse stream"));return}a.close();return}o+=d;let h=o.match(responseLineRE),b;for(;h;){try{b=JSON.parse(h[1])}catch{a.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${h[1]}"`));return}a.enqueue(b),o=o.substring(h[0].length),h=o.match(responseLineRE)}return c()})}}})}function aggregateResponses(e){const i=e[e.length-1],s={promptFeedback:i==null?void 0:i.promptFeedback};for(const a of e)if(a.candidates)for(const o of a.candidates){const c=o.index;if(s.candidates||(s.candidates=[]),s.candidates[c]||(s.candidates[c]={index:o.index}),s.candidates[c].citationMetadata=o.citationMetadata,s.candidates[c].finishReason=o.finishReason,s.candidates[c].finishMessage=o.finishMessage,s.candidates[c].safetyRatings=o.safetyRatings,o.content&&o.content.parts){s.candidates[c].content||(s.candidates[c].content={role:o.content.role||"user",parts:[{text:""}]});for(const d of o.content.parts)d.text&&(s.candidates[c].content.parts[0].text+=d.text)}}return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(e,i,s,a){const o=new RequestUrl(i,Task.STREAM_GENERATE_CONTENT,e,!0),c=await makeRequest(o,JSON.stringify(s),a);return processStream(c)}async function generateContent(e,i,s,a){const o=new RequestUrl(i,Task.GENERATE_CONTENT,e,!1),d=await(await makeRequest(o,JSON.stringify(s),a)).json();return{response:addHelpers(d)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatNewContent(e,i){let s=[];if(typeof e=="string")s=[{text:e}];else for(const a of e)typeof a=="string"?s.push({text:a}):s.push(a);return{role:i,parts:s}}function formatGenerateContentInput(e){return e.contents?e:{contents:[formatNewContent(e,"user")]}}function formatEmbedContentInput(e){return typeof e=="string"||Array.isArray(e)?{content:formatNewContent(e,"user")}:e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SILENT_ERROR="SILENT_ERROR";class ChatSession{constructor(i,s,a,o){this.model=s,this.params=a,this.requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=i,a!=null&&a.history&&(this._history=a.history.map(c=>{if(!c.role)throw new Error("Missing role for history item: "+JSON.stringify(c));return formatNewContent(c.parts,c.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(i){var s,a;await this._sendPromise;const o=formatNewContent(i,"user"),c={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,contents:[...this._history,o]};let d;return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,c,this.requestOptions)).then(g=>{var h;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(o);const b=Object.assign({parts:[],role:"model"},(h=g.response.candidates)===null||h===void 0?void 0:h[0].content);this._history.push(b)}else{const b=formatBlockErrorMessage(g.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}d=g}),await this._sendPromise,d}async sendMessageStream(i){var s,a;await this._sendPromise;const o=formatNewContent(i,"user"),c={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,contents:[...this._history,o]},d=generateContentStream(this._apiKey,this.model,c,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>d).catch(g=>{throw new Error(SILENT_ERROR)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(o);const h=Object.assign({},g.candidates[0].content);h.role||(h.role="model"),this._history.push(h)}else{const h=formatBlockErrorMessage(g);h&&console.warn(`sendMessageStream() was unsuccessful. ${h}. Inspect response object for details.`)}}).catch(g=>{g.message!==SILENT_ERROR&&console.error(g)}),d}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(e,i,s,a){const o=new RequestUrl(i,Task.COUNT_TOKENS,e,!1);return(await makeRequest(o,JSON.stringify(Object.assign(Object.assign({},s),{model:i})),a)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(e,i,s,a){const o=new RequestUrl(i,Task.EMBED_CONTENT,e,!1);return(await makeRequest(o,JSON.stringify(s),a)).json()}async function batchEmbedContents(e,i,s,a){const o=new RequestUrl(i,Task.BATCH_EMBED_CONTENTS,e,!1),c=s.requests.map(g=>Object.assign(Object.assign({},g),{model:i}));return(await makeRequest(o,JSON.stringify({requests:c}),a)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GenerativeModel{constructor(i,s,a){this.apiKey=i,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.requestOptions=a||{}}async generateContent(i){const s=formatGenerateContentInput(i);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},s),this.requestOptions)}async generateContentStream(i){const s=formatGenerateContentInput(i);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},s),this.requestOptions)}startChat(i){return new ChatSession(this.apiKey,this.model,i,this.requestOptions)}async countTokens(i){const s=formatGenerateContentInput(i);return countTokens(this.apiKey,this.model,s)}async embedContent(i){const s=formatEmbedContentInput(i);return embedContent(this.apiKey,this.model,s)}async batchEmbedContents(i){return batchEmbedContents(this.apiKey,this.model,i,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAI{constructor(i){this.apiKey=i}getGenerativeModel(i,s){if(!i.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,i,s)}}const apiKey="AIzaSyC68oK5h-ijUi-MmoYsy3lqyUT5o1hWtok",genAI=new GoogleGenerativeAI(apiKey),model=genAI.getGenerativeModel({model:"gemini-pro"});async function summarizePaper(e){const i=`Please provide a comprehensive summary of the following research paper. Focus on the main findings, methodology, and conclusions. Give pre formatted text as output. Here's the paper text:

${e}`;try{return(await(await model.generateContent(i)).response).text()}catch(s){throw console.error("Error summarizing paper:",s),s}}async function detectBias(e){const i=`Please conduct a thorough bias analysis of the following research paper. For each type of bias, explicitly state whether it was detected and provide specific examples from the text if found.

Types of Bias to Analyze:

1. Selection Bias in Methodology:
   - Evaluate how participants/data were selected
   - Assess inclusion/exclusion criteria
   - Identify any systematic errors in selection process

2. Confirmation Bias in Conclusions:
   - Examine if authors overlooked contradictory evidence
   - Check if conclusions align with initial hypotheses too perfectly
   - Look for alternative explanations that were dismissed

3. Sampling Bias in Data Collection:
   - Analyze representativeness of the sample
   - Check for underrepresented groups
   - Evaluate sample size adequacy

4. Cultural or Geographical Bias:
   - Identify any cultural assumptions
   - Check for geographic limitations
   - Assess generalizability across different contexts

5. Funding Source Bias:
   - Examine funding sources and potential conflicts
   - Look for industry influence
   - Assess disclosure transparency

6. Publication Bias:
   - Consider if negative results might be underreported
   - Look for selective reporting of outcomes
   - Check for p-hacking indicators

Format your response with clear headings for each bias type, and explicitly state "Not detected" if a particular bias is absent. Provide specific examples and page numbers when possible.

Paper text:

${e}`;try{return(await(await model.generateContent(i)).response).text()}catch(s){throw console.error("Error detecting bias:",s),s}}async function answerQuestion(e,i){const s=`Using the context of the following research paper, please answer this question: "${i}"
  
  Paper text:

${e}`;try{return(await(await model.generateContent(s)).response).text()}catch(a){throw console.error("Error answering question:",a),a}}async function getSuggestions(e,i){if(!e||!i)throw new Error("Missing paper text or annotation");try{const s=`You are an experienced research mentor providing feedback on a student's annotation of a research paper. 

Context:
Paper: "${e.slice(0,2e3)}..."
Student's Annotation: "${i}"

As their mentor, please provide:
1. A brief analysis of their perspective and how it relates to the paper's content
2. 2-3 specific suggestions for deepening their analysis
3. Potential research directions they could explore based on their interests
4. Areas where they could contribute novel insights to the field

Keep the tone supportive yet professional, as if you're a senior researcher mentoring a promising junior colleague.`,a=await model.generateContent(s);if(!a.response)throw new Error("No response received from Gemini API");return a.response.text()}catch(s){throw console.error("Error in getSuggestions:",s),new Error(s.message||"Failed to get suggestions")}}pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;function PaperUploader({onUpload:e}){const i=reactExports.useCallback(async c=>{const d=c[0];if(d)try{console.log("Processing PDF file:",d.name);const g=await d.arrayBuffer(),h=await pdfjs.getDocument(g).promise;let b="";for(let st=1;st<=h.numPages;st++){const dt=(await(await h.getPage(st)).getTextContent()).items.map($=>$.str).join(" ");b+=dt+" "}console.log("PDF text extracted, generating summary...");const _=await summarizePaper(b);console.log("Summary generated");const{data:et,error:nt}=await supabase.from("papers").insert([{title:d.name,summary:_,full_text:b}]).select().single();if(nt)throw console.error("Supabase error:",nt),new Error(nt.message);console.log("Paper saved to database:",et),await e(b,d.name)}catch(g){console.error("Error processing PDF:",g),alert(g.message||"Error processing PDF file")}},[e]),{getRootProps:s,getInputProps:a,isDragActive:o}=useDropzone({onDrop:i,accept:{"application/pdf":[".pdf"]},maxFiles:1});return jsxRuntimeExports.jsxs("div",{...s(),className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[jsxRuntimeExports.jsx("input",{...a()}),jsxRuntimeExports.jsx(Upload,{className:"mx-auto h-12 w-12 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:o?"Drop the PDF here":"Drag and drop a PDF file here, or click to select"})]})}function PaperList({papers:e,onSelect:i,onDelete:s}){return jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.map(a=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer",onClick:()=>i(a),children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900",children:a.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]})]}),jsxRuntimeExports.jsx("button",{onClick:o=>{o.stopPropagation(),s(a.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"h-5 w-5"})})]})},a.id))})}function Annotations({paperId:e,paperText:i,userName:s,userColor:a}){const[o,c]=reactExports.useState([]),[d,g]=reactExports.useState(""),[h,b]=reactExports.useState(!1),[_,et]=reactExports.useState(null);reactExports.useEffect(()=>{if(e){nt();const ht=supabase.channel(`annotations_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"annotations",filter:`paper_id=eq.${e}`},$=>{console.log("Annotations change received:",$),nt()}).subscribe(),dt=setInterval(nt,1e3);return()=>{ht.unsubscribe(),clearInterval(dt)}}},[e]);async function nt(){try{const{data:ht,error:dt}=await supabase.from("annotations").select("*").eq("paper_id",e).order("created_at",{ascending:!0});if(dt)throw new Error(dt.message);c(ht||[])}catch(ht){console.error("Error fetching annotations:",ht),et(ht.message||"Failed to load annotations")}}async function st(ht){if(ht.preventDefault(),!(!d.trim()||!e))try{b(!0),et(null);const dt=await getSuggestions(i,d),{data:$,error:_e}=await supabase.from("annotations").insert([{paper_id:e,content:d,ai_suggestions:dt,position:"end",user_identity:s,color:a}]).select().single();if(_e)throw new Error(_e.message);g("")}catch(dt){console.error("Error adding annotation:",dt),et(dt.message||"Failed to add annotation")}finally{b(!1)}}async function ot(ht){try{et(null);const{error:dt}=await supabase.from("annotations").delete().eq("id",ht);if(dt)throw new Error(dt.message)}catch(dt){console.error("Error deleting annotation:",dt),et(dt.message||"Failed to delete annotation")}}return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Research Notes & Feedback"})]})}),_&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:_}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:o.map(ht=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4 shadow-sm",style:{borderLeft:`4px solid ${ht.color}`},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"h-5 w-5 text-gray-400 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900",children:ht.user_identity}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[new Date(ht.created_at).toLocaleDateString()," at"," ",new Date(ht.created_at).toLocaleTimeString()]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-900 mt-1",children:ht.content})]})]}),ht.user_identity===s&&jsxRuntimeExports.jsx("button",{onClick:()=>ot(ht.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]}),ht.ai_suggestions&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 mb-3",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"AI Mentor Feedback"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap prose prose-sm max-w-none",children:ht.ai_suggestions})]})]},ht.id))}),jsxRuntimeExports.jsx("form",{onSubmit:st,className:"mt-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("label",{htmlFor:"annotation",className:"block text-sm font-medium text-gray-700",children:"Add your research note"}),jsxRuntimeExports.jsx("textarea",{id:"annotation",rows:3,value:d,onChange:ht=>g(ht.target.value),placeholder:"Share your thoughts, questions, or insights about the paper...",className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),jsxRuntimeExports.jsxs("button",{type:"submit",disabled:h||!d.trim(),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[h?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Add Note"]})]})})]})}function Room(){const{roomId:e}=useParams(),[i,s]=reactExports.useState(null),[a,o]=reactExports.useState([]),[c,d]=reactExports.useState(null),[g,h]=reactExports.useState(!0),[b,_]=reactExports.useState(null),[et,nt]=reactExports.useState("summary"),[st,ot]=reactExports.useState(""),[ht,dt]=reactExports.useState(""),[$,_e]=reactExports.useState(""),[ct,pt]=reactExports.useState(!1),tt=localStorage.getItem("userName"),ut=localStorage.getItem("userColor");reactExports.useEffect(()=>{if(!tt||!ut||!e)return;lt(),mt();const Dt=supabase.channel(`papers_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"papers",filter:`room_id=eq.${e}`},Ft=>{console.log("Papers change received:",Ft),mt(),Ft.eventType==="DELETE"&&(c==null?void 0:c.id)===Ft.old.id&&d(null),Ft.eventType==="UPDATE"&&(c==null?void 0:c.id)===Ft.new.id&&d(Ft.new)}).subscribe(),Ot=supabase.channel(`room_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${e}`},Ft=>{if(console.log("Room change received:",Ft),Ft.eventType==="DELETE"){_("This room has been deleted");return}lt()}).subscribe(),Bt=setInterval(()=>{lt(),mt(),c&&it()},1e3);return()=>{Dt.unsubscribe(),Ot.unsubscribe(),clearInterval(Bt)}},[e,c==null?void 0:c.id]);async function it(){if(c)try{const{data:Dt,error:Ot}=await supabase.from("papers").select("*").eq("id",c.id).single();if(Ot)throw Ot;Dt&&d(Dt)}catch(Dt){console.error("Error refreshing selected paper:",Dt)}}async function lt(){try{const{data:Dt,error:Ot}=await supabase.from("rooms").select("*").eq("id",e).single();if(Ot)throw Ot;s(Dt)}catch(Dt){console.error("Error fetching room:",Dt),_(Dt.message)}}async function mt(){try{h(!0);const{data:Dt,error:Ot}=await supabase.from("papers").select("*").eq("room_id",e).order("created_at",{ascending:!1});if(Ot)throw Ot;o(Dt||[])}catch(Dt){console.error("Error fetching papers:",Dt),_(Dt.message)}finally{h(!1)}}async function Et(Dt,Ot){h(!0),_(null);try{const Bt=await summarizePaper(Dt),{data:Ft,error:Mt}=await supabase.from("papers").insert([{title:Ot,summary:Bt,full_text:Dt,room_id:e}]).select().single();if(Mt)throw Mt;d(Ft)}catch(Bt){console.error("Error processing paper:",Bt),_("Failed to process paper. Please try again.")}finally{h(!1)}}async function ft(Dt){try{const{error:Ot}=await supabase.from("papers").delete().eq("id",Dt);if(Ot)throw Ot;(c==null?void 0:c.id)===Dt&&d(null)}catch(Ot){console.error("Error deleting paper:",Ot),_(Ot.message)}}async function xt(){if(c!=null&&c.full_text){pt(!0),_(null);try{const Dt=await detectBias(c.full_text);ot(Dt)}catch(Dt){console.error("Error detecting bias:",Dt),_("Failed to analyze bias. Please try again.")}finally{pt(!1)}}}async function kt(Dt){if(Dt.preventDefault(),!(!(c!=null&&c.full_text)||!ht)){pt(!0),_(null);try{const Ot=await answerQuestion(c.full_text,ht);_e(Ot)}catch(Ot){console.error("Error answering question:",Ot),_("Failed to answer question. Please try again.")}finally{pt(!1)}}}return!tt||!ut?jsxRuntimeExports.jsx(Navigate,{to:"/"}):i?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx(Users,{className:"h-8 w-8 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Created by ",i.created_by]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ut}}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:tt})]})]}),b&&jsxRuntimeExports.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:jsxRuntimeExports.jsx("p",{className:"text-red-700",children:b})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PaperUploader,{onUpload:Et}),jsxRuntimeExports.jsx("div",{className:"h-[1px] bg-gray-200"}),jsxRuntimeExports.jsx(PaperList,{papers:a,onSelect:d,onDelete:ft})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow",children:g&&!a.length?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):c?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"border-b",children:jsxRuntimeExports.jsxs("nav",{className:"flex -mb-px",children:[jsxRuntimeExports.jsx("button",{onClick:()=>nt("summary"),className:`px-4 py-3 font-medium text-sm border-b-2 ${et==="summary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Summary"}),jsxRuntimeExports.jsx("button",{onClick:()=>{nt("bias"),st||xt()},className:`px-4 py-3 font-medium text-sm border-b-2 ${et==="bias"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Bias Analysis"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt("qa"),className:`px-4 py-3 font-medium text-sm border-b-2 ${et==="qa"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Q&A"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt("annotations"),className:`px-4 py-3 font-medium text-sm border-b-2 ${et==="annotations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Annotations"})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:c.title}),et==="summary"&&jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:c.summary})}),et==="bias"&&jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:ct?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):st?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-yellow-500"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Bias Analysis"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:st})]}):jsxRuntimeExports.jsx("p",{children:"Analyzing bias..."})}),et==="qa"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("form",{onSubmit:kt,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Ask a question about this paper"}),jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx("input",{type:"text",id:"question",value:ht,onChange:Dt=>dt(Dt.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"e.g., What were the main findings?"})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:ct?"Thinking...":"Ask Question"})]}),$&&jsxRuntimeExports.jsxs("div",{className:"prose max-w-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(HelpCircle,{className:"h-5 w-5 text-blue-500"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Answer"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:$})]})]}),et==="annotations"&&c&&jsxRuntimeExports.jsx(Annotations,{paperId:c.id,paperText:c.full_text,userName:tt,userColor:ut})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[jsxRuntimeExports.jsx(FileText,{className:"h-16 w-16 mb-4"}),jsxRuntimeExports.jsx("p",{children:"Select a paper to start collaborating"})]})})]})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Room not found"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"This room might have been deleted or never existed."})]})})}function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(RoomJoin,{})}),jsxRuntimeExports.jsx(Route,{path:"/room/:roomId",element:jsxRuntimeExports.jsx(Room,{})})]})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{getDefaultExportFromCjs as g};
